<section class="cart-page">
  <h1>Panier</h1>

  <div class="layout">
    <div class="table">
      <div class="thead">
        <span>Article</span>
        <span>Prix</span>
        <span>Qt√©</span>
        <span>Sous-total</span>
      </div>

      <div class="row" *ngFor="let p of cart.items(); let i = index">
        <div class="prod">
          <img [src]="p.imageUrl || 'assets/images/placeholder.jpg'" [alt]="p.name">
          <div class="name">{{ p.name }}</div>
        </div>

        <div class="price">{{ p.price +' TND' }}</div>

        <div class="qty">
          <button type="button" (click)="cart.dec(i)" aria-label="Moins">‚àí</button>
          <input type="number" min="1" [(ngModel)]="cart.items()[i].qty"
                 (change)="cart.setQty(i, cart.items()[i].qty)">
          <button type="button" (click)="cart.inc(i)" aria-label="Plus">Ôºã</button>
        </div>

        <div class="line-total">{{ (p.price * p.qty) +' TND' }}</div>

        <button class="remove" type="button" (click)="cart.remove(i)" aria-label="Supprimer">üóëÔ∏è</button>
      </div>

      <div *ngIf="!cart.items().length" class="empty">Votre panier est vide.</div>
    </div>

    <aside class="summary">
      <h2>Sommaire</h2>

      <div class="sum-row">
        <span>Sous-total</span>
        <strong>{{ cart.subtotal() }} TND</strong>
      </div>

      <div class="sum-row">
        <span>Livraison</span>
        <strong>{{ shipping }} TND</strong>
      </div>

      <div class="sum-row total">
        <span>Total √† payer</span>
        <strong>{{ total }} TND</strong>
      </div>

      <button class="btn-primary w-full" (click)="checkout()">
        PASSER LA COMMANDE
      </button>
    </aside>

  </div>
</section>
