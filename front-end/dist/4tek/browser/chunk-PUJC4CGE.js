import{c as L,e as N,f as $}from"./chunk-RIE7MEC4.js";import{a as Y}from"./chunk-DB5BZNX6.js";import{a as j}from"./chunk-PIKNBSXP.js";import{b as B}from"./chunk-OQWVLEVP.js";import"./chunk-HWLEWUSP.js";import{$a as s,$b as R,Aa as u,Ab as T,Cb as v,Ea as i,Ib as z,Ma as E,Qa as d,Sb as F,Tb as A,Wa as c,Ya as I,Z as f,Za as r,_a as o,ab as C,bb as h,cb as w,da as P,db as S,e as x,ea as M,eb as l,fb as y,kb as b,lb as p,nb as g,ra as m,tb as k,ub as O,xb as U}from"./chunk-72X2LRK3.js";var q=()=>[1,2,3,4,5,6],H=t=>["/categories",t],W=t=>["/categories/sub-categories/",t];function X(t,n){t&1&&(r(0,"p",12),p(1,"Explore nos rubriques et collections"),o())}function Z(t,n){if(t&1&&(C(0),r(1,"h2")(2,"a",9),p(3,"\u2190"),o(),s(4,"i",10),p(5," Cat\xE9gories "),o(),d(6,X,2,0,"p",11),h()),t&2){let e=l();i(6),c("ngIf",!e.loading())}}function G(t,n){if(t&1&&(r(0,"h2")(1,"a",13),p(2,"\u2190"),o(),s(3,"i",10),p(4),o()),t&2){let e,a=l();i(4),g(" ",((e=a.cat())==null?null:e.name)||"Cat\xE9gorie"," ")}}function J(t,n){t&1&&(r(0,"article",16),s(1,"div",17),r(2,"div",18),s(3,"div",19)(4,"div",20),o()())}function K(t,n){t&1&&(r(0,"div",14),d(1,J,5,0,"article",15),o()),t&2&&(i(),c("ngForOf",k(1,q)))}function Q(t,n){if(t&1&&(r(0,"div",33),s(1,"img",25),o()),t&2){let e=l().$implicit,a=l(2);i(),c("src",a.getUrl(e.iconUrl),u)("alt","Ic\xF4ne "+e.name)}}function ee(t,n){if(t&1){let e=w();r(0,"button",34),S("click",function(){P(e);let _=l().$implicit;return M(_.isExpanded=!_.isExpanded)}),p(1),o()}if(t&2){let e=l().$implicit;i(),g(" ",e.isExpanded?"Masquer la suite \u2191":"Afficher la suite \u2193"," ")}}function te(t,n){if(t&1&&(C(0),r(1,"div",22)(2,"a",23)(3,"div",24),s(4,"img",25),o(),r(5,"div",18)(6,"h3",26),s(7,"i",27),p(8),o(),r(9,"p",28),p(10),o(),r(11,"span",29),s(12,"i",30),p(13),o(),d(14,Q,2,2,"div",31),o()(),d(15,ee,2,1,"button",32),o(),h()),t&2){let e=n.$implicit,a=l(2);i(2),c("routerLink",O(11,H,e._id)),i(2),y("alt",e.name),c("src",a.getUrl(e.imageUrl)||a.getUrl(e.banners==null?null:e.banners[0])||a.getUrl(e.iconUrl)||"/assets/placeholder.jpg",u),i(4),g(" ",e.name,""),i(),I("expanded",e.isExpanded),c("title",e.description||""),i(),g(" ",e.description||"\u2014"," "),i(3),g(" /",e.slug,""),i(),c("ngIf",e.iconUrl),i(),c("ngIf",(e.description||"").length>90)}}function ne(t,n){if(t&1&&(r(0,"div",14),d(1,te,16,13,"ng-container",21),o()),t&2){let e=l();i(),c("ngForOf",e.list())}}function ie(t,n){t&1&&(r(0,"p",36),p(1,"Aucune cat\xE9gorie disponible."),o())}function ae(t,n){if(t&1&&d(0,ie,2,0,"p",35),t&2){let e=l();c("ngIf",!e.selectedCatId())}}function oe(t,n){t&1&&(C(0),p(1,"\u2026"),h())}function re(t,n){if(t&1&&(r(0,"div",33),s(1,"img",25),o()),t&2){let e=l().$implicit,a=l(3);i(),c("src",a.getUrl(e.iconUrl),u)("alt","Ic\xF4ne "+e.name)}}function ce(t,n){if(t&1&&(r(0,"a",38)(1,"div",24),s(2,"img",25),o(),r(3,"div",18)(4,"h3",26),s(5,"i",27),p(6),o(),r(7,"p",28),p(8),U(9,"slice"),d(10,oe,2,0,"ng-container",39),o(),r(11,"span",29),s(12,"i",30),p(13),o(),d(14,re,2,2,"div",31),o()()),t&2){let e=n.$implicit,a=l(3);c("routerLink",O(13,W,e._id)),i(2),y("alt",e.name),c("src",a.getUrl(e.imageUrl)||a.getUrl(e.banners==null?null:e.banners[0])||a.getUrl(e.iconUrl)||"/assets/placeholder.jpg",u),i(4),g(" ",e.name,""),i(),c("title",e.description||""),i(),g(" ",T(9,9,e.description||"\u2014",0,90),""),i(2),c("ngIf",(e.description||"").length>90),i(3),g(" /",e.slug,""),i(),c("ngIf",e.iconUrl)}}function le(t,n){if(t&1&&(C(0),d(1,ce,15,15,"a",37),h()),t&2){let e=l(2);i(),c("ngForOf",e.subs())}}function pe(t,n){if(t&1&&(r(0,"p",36),p(1),o()),t&2){let e,a=l(2);i(),g("Aucune sous-cat\xE9gorie dans \xAB ",(e=a.cat())==null?null:e.name," \xBB.")}}function de(t,n){if(t&1&&(r(0,"div",14),d(1,le,2,1,"ng-container",5)(2,pe,2,1,"ng-template",null,2,v),o()),t&2){let e=b(3),a=l();i(),c("ngIf",a.subs().length)("ngIfElse",e)}}var D=class t{api=f(j);subsApi=f(Y);router=f(N);route=f(L);loading=m(!0);selectedCatId=m(null);raw=m([]);cat=m(null);subs=m([]);list=z(()=>this.raw().filter(n=>n.isActive));expandedCategories=m(new Set);ngOnInit(){return x(this,null,function*(){this.route.paramMap.subscribe(n=>x(this,null,function*(){let e=n.get("id");this.selectedCatId.set(e),console.log(),e?yield this.fetchOneAndSubs(e):yield this.fetchCategories()}))})}fetchCategories(){return x(this,null,function*(){this.loading.set(!0);try{let n=yield this.api.list().toPromise();this.raw.set(n||[]),this.cat.set(null),this.subs.set([])}finally{this.loading.set(!1)}})}fetchOneAndSubs(n){return x(this,null,function*(){this.loading.set(!0);try{let[e,a]=yield Promise.all([this.api.getOne(n).toPromise(),this.subsApi.listByCategory(n).toPromise()]);this.cat.set(e||null),console.log("s",a),this.subs.set((a||[]).filter(_=>_.isActive))}finally{this.loading.set(!1)}})}isCategoryExpanded(n){return this.expandedCategories().has(n)}toggleCategory(n){let e=new Set(this.expandedCategories());e.has(n)?e.delete(n):e.add(n),this.expandedCategories.set(e)}getToggleText(n){return this.isCategoryExpanded(n)?"R\xE9duire \u2191":"Afficher la suite \u2193"}getUrl=B;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-category"]],decls:11,vars:6,consts:[["subHeader",""],["emptyWhenNoCats",""],["noSubs",""],[1,"contact"],[1,"contact-head"],[4,"ngIf","ngIfElse"],[1,"container"],["class","grid",4,"ngIf"],["class","grid",4,"ngIf","ngIfElse"],["routerLink","/","aria-label","Retour \xE0 l'accueil",1,"link"],[1,"icon-folder"],["class","muted",4,"ngIf"],[1,"muted"],["routerLink","/categories","aria-label","Retour aux cat\xE9gories",1,"link"],[1,"grid"],["class","card skel",4,"ngFor","ngForOf"],[1,"card","skel"],[1,"media","skel-box"],[1,"pad"],[1,"title","skel-line"],[1,"desc","skel-line","short"],[4,"ngFor","ngForOf"],[1,"card-wrapper"],["aria-label","Ouvrir la cat\xE9gorie",1,"card",3,"routerLink"],[1,"media"],[3,"src","alt"],[1,"title"],[1,"icon-tag"],[1,"desc-content",3,"title"],[1,"slug"],[1,"icon-link-2"],["class","icon",4,"ngIf"],["class","read-more-btn","type","button",3,"click",4,"ngIf"],[1,"icon"],["type","button",1,"read-more-btn",3,"click"],["class","empty muted",4,"ngIf"],[1,"empty","muted"],["class","card","aria-label","Ouvrir la sous-cat\xE9gorie",3,"routerLink",4,"ngFor","ngForOf"],["aria-label","Ouvrir la sous-cat\xE9gorie",1,"card",3,"routerLink"],[4,"ngIf"]],template:function(e,a){if(e&1&&(r(0,"section",3)(1,"header",4),d(2,Z,7,1,"ng-container",5)(3,G,5,1,"ng-template",null,0,v),o(),r(5,"div",6),d(6,K,2,2,"div",7)(7,ne,2,1,"div",8)(8,ae,1,1,"ng-template",null,1,v)(10,de,4,2,"div",7),o()()),e&2){let _=b(4),V=b(9);i(2),c("ngIf",!a.selectedCatId())("ngIfElse",_),i(4),c("ngIf",a.loading()),i(),c("ngIf",!a.loading()&&!a.selectedCatId()&&a.list().length)("ngIfElse",V),i(3),c("ngIf",!a.loading()&&a.selectedCatId())}},dependencies:[F,$,R,A],styles:['[_nghost-%COMP%]{display:block}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.001ms!important;animation-iteration-count:1!important;transition-duration:.001ms!important;scroll-behavior:auto!important}}.contact[_ngcontent-%COMP%]{display:grid;gap:20px;padding:0 4px}.contact-head[_ngcontent-%COMP%]{padding:0 4px}.contact-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:clamp(1.5rem,4vw,2rem);line-height:1.1;letter-spacing:-.02em;display:flex;align-items:center;gap:12px;font-weight:800;color:#eaf2ff}.contact-head[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#fffc;text-decoration:none;transition:all .2s ease;border-radius:8px;padding:4px}.contact-head[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#22d3ee;background:#22d3ee1a;transform:translate(-2px)}.contact-head[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{color:#8a99b8;font-size:1rem;margin-top:6px;font-weight:500}.contact[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#12182670,#0b0f180f);border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:24px;box-shadow:0 8px 32px #0003,0 2px 8px #0000001a,inset 0 1px #ffffff0d;backdrop-filter:blur(10px)}.grid[_ngcontent-%COMP%]{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}.card-wrapper[_ngcontent-%COMP%]{position:relative;display:contents}@media (min-width: 1200px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}}.card[_ngcontent-%COMP%]{position:relative;display:grid;transition:all .3s cubic-bezier(.4,0,.2,1);grid-template-rows:auto auto;gap:0;text-decoration:none;border-radius:16px;background:radial-gradient(100% 100% at 0% 0%,rgba(34,211,238,.12),transparent 60%),linear-gradient(135deg,#121826e6,#0c101af2);border:1px solid rgba(255,255,255,.1);box-shadow:0 4px 20px #00000026,0 1px 3px #0000001a;overflow:hidden;color:#eaf2ff;transform:translateZ(0);cursor:pointer}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(34,211,238,.03),transparent 30%);opacity:0;transition:opacity .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-6px) scale(1.01);box-shadow:0 12px 40px #00000040,0 4px 12px #00000026,0 0 0 1px #22d3ee33;border-color:#22d3ee4d}.card[_ngcontent-%COMP%]:hover:before{opacity:1}.media[_ngcontent-%COMP%]{position:relative;background:linear-gradient(135deg,#0e1525,#0a0f1c);border-bottom:1px solid rgba(255,255,255,.08);overflow:hidden}.media[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(90deg,rgba(34,211,238,.4),transparent);transform:scaleX(0);transition:transform .3s ease}.card[_ngcontent-%COMP%]:hover   .media[_ngcontent-%COMP%]:after{transform:scaleX(1)}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;display:block;transform:scale(1);transition:transform .5s cubic-bezier(.4,0,.2,1);filter:brightness(.95)}.card[_ngcontent-%COMP%]:hover   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05);filter:brightness(1.05)}.pad[_ngcontent-%COMP%]{padding:16px;display:grid;gap:10px;position:relative;z-index:1}.title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:0;font-weight:800;font-size:clamp(16px,1.8vw,18px);color:#eaf2ff;line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.desc-content[_ngcontent-%COMP%]{margin:0;color:#8a99b8;line-height:1.5;font-size:14px;overflow:hidden;max-height:4.5em;transition:max-height .4s ease-in-out}.desc-content.expanded[_ngcontent-%COMP%]{max-height:500px;overflow:visible}.read-more-btn[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#22d3eee6;background:none;border:none;padding:0;cursor:pointer;transition:color .2s ease,transform .2s ease;width:max-content;display:inline-flex;align-items:center;gap:4px;position:absolute;bottom:24px;left:32px;z-index:10}.card-wrapper[_ngcontent-%COMP%]:hover   .read-more-btn[_ngcontent-%COMP%]{transform:translateY(-6px)}.read-more-btn[_ngcontent-%COMP%]:hover{color:#fff}.slug[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:#8a99b8;border-radius:12px;padding:6px 12px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);width:max-content;font-weight:600;letter-spacing:.02em;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover   .slug[_ngcontent-%COMP%]{background:#22d3ee1a;border-color:#22d3ee33;color:#22d3eee6}.icon[_ngcontent-%COMP%]{position:absolute;top:-22px;right:4px;width:40px;height:40px;border-radius:12px;overflow:hidden;background:#0c101acc;border:1px solid rgba(255,255,255,.12);box-shadow:0 8px 24px #0000004d,0 2px 6px #0003;backdrop-filter:blur(10px);z-index:2;transition:all .3s ease}@media (max-width: 768px){.contact[_ngcontent-%COMP%]{gap:20px;padding:0 4px}.contact[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:20px 16px;border-radius:16px}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:140px}.pad[_ngcontent-%COMP%]{padding:14px;gap:8px}.icon[_ngcontent-%COMP%]{width:36px;height:36px;top:12px;right:12px}.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}@media (max-width: 480px){.grid[_ngcontent-%COMP%]{gap:12px;grid-template-columns:1fr}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px}.title[_ngcontent-%COMP%]{font-size:15px}.contact[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:16px 12px}.contact-head[_ngcontent-%COMP%]{padding:0 4px}.icon[_ngcontent-%COMP%]{top:10px;right:10px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}.card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.3s}.card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.4s}.card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.5s}']})};export{D as CategoryComponent};
