import{a as G}from"./chunk-VI4EALIG.js";import{a as oe}from"./chunk-SBTREMVH.js";import{a as D}from"./chunk-DB5BZNX6.js";import{b as $,c as B,d as b,e as q,f as H,g as Y,h as K,i as Z,j as J,l as Q,m as W,n as X,o as ee,p as te,u as ne,v as ie,w as re}from"./chunk-BFCV6PZZ.js";import{a as j}from"./chunk-PIKNBSXP.js";import{b as k}from"./chunk-OQWVLEVP.js";import"./chunk-HWLEWUSP.js";import{$a as x,Aa as w,Bb as T,Cb as R,Ea as c,Ib as F,Ma as S,Qa as _,Sb as N,Tb as z,Wa as s,Ya as E,Z as y,Za as n,_a as i,_b as L,ac as U,cb as v,da as p,db as g,e as h,ea as m,eb as d,fb as A,kb as V,lb as l,mb as C,nb as M,ra as f,s as O,xb as I}from"./chunk-72X2LRK3.js";function ce(a,t){if(a&1&&(n(0,"option",15),l(1),i()),a&2){let e=t.$implicit;s("value",e._id),c(),C(e.name)}}function se(a,t){a&1&&(n(0,"div",16),l(1,"Chargement\u2026"),i())}function de(a,t){if(a&1&&(n(0,"span",36),l(1),i()),a&2){let e=d().$implicit;c(),M("SKU: ",e.sku,"")}}function pe(a,t){if(a&1){let e=v();n(0,"article",19)(1,"div",20),x(2,"img",21),i(),n(3,"div",22)(4,"div",23)(5,"h3"),l(6),i(),n(7,"span",24),l(8),i()(),n(9,"div",25)(10,"span",26),l(11),I(12,"currency"),i(),_(13,de,2,1,"span",27),i(),n(14,"p",28),l(15),i(),n(16,"div",29)(17,"span",30),l(18),i()(),n(19,"div",31)(20,"button",32),g("click",function(){let o=p(e).$implicit,u=d(2);return m(u.openEdit(o))}),l(21,"Modifier"),i(),n(22,"button",33),g("click",function(){let o=p(e).$implicit,u=d(2);return m(u.openReplace(o))}),l(23,"Remplacer fichiers\u2026"),i(),n(24,"button",34),g("click",function(){let o=p(e).$implicit,u=d(2);return m(u.toggle(o))}),l(25),i(),n(26,"button",35),g("click",function(){let o=p(e).$implicit,u=d(2);return m(u.remove(o))}),l(27,"Supprimer"),i()()()()}if(a&2){let e=t.$implicit,r=d(2);c(2),A("alt",e.name),s("src",r.getUrl(e.imageUrl)||"/assets/placeholder.jpg",w),c(4),C(e.name),c(),E("on",e.isActive)("off",!e.isActive),c(),M(" ",e.isActive?"Actif":"Inactif"," "),c(3),C(T(12,13,e.price,e.currency||"TND","symbol","1.0-3")),c(2),s("ngIf",e.sku),c(2),C(e.description||"\u2014"),c(3),M("/",e.slug,""),c(7),C(e.isActive?"D\xE9sactiver":"Activer")}}function me(a,t){if(a&1&&(n(0,"div",17),_(1,pe,28,18,"article",18),i()),a&2){let e=d();c(),s("ngForOf",e.list())}}function ge(a,t){a&1&&(n(0,"p",37),l(1,"Aucun produit."),i())}function ue(a,t){if(a&1){let e=v();n(0,"div",38),g("click",function(){p(e);let o=d();return m(o.closeModal())}),i()}}function fe(a,t){if(a&1&&(n(0,"option",15),l(1),i()),a&2){let e=t.$implicit;s("value",e._id),c(),C(e.name)}}function _e(a,t){if(a&1&&(n(0,"option",15),l(1),i()),a&2){let e=t.$implicit;s("value",e._id),c(),C(e.name)}}function xe(a,t){if(a&1&&(n(0,"option",15),l(1),i()),a&2){let e=t.$implicit;s("value",e._id),c(),C(e.name)}}function ve(a,t){a&1&&(n(0,"small",28),l(1," Aucune sous-cat\xE9gorie active pour cette cat\xE9gorie. "),i())}function be(a,t){if(a&1){let e=v();n(0,"div",74)(1,"button",78),g("click",function(){p(e);let o=d(3);return m(o.clearCover())}),l(2,"Retirer"),i()()}}function he(a,t){if(a&1){let e=v();n(0,"label",75),l(1," Ajouter "),n(2,"input",79),g("change",function(o){p(e);let u=d(3);return m(u.onPickCover(o))}),i()()}}function Ce(a,t){if(a&1&&(n(0,"div",80),x(1,"img",81),i()),a&2){let e=d(3);c(),s("src",e.coverPreview(),w)}}function we(a,t){if(a&1){let e=v();n(0,"div",84),x(1,"img",85),n(2,"button",86),g("click",function(){let o=p(e).index,u=d(4);return m(u.removeGalleryAt(o))}),l(3,"\xD7"),i()()}if(a&2){let e=t.$implicit;c(),s("src",e,w)}}function Pe(a,t){if(a&1&&(n(0,"div",82),_(1,we,4,1,"div",83),i()),a&2){let e=d(3);c(),s("ngForOf",e.galleryPreviews())}}function ye(a,t){if(a&1){let e=v();n(0,"div",67)(1,"div",68)(2,"div",69)(3,"label"),l(4,"Image de couverture"),i(),_(5,be,3,0,"div",70),i(),n(6,"div",71),_(7,he,3,0,"label",72)(8,Ce,2,1,"div",73),i()(),n(9,"div",68)(10,"div",69)(11,"label"),l(12,"Galerie (multiples)"),i(),n(13,"div",74)(14,"label",75),l(15," Ajouter "),n(16,"input",76),g("change",function(o){p(e);let u=d(2);return m(u.onPickGallery(o))}),i()()()(),_(17,Pe,2,1,"div",77),i()()}if(a&2){let e=d(2);c(5),s("ngIf",e.coverPreview()),c(2),s("ngIf",!e.coverPreview()),c(),s("ngIf",e.coverPreview()),c(9),s("ngIf",e.galleryPreviews().length)}}function Me(a,t){if(a&1){let e=v();n(0,"div",39),g("click",function(){p(e);let o=d();return m(o.closeModal())}),n(1,"div",40),g("click",function(o){return p(e),m(o.stopPropagation())}),n(2,"div",41)(3,"h3"),l(4),i(),n(5,"button",42),g("click",function(){p(e);let o=d();return m(o.closeModal())}),l(6,"\xD7"),i()(),n(7,"div",43)(8,"form",44),g("ngSubmit",function(){p(e);let o=d();return m(o.save())}),n(9,"div",45)(10,"div",46)(11,"label"),l(12,"Nom *"),i(),x(13,"input",47),i(),n(14,"div",46)(15,"label"),l(16,"Slug *"),i(),x(17,"input",48),i()(),n(18,"div",45)(19,"div",46)(20,"label"),l(21,"Marque *"),i(),n(22,"select",49),g("change",function(o){p(e);let u=d();return m(u.onBrandChange(o))}),n(23,"option",50),l(24,"Choisir\u2026"),i(),_(25,fe,2,2,"option",9),i()(),n(26,"div",46)(27,"label"),l(28,"Cat\xE9gorie *"),i(),n(29,"select",51),g("change",function(o){p(e);let u=d();return m(u.onCategoryChange(o))}),n(30,"option",50),l(31,"Choisir\u2026"),i(),_(32,_e,2,2,"option",9),i()()(),n(33,"div",46)(34,"label"),l(35,"Sous-cat\xE9gorie *"),i(),n(36,"select",52)(37,"option",53),l(38),i(),_(39,xe,2,2,"option",9),i(),_(40,ve,2,0,"small",54),i(),n(41,"div",45)(42,"div",46)(43,"label"),l(44,"Prix *"),i(),x(45,"input",55),i(),n(46,"div",46)(47,"label"),l(48,"Ancien prix"),i(),x(49,"input",56),i()(),n(50,"div",45)(51,"div",46)(52,"label"),l(53,"Stock"),i(),x(54,"input",57),i(),n(55,"div",46)(56,"label"),l(57,"Devise"),i(),x(58,"input",58),i()(),n(59,"div",46)(60,"label"),l(61,"Tags (s\xE9par\xE9s par des virgules)"),i(),x(62,"input",59),i(),n(63,"div",46)(64,"label"),l(65,"Description"),i(),x(66,"textarea",60),i(),_(67,ye,18,4,"div",61),n(68,"div",62),x(69,"input",63),n(70,"label",64),l(71,"Produit actif"),i()(),n(72,"div",3)(73,"button",65),g("click",function(){p(e);let o=d();return m(o.closeModal())}),l(74,"Annuler"),i(),n(75,"button",66),l(76,"Enregistrer"),i()()()()()()}if(a&2){let e=d();c(4),C(e.editing()?"Modifier le produit":"Ajouter un produit"),c(4),s("formGroup",e.f),c(17),s("ngForOf",e.brands()),c(4),s("disabled",!e.f.value.brand),c(3),s("ngForOf",e.categories()),c(4),s("disabled",!e.subOptions().length),c(2),M(" ",e.subOptions().length?"Choisir\u2026":"Choisir une cat\xE9gorie d\u2019abord"," "),c(),s("ngForOf",e.subOptions()),c(),s("ngIf",e.selectedCatId()&&!e.subOptions().length),c(27),s("ngIf",!e.editing()),c(8),s("disabled",e.f.invalid||e.saving())}}function ke(a,t){if(a&1){let e=v();n(0,"div",38),g("click",function(){p(e);let o=d();return m(o.closeReplace())}),i()}}function Oe(a,t){if(a&1){let e=v();n(0,"button",90),g("click",function(){p(e);let o=d(2);return m(o.resetCoverReplace())}),l(1,"Annuler"),i()}}function Se(a,t){if(a&1&&(n(0,"div",80),x(1,"img",91),n(2,"span",92),l(3,"actuelle"),i()()),a&2){let e=d(2);c(),s("src",e.getUrl(e.editing().imageUrl),w)}}function Ee(a,t){if(a&1&&(n(0,"div",80),x(1,"img",93),n(2,"span",92),l(3,"nouvelle"),i()()),a&2){let e=d(2);c(),s("src",e.coverReplacePreview(),w)}}function Ae(a,t){if(a&1){let e=v();n(0,"button",90),g("click",function(){p(e);let o=d(2);return o.galleryReplace.set([]),o.galleryReplacePreviews.set([]),m(o.galleryChanged.set(!1))}),l(1,"Annuler"),i()}}function Ve(a,t){if(a&1&&(n(0,"div",84),x(1,"img",94),n(2,"span",92),l(3,"actuelle"),i()()),a&2){let e=t.$implicit,r=d(3);c(),s("src",r.getUrl(e),w)}}function Ie(a,t){if(a&1&&(n(0,"div",82),_(1,Ve,4,1,"div",83),i()),a&2){let e=d(2);c(),s("ngForOf",e.editing().gallery)}}function Te(a,t){if(a&1){let e=v();n(0,"div",84),x(1,"img",95),n(2,"button",86),g("click",function(){let o=p(e).index,u=d(3);return m(u.removeNewGalleryAt(o))}),l(3,"\xD7"),i(),n(4,"span",92),l(5,"nouvelle"),i()()}if(a&2){let e=t.$implicit;c(),s("src",e,w)}}function Re(a,t){if(a&1&&(n(0,"div",82),_(1,Te,6,1,"div",83),i()),a&2){let e=d(2);c(),s("ngForOf",e.galleryReplacePreviews())}}function Fe(a,t){if(a&1){let e=v();n(0,"div",39),g("click",function(){p(e);let o=d();return m(o.closeReplace())}),n(1,"div",40),g("click",function(o){return p(e),m(o.stopPropagation())}),n(2,"div",41)(3,"h3"),l(4,"Remplacer les fichiers"),i(),n(5,"button",42),g("click",function(){p(e);let o=d();return m(o.closeReplace())}),l(6,"\xD7"),i()(),n(7,"div",43)(8,"form",87),g("ngSubmit",function(){p(e);let o=d();return m(o.saveReplace())}),n(9,"div",68)(10,"div",69)(11,"label"),l(12,"Cover (remplacement total)"),i(),n(13,"div",74)(14,"label",75),l(15," Choisir fichier "),n(16,"input",79),g("change",function(o){p(e);let u=d();return m(u.onPickCoverReplace(o))}),i()(),_(17,Oe,2,0,"button",88),i()(),n(18,"div",71),_(19,Se,4,1,"div",73)(20,Ee,4,1,"div",73),i()(),n(21,"div",68)(22,"div",69)(23,"label"),l(24,"Galerie (remplacement total)"),i(),n(25,"div",74)(26,"label",75),l(27," Choisir fichiers "),n(28,"input",76),g("change",function(o){p(e);let u=d();return m(u.onPickGalleryReplace(o))}),i()(),_(29,Ae,2,0,"button",88),i()(),_(30,Ie,2,1,"div",77)(31,Re,2,1,"div",77),i(),n(32,"div",3)(33,"button",65),g("click",function(){p(e);let o=d();return m(o.closeReplace())}),l(34,"Annuler"),i(),n(35,"button",89),l(36,"Remplacer"),i()()()()()()}if(a&2){let e,r,o=d();c(17),s("ngIf",o.coverChanged()),c(2),s("ngIf",((e=o.editing())==null?null:e.imageUrl)&&!o.coverChanged()),c(),s("ngIf",o.coverChanged()&&o.coverReplacePreview()),c(9),s("ngIf",o.galleryChanged()),c(),s("ngIf",((r=o.editing())==null||r.gallery==null?null:r.gallery.length)&&!o.galleryChanged()),c(),s("ngIf",o.galleryChanged()&&o.galleryReplacePreviews().length)}}var ae=class a{api=y(G);catsApi=y(j);fb=y(ne);subsApi=y(D);brandApi=y(oe);loading=f(!0);raw=f([]);categories=f([]);total=f(0);selectedCatId=f("");subOptions=f([]);q=f("");status=f("all");catId=f("all");modalOpen=f(!1);editing=f(null);replaceOpen=f(!1);f=this.fb.group({name:["",[b.required,b.minLength(2)]],slug:["",[b.required,b.pattern(/^[a-z0-9-]+$/)]],category:["",[b.required]],subCategory:["",[b.required]],brand:["",b.required],description:[""],price:[null,[b.required,b.min(0)]],oldPrice:[null],stock:[0,[b.min(0)]],sku:[""],isActive:[!0],currency:["TND"],tags:[""]});brands=f([]);coverFile=f(null);coverPreview=f(null);galleryFiles=f([]);galleryPreviews=f([]);coverChanged=f(!1);galleryChanged=f(!1);coverReplace=f(null);coverReplacePreview=f(null);galleryReplace=f([]);galleryReplacePreviews=f([]);saving=f(!1);list=F(()=>{let t=this.q().trim().toLowerCase(),e=this.status(),r=this.catId();return this.raw().filter(o=>{let u=!t||o.name.toLowerCase().includes(t)||o.slug.toLowerCase().includes(t)||(o.description||"").toLowerCase().includes(t)||(o.sku||"").toLowerCase().includes(t),P=e==="all"||e==="active"&&o.isActive||e==="inactive"&&!o.isActive,le=r==="all"||o.category===r;return u&&P&&le})});ngOnInit(){return h(this,null,function*(){yield Promise.all([this.fetch(),this.loadBrands(),this.fetchCategories()]);let t=this.f.get("category").value;t&&(this.selectedCatId.set(t),yield this.loadSubcategories(t),this.f.get("subCategory").value||this.f.get("subCategory").setValue(""))})}fetch(){return h(this,null,function*(){this.loading.set(!0);try{let t=yield this.api.list().toPromise();console.log("res",t),this.raw.set(t?.items||[]),this.total.set(t?.total||0)}finally{this.loading.set(!1)}})}loadBrands(){this.brandApi.list().subscribe(t=>this.brands.set(t||[]))}fetchCategories(){return h(this,null,function*(){let t=yield this.catsApi.list().toPromise();this.categories.set(t||[])})}hydrateEditSubcategories(t){return h(this,null,function*(){t?.category&&(this.selectedCatId.set(t.category),yield this.loadSubcategories(t.category),t.subCategory&&this.f.get("subCategory").setValue(t.subCategory))})}loadSubcategories(t){return h(this,null,function*(){try{let e=yield O(this.subsApi.listByCategory(t));this.subOptions.set((e||[]).filter(r=>r.isActive))}catch{this.subOptions.set([])}})}onCategoryChange(t){let r=t.target.value;this.selectedCatId.set(r||""),this.f.get("subCategory").setValue(""),this.subOptions.set([]),r&&this.loadSubcategories(r)}onBrandChange(t){let e=t.target.value;this.f.patchValue({category:"",subCategory:""}),this.selectedCatId?.set?.(""),this.subOptions.set([])}openCreate(){this.editing.set(null),this.f.reset({name:"",slug:"",category:"",subCategory:"",description:"",price:null,oldPrice:null,stock:0,sku:"",isActive:!0,currency:"TND",tags:""}),this.coverFile.set(null),this.coverPreview.set(null),this.galleryFiles.set([]),this.galleryPreviews.set([]),this.modalOpen.set(!0),document.body.classList.add("modal-open")}openEdit(t){console.log("p",t),this.editing.set(t),this.f.reset({name:t.name,slug:t.slug,category:t.category,subCategory:t.subCategory,brand:t.brand,description:t.description||"",price:t.price,oldPrice:t.oldPrice??null,stock:t.stock??0,sku:t.sku||"",isActive:t.isActive,currency:t.currency||"TND",tags:(t.tags||[]).join(", ")}),this.coverFile.set(null),this.coverPreview.set(t.imageUrl?k(t.imageUrl):null),this.galleryFiles.set([]),this.galleryPreviews.set([]),this.modalOpen.set(!0),document.body.classList.add("modal-open")}closeModal(){this.modalOpen.set(!1),document.body.classList.remove("modal-open")}openReplace(t){this.editing.set(t),this.coverChanged.set(!1),this.galleryChanged.set(!1),this.coverReplace.set(null),this.coverReplacePreview.set(null),this.galleryReplace.set([]),this.galleryReplacePreviews.set([]),this.replaceOpen.set(!0),document.body.classList.add("modal-open")}closeReplace(){this.replaceOpen.set(!1),document.body.classList.remove("modal-open")}onPickCover(t){let e=t.target.files?.[0]||null;this.coverFile.set(e),this.coverPreview.set(e?URL.createObjectURL(e):null)}clearCover(){this.coverFile.set(null),this.coverPreview.set(null)}onPickGallery(t){let e=Array.from(t.target.files||[]);if(!e.length)return;let r=[...this.galleryFiles(),...e],o=[...this.galleryPreviews(),...e.map(u=>URL.createObjectURL(u))];this.galleryFiles.set(r),this.galleryPreviews.set(o),t.target.value=""}removeGalleryAt(t){let e=[...this.galleryFiles()],r=[...this.galleryPreviews()];e.splice(t,1),r.splice(t,1),this.galleryFiles.set(e),this.galleryPreviews.set(r)}onPickCoverReplace(t){let e=t.target.files?.[0]||null;this.coverReplace.set(e),this.coverReplacePreview.set(e?URL.createObjectURL(e):null),this.coverChanged.set(!!e)}resetCoverReplace(){this.coverReplace.set(null),this.coverReplacePreview.set(null),this.coverChanged.set(!1)}onPickGalleryReplace(t){let e=Array.from(t.target.files||[]);this.galleryReplace.set(e),this.galleryReplacePreviews.set(e.map(r=>URL.createObjectURL(r))),this.galleryChanged.set(e.length>0)}removeNewGalleryAt(t){let e=[...this.galleryReplace()],r=[...this.galleryReplacePreviews()];e.splice(t,1),r.splice(t,1),this.galleryReplace.set(e),this.galleryReplacePreviews.set(r),this.galleryChanged.set(e.length>0)}save(){return h(this,null,function*(){if(this.f.invalid){this.f.markAllAsTouched(),this.saving.set(!1);return}let t=this.f.value,e=new FormData;e.append("name",t.name),e.append("slug",t.slug),e.append("category",t.category),e.append("subCategory",t.subCategory),e.append("brand",t.brand),e.append("description",t.description||""),t.price!==null&&t.price!==void 0&&e.append("price",String(t.price)),t.oldPrice!==null&&t.oldPrice!==void 0&&e.append("oldPrice",String(t.oldPrice)),e.append("stock",String(t.stock??0)),e.append("sku",t.sku||""),e.append("isActive",String(!!t.isActive)),e.append("currency",t.currency||"TND"),t.tags&&e.append("tags",t.tags),this.editing()||(this.coverFile()&&e.append("image",this.coverFile()),this.galleryFiles().forEach(r=>e.append("gallery",r)));try{if(this.editing()){let r=yield this.api.update(this.editing()._id,e).toPromise();r&&this.raw.set(this.raw().map(o=>o._id===r._id?r:o))}else{let r=yield this.api.create(e).toPromise();r&&this.raw.set([r,...this.raw()])}this.closeModal()}catch(r){console.error(r)}finally{this.saving.set(!1)}})}saveReplace(){return h(this,null,function*(){let t=this.editing();if(!t)return;if(!this.coverChanged()&&!this.galleryChanged()){this.closeReplace();return}let e=new FormData;this.coverChanged()&&this.coverReplace()&&(e.append("replaceCover","true"),e.append("image",this.coverReplace())),this.galleryChanged()&&(e.append("replaceGallery","true"),this.galleryReplace().forEach(r=>e.append("gallery",r)));try{let r=yield this.api.replace(t._id,e).toPromise();r&&this.raw.set(this.raw().map(o=>o._id===r._id?r:o)),this.closeReplace()}catch(r){console.error(r)}})}toggle(t){return h(this,null,function*(){try{let e=yield this.api.toggle(t._id).toPromise();e&&this.raw.set(this.raw().map(r=>r._id===t._id?e:r))}catch(e){console.error(e)}})}remove(t){return h(this,null,function*(){if(confirm(`Supprimer "${t.name}" ?`))try{yield this.api.remove(t._id).toPromise(),this.raw.set(this.raw().filter(e=>e._id!==t._id))}catch(e){console.error(e)}})}getUrl=k;static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-admin-products"]],decls:27,vars:11,consts:[["empty",""],[1,"admin-prods"],[1,"head"],[1,"actions"],["type","search","placeholder","Rechercher (nom / slug / sku / desc)\u2026",1,"search",3,"ngModelChange","ngModel"],[1,"select",3,"ngModelChange","ngModel"],["value","all"],["value","active"],["value","inactive"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","primary",3,"click"],["class","loading",4,"ngIf"],["class","grid",4,"ngIf","ngIfElse"],["class","backdrop",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true",3,"click",4,"ngIf"],[3,"value"],[1,"loading"],[1,"grid"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"media"],[3,"src","alt"],[1,"info"],[1,"top"],[1,"badge"],[1,"meta-line"],[1,"price"],["class","sku",4,"ngIf"],[1,"muted"],[1,"meta"],[1,"slug"],[1,"row"],[1,"btn",3,"click"],[1,"btn","ghost",3,"click"],[1,"btn","warn",3,"click"],[1,"btn","danger",3,"click"],[1,"sku"],[1,"empty","muted"],[1,"backdrop",3,"click"],["role","dialog","aria-modal","true",1,"modal",3,"click"],["role","document",1,"panel",3,"click"],[1,"panel-head"],["type","button",1,"x",3,"click"],[1,"panel-body"],[1,"form",3,"ngSubmit","formGroup"],[1,"row-2"],[1,"field"],["formControlName","name","placeholder","Ex: HP ProBook 450 G9"],["formControlName","slug","placeholder","ex: hp-probook-450-g9"],["formControlName","brand",3,"change"],["value","","disabled","","selected",""],["formControlName","category",3,"change","disabled"],["formControlName","subCategory",3,"disabled"],["value","","disabled",""],["class","muted",4,"ngIf"],["type","number","step","0.001","formControlName","price","placeholder","0.000"],["type","number","step","0.001","formControlName","oldPrice","placeholder","0.000"],["type","number","formControlName","stock","placeholder","0"],["formControlName","currency","placeholder","TND"],["formControlName","tags","placeholder","laptop, i7, 16go, ssd"],["formControlName","description","rows","3","placeholder","Description courte\u2026"],["class","uploads",4,"ngIf"],[1,"field","switch"],["id","active","type","checkbox","formControlName","isActive"],["for","active"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","primary",3,"disabled"],[1,"uploads"],[1,"u-block"],[1,"u-head"],["class","u-actions",4,"ngIf"],[1,"u-body"],["class","btn ghost sm",4,"ngIf"],["class","preview",4,"ngIf"],[1,"u-actions"],[1,"btn","ghost","sm"],["type","file","accept","image/*","multiple","","hidden","",3,"change"],["class","thumbs",4,"ngIf"],["type","button",1,"btn","ghost","sm",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],[1,"preview"],["alt","cover preview",3,"src"],[1,"thumbs"],["class","thumb",4,"ngFor","ngForOf"],[1,"thumb"],["alt","gallery preview",3,"src"],["type","button",1,"t-remove",3,"click"],[1,"form",3,"ngSubmit"],["class","btn warn sm","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","primary"],["type","button",1,"btn","warn","sm",3,"click"],["alt","cover old",3,"src"],[1,"tag"],["alt","cover new",3,"src"],["alt","old gall",3,"src"],["alt","new gall",3,"src"]],template:function(e,r){if(e&1){let o=v();n(0,"section",1)(1,"header",2)(2,"h2"),l(3,"Produits"),i(),n(4,"div",3)(5,"input",4),g("ngModelChange",function(P){return p(o),m(r.q.set(P))}),i(),n(6,"select",5),g("ngModelChange",function(P){return p(o),m(r.status.set(P))}),n(7,"option",6),l(8,"Tous"),i(),n(9,"option",7),l(10,"Actifs"),i(),n(11,"option",8),l(12,"Inactifs"),i()(),n(13,"select",5),g("ngModelChange",function(P){return p(o),m(r.catId.set(P))}),n(14,"option",6),l(15,"Toutes cat\xE9gories"),i(),_(16,ce,2,2,"option",9),i(),n(17,"button",10),g("click",function(){return p(o),m(r.openCreate())}),l(18,"+ Ajouter"),i()()(),_(19,se,2,0,"div",11)(20,me,2,1,"div",12)(21,ge,2,0,"ng-template",null,0,R),i(),_(23,ue,1,0,"div",13)(24,Me,77,11,"div",14)(25,ke,1,0,"div",13)(26,Fe,37,6,"div",14)}if(e&2){let o=V(22);c(5),s("ngModel",r.q()),c(),s("ngModel",r.status()),c(7),s("ngModel",r.catId()),c(3),s("ngForOf",r.categories()),c(3),s("ngIf",r.loading()),c(),s("ngIf",!r.loading()&&r.list().length)("ngIfElse",o),c(3),s("ngIf",r.modalOpen()),c(),s("ngIf",r.modalOpen()),c(),s("ngIf",r.replaceOpen()),c(),s("ngIf",r.replaceOpen())}},dependencies:[U,N,z,L,ie,Z,ee,te,B,J,$,X,q,H,K,Y,re,Q,W],styles:[`.admin-prods[_ngcontent-%COMP%]{display:grid;gap:18px;min-height:100%}.head[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;justify-content:space-between;gap:12px;width:100%;padding:8px 0}.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:800;letter-spacing:-.025em;background:linear-gradient(135deg,#e6eaf2,#22d3ee);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;white-space:nowrap;flex-shrink:0}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:nowrap;justify-content:flex-end;flex:1;min-width:0}.actions[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{height:40px;min-width:260px;padding:0 12px 0 38px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21 21l-4.35-4.35m1.35-5.65a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z' stroke='%239aa3b2' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E") no-repeat 12px center,#ffffff0a;color:#e6eaf2;font-size:14px;transition:all .2s ease;flex-shrink:0}.actions[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]:focus{border-color:#22d3ee;box-shadow:0 0 0 3px #22d3ee26,inset 0 0 0 1px #ffffff1a;background-color:#ffffff0b;transform:translateY(-1px)}.select[_ngcontent-%COMP%]{height:44px;min-width:min(160px,100%);padding:0 44px 0 12px;border-radius:16px;border:1.5px solid rgba(255,255,255,.12);background:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5' stroke='%239aa3b2' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E") no-repeat right 12px center / 16px,linear-gradient(135deg,#ffffff0a,#ffffff05);color:#e6eaf2;font-size:.875rem;transition:all .2s cubic-bezier(.4,0,.2,1);backdrop-filter:blur(8px);cursor:pointer}.select[_ngcontent-%COMP%]:focus{border-color:#22d3ee;box-shadow:0 0 0 3px #22d3ee26;transform:translateY(-1px)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:4px;height:44px;padding:0 16px;border-radius:16px;border:1.5px solid transparent;background:linear-gradient(135deg,#ffffff14,#ffffff0a);color:#e6eaf2;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);backdrop-filter:blur(8px);position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.1),transparent);opacity:0;transition:all .2s cubic-bezier(.4,0,.2,1)}.btn[_ngcontent-%COMP%]:hover:before{opacity:1}.btn[_ngcontent-%COMP%]:hover{border-color:#fff3;transform:translateY(-2px);box-shadow:0 2px 8px #00000026}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);border-color:transparent;color:#fff;box-shadow:0 4px 12px #4f46e54d}.btn.warn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#fbbf24);border-color:transparent;color:#0b0f1a}.btn.danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#f87171);border-color:transparent;color:#fff}.btn.ghost[_ngcontent-%COMP%]{background:#ffffff0f;border-color:#ffffff1f}.btn.sm[_ngcontent-%COMP%]{height:36px;padding:0 12px;font-size:.8125rem;border-radius:12px}.grid[_ngcontent-%COMP%]{display:grid;gap:18px;grid-template-columns:repeat(auto-fill,minmax(min(100%,300px),1fr))}.card[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-rows:auto 1fr auto;gap:12px;padding:16px;border-radius:18px;background:radial-gradient(120% 120% at -10% -10%,rgba(34,211,238,.1),transparent 50%),linear-gradient(180deg,#ffffff0d,#ffffff08);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 26px #00000040;transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.02),transparent);opacity:0;transition:all .3s cubic-bezier(.4,0,.2,1)}.card[_ngcontent-%COMP%]:hover:before{opacity:1}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 28px 70px #00000073;border-color:#ffffff26}.media[_ngcontent-%COMP%]{border-radius:14px;overflow:hidden;background:#0e1525;box-shadow:inset 0 0 0 1px #ffffff0f}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;display:block;transform:scale(1);transition:transform .25s ease}.card[_ngcontent-%COMP%]:hover   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.03)}.info[_ngcontent-%COMP%], .top[_ngcontent-%COMP%], .meta[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{min-width:0}.info[_ngcontent-%COMP%]{display:grid;gap:8px;min-width:0}.top[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:8px;min-width:0}.top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:800;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;word-break:break-word}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:999px;font-size:.75rem;font-weight:700;background:#374151;color:#e6eaf2;box-shadow:inset 0 -1px #ffffff1a;flex-shrink:0}.badge.on[_ngcontent-%COMP%]{background:#10b981f2;color:#07131a;box-shadow:0 0 0 3px #10b9812e,inset 0 -1px #ffffff40}.badge.off[_ngcontent-%COMP%]{background:#ef4444;color:#fff;box-shadow:0 0 0 3px #ef44442e,inset 0 -1px #ffffff40}.meta-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:#e6eaf2;font-size:.9rem;min-width:0}.price[_ngcontent-%COMP%]{font-weight:800;letter-spacing:-.01em;background:linear-gradient(135deg,#e6eaf2,#22d3ee);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.sku[_ngcontent-%COMP%]{color:#a7b0c2;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.muted[_ngcontent-%COMP%]{color:#9aa3b2;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;white-space:normal;word-break:break-word;margin:0}.meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;font-size:.8125rem;color:#a7b0c2;overflow:hidden}.meta[_ngcontent-%COMP%]   .slug[_ngcontent-%COMP%]{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;padding:4px 8px;border-radius:12px;background:#ffffff0a;border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(4px)}.row[_ngcontent-%COMP%]{display:grid;gap:6px;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));margin-top:8px}.row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:36px;padding:0 12px;border-radius:12px;font-weight:600;width:100%;min-width:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;backdrop-filter:blur(8px)}.backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;backdrop-filter:blur(8px);z-index:900;animation:_ngcontent-%COMP%_fadeIn .2s cubic-bezier(.4,0,.2,1) forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;display:grid;place-items:center;z-index:901;padding:12px}.panel[_ngcontent-%COMP%]{width:100%;max-width:min(720px,95vw);max-height:min(90vh,800px);display:grid;grid-template-rows:auto 1fr;background:#121826f5;backdrop-filter:blur(20px) saturate(180%);border:1px solid rgba(255,255,255,.12);border-radius:18px;box-shadow:0 28px 70px #00000073;animation:_ngcontent-%COMP%_modalSlideIn .3s cubic-bezier(.4,0,.2,1) forwards}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}.panel-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}.panel-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:800}.panel-head[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{background:none;border:none;color:#9aa3b2;font-size:1.5rem;cursor:pointer;border-radius:12px;padding:4px;transition:all .2s cubic-bezier(.4,0,.2,1);width:36px;height:36px;display:grid;place-items:center}.panel-head[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]:hover{color:#22d3ee;background:#ffffff14;transform:rotate(90deg)}.panel-body[_ngcontent-%COMP%]{overflow:auto;padding:16px}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0a;border-radius:12px}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:12px}.panel-body[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.2) transparent}.form[_ngcontent-%COMP%]{display:grid;gap:16px}.field[_ngcontent-%COMP%]{display:grid;gap:4px}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#e6eaf2}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 16px;border-radius:16px;border:1.5px solid rgba(255,255,255,.12);background:#0e1525;color:#e6eaf2;font-size:.875rem;transition:all .2s cubic-bezier(.4,0,.2,1);outline:none}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#22d3ee;box-shadow:0 0 0 3px #22d3ee26,inset 0 0 0 1px #ffffff1a;transform:translateY(-1px)}.switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.row-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}.uploads[_ngcontent-%COMP%]{display:grid;gap:16px}.u-block[_ngcontent-%COMP%]{background:#ffffff08;border:1.5px solid rgba(255,255,255,.08);border-radius:16px;padding:16px;transition:all .2s cubic-bezier(.4,0,.2,1)}.u-block[_ngcontent-%COMP%]:hover{border-color:#ffffff1f}.u-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.u-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.u-body[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-start}.preview[_ngcontent-%COMP%]{position:relative;border-radius:16px;overflow:hidden;box-shadow:0 2px 8px #00000026;max-width:100%}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:260px;object-fit:cover;border-radius:16px;border:1.5px solid rgba(255,255,255,.08);background:#0e1525}.tag[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;background:#000c;color:#fff;padding:2px 8px;border-radius:999px;font-size:.75rem;font-weight:600;backdrop-filter:blur(8px)}.thumbs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.thumb[_ngcontent-%COMP%]{position:relative;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #00000026}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:94px;object-fit:cover;display:block;border:1px solid rgba(255,255,255,.08);border-radius:12px}.t-remove[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;width:24px;height:24px;line-height:20px;text-align:center;border-radius:999px;border:1px solid rgba(255,255,255,.2);background:#000000b3;color:#fff;cursor:pointer;font-weight:700}.loading[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{color:#9aa3b2;padding:16px;text-align:center;font-size:1rem}.empty[_ngcontent-%COMP%]{background:#ffffff05;border:1.5px dashed rgba(255,255,255,.08);border-radius:16px;padding:18px}@media (max-width: 768px){.head[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions[_ngcontent-%COMP%]{justify-content:stretch}.actions[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%], .select[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{flex:1;min-width:auto}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.card[_ngcontent-%COMP%]{padding:12px}.row[_ngcontent-%COMP%]{grid-template-columns:1fr}.panel[_ngcontent-%COMP%]{max-width:95vw;margin:12px}.row-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.u-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.u-actions[_ngcontent-%COMP%]{align-self:stretch;justify-content:flex-end}.media[_ngcontent-%COMP%]{aspect-ratio:16 / 10}}@media (max-width: 480px){.admin-prods[_ngcontent-%COMP%]{gap:12px}.panel-body[_ngcontent-%COMP%]{padding:12px}.actions[_ngcontent-%COMP%]{flex-direction:column}.top[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.badge[_ngcontent-%COMP%]{align-self:flex-start}}.skel[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffffff0d 25%,#ffffff1f,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s ease-in-out infinite;border-radius:12px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}`]})};export{ae as AdminProductsComponent};
