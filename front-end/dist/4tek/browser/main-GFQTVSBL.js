import{a as ae}from"./chunk-VI4EALIG.js";import{a as kn}from"./chunk-SBTREMVH.js";import{a as be}from"./chunk-T572B6R4.js";import{a as bn,b as Xe,c as he,d as Je,e as te,f as Z,h as xn}from"./chunk-RIE7MEC4.js";import{a as Ee}from"./chunk-DB5BZNX6.js";import{a as _n,c as ne,d as B,e as ie,f as et,g as vn,h as fe,i as tt,j as Te,k as Cn,l as wn,m as On,q as Mn,r as Ve,s as yn,t as Pn,u as nt,v as se,w as Ie}from"./chunk-BFCV6PZZ.js";import{a as Se}from"./chunk-PIKNBSXP.js";import{b as W}from"./chunk-OQWVLEVP.js";import{a as gn,b as mn,c as hn,d as fn}from"./chunk-HWLEWUSP.js";import{$a as m,$b as Pe,A as Oe,Aa as F,Ab as ye,B as Qt,Bb as Re,Ca as qe,Cb as ge,D as $t,Da as Be,Ea as l,Eb as ze,G as Ae,Ha as Ue,Ia as j,Ib as sn,Jb as ln,Ma as M,N as Wt,Na as nn,Oa as Ge,P as Lt,Pa as Nt,Q as Dt,Qa as f,Rb as Ke,S as Kt,Sb as A,T as pe,Tb as T,U as Zt,Ub as cn,Va as re,Vb as dn,W as Xt,Wa as d,Wb as pn,Xa as Ft,Ya as S,Yb as Ze,Z as w,Za as r,Zb as un,_a as a,_b as me,a as Gt,ab as R,ac as ke,b as Yt,bb as z,ca as Jt,cb as P,da as x,db as h,e as Y,ea as _,eb as p,fa as L,ga as ee,gb as on,hb as Q,ib as q,jb as G,k as Ce,kb as ue,lb as c,ma as D,mb as y,na as en,nb as E,o as Ht,ob as Me,pb as Ye,qa as de,qb as Qe,ra as O,rb as $e,sb as rn,tb as At,ub as K,vb as We,wb as an,xb as H,yb as we,za as tn,zb as X}from"./chunk-72X2LRK3.js";var it=class i{year=new Date().getFullYear();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-footer"]],decls:20,vars:1,consts:[[1,"footer"],[1,"footer-container"],[1,"footer-nav"],["href","https://facebook.com/tonpage","target","_blank","rel","noopener","aria-label","Facebook","title","Facebook"],["viewBox","0 0 24 24","aria-hidden","true",1,"icon"],["fill","#1877F2","d","M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.2 3-3.2.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.4 3h-1.8v7A10 10 0 0 0 22 12Z"],["href","https://instagram.com/tonpage","target","_blank","rel","noopener","aria-label","Instagram","title","Instagram"],["id","instagramGradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%","stop-color","#f58529"],["offset","30%","stop-color","#dd2a7b"],["offset","60%","stop-color","#8134af"],["offset","100%","stop-color","#515bd4"],["fill","url(#instagramGradient)","d","M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7Zm10 2c1.7 0 3 1.3 3 3v10c0 1.7-1.3 3-3 3H7c-1.7 0-3-1.3-3-3V7c0-1.7 1.3-3 3-3h10Zm-5 3a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm4.8-.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z"],["href","https://tiktok.com/@tonpage","target","_blank","rel","noopener","aria-label","TikTok","title","TikTok"],["viewBox","0 0 48 48","aria-hidden","true",1,"icon"],["fill","#ffffff","d",`M41,17.4c-3,0-6-1-8.5-2.8v13.3c0,7.7-6.3,14-14,14S4.5,35.6,4.5,28c0-7.1,5.3-13,12.2-13.9v7.5
            c-2.9,0.7-5,3.3-5,6.4c0,3.6,2.9,6.5,6.5,6.5s6.5-2.9,6.5-6.5V7h7c0,0,0,0,0,0c0,2.7,1.1,5.3,3,7.2
            C36.2,15.9,38.5,17.1,41,17.4z`]],template:function(e,t){e&1&&(r(0,"footer",0)(1,"div",1)(2,"p"),c(3),a(),r(4,"nav",2)(5,"a",3),L(),r(6,"svg",4),m(7,"path",5),a()(),ee(),r(8,"a",6),L(),r(9,"svg",4)(10,"defs")(11,"linearGradient",7),m(12,"stop",8)(13,"stop",9)(14,"stop",10)(15,"stop",11),a()(),m(16,"path",12),a()(),ee(),r(17,"a",13),L(),r(18,"svg",14),m(19,"path",15),a()()()()()),e&2&&(l(3),E("\xA9 ",t.year," 4tek"))},styles:[".footer[_ngcontent-%COMP%]{margin-top:48px;padding:24px 16px;background:#121826d9;-webkit-backdrop-filter:blur(14px) saturate(160%);backdrop-filter:blur(14px) saturate(160%);border-top:1px solid rgba(255,255,255,.08);color:var(--muted);font-size:14px;border-radius:20px}.footer-container[_ngcontent-%COMP%]{max-width:var(--container);margin:0 auto;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:12px}.footer-nav[_ngcontent-%COMP%]{display:flex;gap:20px}.icon[_ngcontent-%COMP%]{width:26px;height:26px;display:block;transition:transform .2s ease}.footer-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{transform:scale(1.1)}@media (max-width: 600px){.footer-container[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.footer-nav[_ngcontent-%COMP%]{justify-content:center}}"]})};var ot=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-brand"]],decls:2,vars:0,consts:[["routerLink","/","aria-label","Accueil 4tek",1,"brand"],["src","/assets/png/4TEK-Logo-Design-No-Background.png","alt","4tek",1,"brand-logo"]],template:function(e,t){e&1&&(r(0,"a",0),m(1,"img",1),a())},dependencies:[Z],styles:[".brand[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;margin-right:120px}.brand-logo[_ngcontent-%COMP%]{height:40px;width:auto;transition:transform .25s ease,filter .25s ease}.brand[_ngcontent-%COMP%]:hover   .brand-logo[_ngcontent-%COMP%]{transform:scale(1.05);filter:drop-shadow(0 2px 6px rgba(34,211,238,.35))}@media (max-width: 768px){.brand-logo[_ngcontent-%COMP%]{height:20px}}"]})};var Un=i=>["/categories",i],Rn=(i,n)=>["/categories",i,"sub",n],zn=i=>["/produits",i];function jn(i,n){if(i&1){let e=P();r(0,"li")(1,"button",21),h("mouseenter",function(){let o=x(e).$implicit,s=p(3);return _(s.onEnterSub(o))})("focus",function(){let o=x(e).$implicit,s=p(3);return _(s.onEnterSub(o))}),c(2),r(3,"span",22),c(4,"\u203A"),a()()()}if(i&2){let e=n.$implicit,t=p(3);l(),S("current",t.activeSubId()===e._id),l(),E(" ",e.name," ")}}function qn(i,n){if(i&1&&(r(0,"li")(1,"a",29),c(2),a()()),i&2){let e=n.$implicit;l(),d("routerLink",K(2,zn,e._id)),l(),y(e.name)}}function Gn(i,n){if(i&1&&(r(0,"div",25)(1,"h3",26),c(2),a(),r(3,"ul",27),f(4,qn,3,4,"li",6),r(5,"li",28)(6,"a",29),c(7," Tous les articles \u2192 "),a()()()()),i&2){let e=p(4);l(2),y(e.getSubName(e.activeSubId())),l(2),d("ngForOf",e.prodsOf(e.activeSubId()).slice(0,6)),l(2),d("routerLink",We(3,Rn,e.activeCatId(),e.activeSubId()))}}function Yn(i,n){if(i&1&&(r(0,"section",23),f(1,Gn,8,6,"div",24),a()),i&2){let e=p(3);l(),d("ngIf",e.prodsOf(e.activeSubId()).length>0)}}function Qn(i,n){if(i&1&&(r(0,"div",14)(1,"div",15)(2,"aside",16)(3,"div",17)(4,"div",18),c(5),a()(),r(6,"ul",19),f(7,jn,5,3,"li",6),a()(),f(8,Yn,2,1,"section",20),a()()),i&2){let e=p().$implicit,t=p();l(),S("has-right",t.prodsOf(t.activeSubId()).length>0),l(4),E("Tous les sous cat\xE9gorie ",e.name.toLowerCase(),""),l(2),d("ngForOf",t.subsOf(e._id)),l(),d("ngIf",t.activeSubId())}}function $n(i,n){if(i&1){let e=P();R(0),r(1,"div",7),h("mouseenter",function(){let o=x(e).$implicit,s=p();return _(s.onEnterCat(o))})("focusin",function(){let o=x(e).$implicit,s=p();return _(s.onEnterCat(o))})("mouseleave",function(){x(e);let o=p();return o.activeCatId.set(null),_(o.activeSubId.set(null))}),r(2,"a",8)(3,"span",3),m(4,"img",9),a(),r(5,"span",10),c(6),a(),L(),r(7,"svg",11),m(8,"path",12),a()(),f(9,Qn,9,5,"div",13),a(),z()}if(i&2){let e=n.$implicit,t=p();l(2),S("active",t.activeCatId()===e._id),d("routerLink",K(7,Un,e._id)),l(2),d("src",t.getUrl(e.iconUrl||e.imageUrl||(e.banners==null?null:e.banners[0]))||"/assets/placeholder.jpg",F)("alt",e.name),l(2),y(e.name),l(3),d("ngIf",t.activeCatId()===e._id)}}var rt=class i{catsApi=w(Se);subsApi=w(Ee);prodApi=w(ae);loading=O(!0);open=O(!1);categories=O([]);activeCatId=O(null);activeSubId=O(null);subCache=new Map;prodCache=new Map([]);ngOnInit(){return Y(this,null,function*(){try{this.loading.set(!0);let n=yield this.catsApi.list().toPromise();this.categories.set((n||[]).filter(e=>e.isActive))}finally{this.loading.set(!1)}})}getSubName(n){return this.subsOf(this.activeCatId()).find(t=>t._id===n)?.name||""}getOtherSubs(n,e){return this.subsOf(n).filter(t=>t._id!==e)}clearActive(){this.activeCatId.set(null),this.activeSubId.set(null)}onEnterCat(n){return Y(this,null,function*(){if(this.activeSubId.set(null),this.activeCatId.set(n._id),!this.subCache.has(n._id))try{let e=yield this.subsApi.listByCategory(n._id).toPromise();this.subCache.set(n._id,e||[]),console.log("subs",e)}catch{this.subCache.set(n._id,[])}this.subsOf(n._id).length||this.activeCatId.set(null)})}onEnterSub(n){return Y(this,null,function*(){if(this.activeSubId.set(n._id),!this.prodCache.has(n._id))try{let e=yield this.prodApi.listBySubcategory(n._id).toPromise();this.prodCache.set(n._id,e?.items||[])}catch{this.prodCache.set(n._id,[])}})}subsOf(n){return this.subCache.get(n)||[]}prodsOf(n){return console.log(this.prodCache.values()),this.prodCache.get(n)||[]}toggle(){this.open.update(n=>!n)}close(){this.open.set(!1),this.activeCatId.set(null),this.activeSubId.set(null)}getUrl=W;onWinScroll(){this.activeCatId.set(null),this.activeSubId.set(null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-nav-desktop"]],hostBindings:function(e,t){e&1&&h("scroll",function(){return t.onWinScroll()},!1,qe)},decls:8,vars:1,consts:[["aria-label","Cat\xE9gories",1,"subnav"],[1,"pill"],["routerLink","/",1,"tab-home"],[1,"ico"],["src","assets/png/home-3d.png","alt","Accueil"],[1,"menu-host"],[4,"ngFor","ngForOf"],[1,"cat-item",3,"mouseenter","focusin","mouseleave"],[1,"tab",3,"routerLink"],[3,"src","alt"],[1,"lbl"],["viewBox","0 0 24 24","width","14","height","14","aria-hidden","true",1,"chev"],["d","M7 10l5 5 5-5","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["class","panel",4,"ngIf"],[1,"panel"],[1,"panel-inner"],[1,"col","left"],[1,"category-header"],[1,"category-subtitle"],[1,"submenu"],["class","col right",4,"ngIf"],["type","button",1,"submenu-item",3,"mouseenter","focus"],[1,"arrow"],[1,"col","right"],["class","subcategory-section",4,"ngIf"],[1,"subcategory-section"],[1,"subcategory-title"],[1,"links"],[1,"all"],[3,"routerLink"]],template:function(e,t){e&1&&(r(0,"nav",0)(1,"div",1)(2,"a",2)(3,"span",3),m(4,"img",4),a(),c(5," ACCUEIL "),a(),r(6,"div",5),f(7,$n,10,9,"ng-container",6),a()()()),e&2&&(l(7),d("ngForOf",t.categories()))},dependencies:[Z,A,T],styles:['[_nghost-%COMP%]{display:block}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.001ms!important;animation-iteration-count:1!important;transition-duration:.001ms!important;scroll-behavior:auto!important}}.subnav[_ngcontent-%COMP%]{position:relative;isolation:isolate;z-index:60;padding:10px 16px;border-radius:40px}.pill[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;align-items:center}.tab-home[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 18px;border-radius:999px;text-decoration:none;font-weight:700;color:#e0e6f7;background:#00bcd433;border:1px solid rgba(0,188,212,.35);transition:all .2s ease-in-out;white-space:nowrap}.tab-home[_ngcontent-%COMP%]:hover{background:#00bcd44d;border-color:#00bcd4;box-shadow:0 0 8px #00bcd466;color:#fff}.tab-home[_ngcontent-%COMP%]:active{transform:translateY(0)}.tab-home[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 3px #00bcd433,0 0 0 6px #00bcd41a}.tab-home[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:20px;height:20px;flex:0 0 20px;display:grid;place-items:center;border-radius:4px;overflow:hidden;background:#fff}.menu-host[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.cat-item[_ngcontent-%COMP%]{position:relative;display:inline-block}.cat-item[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;top:100%;height:10px}.tab[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;cursor:pointer;background:transparent;border:1px solid rgba(255,255,255,.58);color:#a7b0c2;text-decoration:none;white-space:nowrap;transition:all .2s ease-in-out}.tab[_ngcontent-%COMP%]:hover{background:#fff0;border-color:#ffffff29;color:#e0e6f7}.tab.active[_ngcontent-%COMP%]{background:#00bcd433;color:#fff;border-color:#00bcd459}.tab[_ngcontent-%COMP%]:active{transform:translateY(0)}.tab[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 3px #00bcd433}.tab[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;overflow:hidden;background:#fff;display:grid;place-items:center}.tab[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{font-weight:700;letter-spacing:0}.tab[_ngcontent-%COMP%]   .chev[_ngcontent-%COMP%]{opacity:.6;transition:transform .2s ease}.tab.active[_ngcontent-%COMP%]   .chev[_ngcontent-%COMP%]{transform:rotate(180deg)}.panel[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;min-width:300px;width:auto;background:#131a2870;backdrop-filter:blur(10px) saturate(150%);color:#e0e6f7;border:1px solid rgba(255,255,255,.15);border-radius:12px;box-shadow:0 15px 40px #00000073;opacity:0;visibility:hidden;transform:translateY(10px);transition:opacity .2s,transform .2s,visibility .2s;pointer-events:none;overflow:hidden;z-index:70}.cat-item[_ngcontent-%COMP%]:hover > .panel[_ngcontent-%COMP%], .cat-item[_ngcontent-%COMP%]:focus-within > .panel[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:none;pointer-events:auto}.panel-inner[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px;transition:grid-template-columns .3s ease}.panel-inner.has-right[_ngcontent-%COMP%]{grid-template-columns:300px 1fr;min-width:650px}.col.left[_ngcontent-%COMP%]{background:#1218264a;border-right:1px solid rgba(255,255,255,.1);padding:15px 0;width:300px}.category-header[_ngcontent-%COMP%]{padding:0 20px 12px;border-bottom:1px solid rgba(255,255,255,.05);margin-bottom:8px}.category-subtitle[_ngcontent-%COMP%]{font-size:.95em;color:#a7b0c2;font-weight:500}.submenu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column}.submenu-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:12px 20px;border:none;background:transparent;color:#e0e6f7;font-weight:600;transition:all .2s}.submenu-item[_ngcontent-%COMP%]:hover{background:#00bcd426;color:#fff}.submenu-item.current[_ngcontent-%COMP%]{background:#00bcd433;color:#fff;font-weight:700}.submenu-item.current[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:#00bcd4;border-radius:0 4px 4px 0}.col.right[_ngcontent-%COMP%]{background:transparent;padding:24px;display:flex;flex-direction:column;gap:20px;min-width:350px}.subcategory-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:800;color:#e0e6f7;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid rgba(0,188,212,.4);text-shadow:0 0 5px rgba(0,188,212,.2)}.links[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:10px;color:#e0e6f7;text-decoration:none;border:1px solid rgba(255,255,255,.1);background:#0c101acc;transition:all .25s ease;font-weight:600;line-height:1.3;position:relative;overflow:hidden}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"\\2605";font-size:10px;color:#00bcd4;position:absolute;top:0;left:0;padding:4px 6px;background:#00bcd41a;border-radius:10px 0;font-weight:900}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#00bcd44d;border-color:#00bcd4;color:#fff;transform:translateY(-3px);box-shadow:0 5px 15px #00bcd433}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:20px}.links[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]{grid-column:1 / -1;margin-top:10px}@media (max-width: 980px){.panel-inner[_ngcontent-%COMP%], .panel-inner.has-right[_ngcontent-%COMP%]{grid-template-columns:1fr;min-width:300px}.col.left[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid rgba(255,255,255,.1);border-radius:12px 12px 0 0;width:auto}.col.right[_ngcontent-%COMP%]{border-radius:0 0 12px 12px;min-width:auto}}@media (max-width: 600px){.links[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};var xe=class i{STORAGE_KEY="cart_items";items=O(this.load());constructor(){ln(()=>{let n=this.items();localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))})}add(n){let e=[...this.items()],t=e.find(o=>o.id===n.id);t?t.qty+=n.qty:e.push(n),this.items.set(e)}remove(n){let e=[...this.items()];e.splice(n,1),this.items.set(e)}clear(){this.items.set([])}inc(n){let e=[...this.items()];e[n].qty++,this.items.set(e)}dec(n){let e=[...this.items()];e[n].qty=Math.max(1,e[n].qty-1),this.items.set(e)}setQty(n,e){let t=[...this.items()];t[n].qty=Math.max(1,e),this.items.set(t)}totalCount(){return this.items().reduce((n,e)=>n+e.qty,0)}subtotal(){return this.items().reduce((n,e)=>n+e.qty*e.price,0)}load(){try{let n=localStorage.getItem(this.STORAGE_KEY);return n?JSON.parse(n):[]}catch{return[]}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=pe({token:i,factory:i.\u0275fac,providedIn:"root"})};function Wn(i,n){if(i&1&&(r(0,"span",9),c(1),a()),i&2){let e=p();l(),y(e.totalCount())}}function Kn(i,n){if(i&1){let e=P();r(0,"div",10),h("click",function(){x(e);let o=p();return _(o.cartOpen.set(!1))}),a()}}function Zn(i,n){if(i&1){let e=P();r(0,"div",23),m(1,"img",24),r(2,"div",25)(3,"p",26),c(4),a(),r(5,"div",27),c(6),H(7,"currency"),a(),r(8,"div",28)(9,"label"),c(10,"Qt\xE9:"),a(),r(11,"div",29)(12,"button",30),h("click",function(){let o=x(e).index,s=p(3);return _(s.decQty(o))}),c(13,"\u2212"),a(),r(14,"input",31),$e("ngModelChange",function(o){let s=x(e).index,g=p(3);return Qe(g.cart.items()[s].qty,o)||(g.cart.items()[s].qty=o),_(o)}),h("change",function(){let o=x(e).index,s=p(3);return _(s.onQtyChange(o))}),a(),r(15,"button",32),h("click",function(){let o=x(e).index,s=p(3);return _(s.incQty(o))}),c(16,"\uFF0B"),a()(),r(17,"div",33)(18,"button",34),h("click",function(){let o=x(e).index,s=p(3);return _(s.edit(o))}),L(),r(19,"svg",35),m(20,"path",36)(21,"path",37),a()(),ee(),r(22,"button",38),h("click",function(){let o=x(e).index,s=p(3);return _(s.remove(o))}),L(),r(23,"svg",35),m(24,"path",39)(25,"path",40)(26,"path",41),a()()()()()()}if(i&2){let e=n.$implicit,t=n.index,o=p(3);l(),d("src",e.imageUrl||"assets/images/placeholder.jpg",F)("alt",e.name),l(3),y(e.name),l(2),y(X(7,5,e.price,"TND")),l(8),Ye("ngModel",o.cart.items()[t].qty)}}function Xn(i,n){if(i&1&&(r(0,"div",20)(1,"div",21),m(2,"hr"),a(),f(3,Zn,27,8,"div",22),r(4,"div",21),m(5,"hr"),a()()),i&2){let e=p(2);l(3),d("ngForOf",e.cart.items())}}function Jn(i,n){i&1&&(r(0,"p",42),c(1,"Aucun produit s\xE9lectionn\xE9"),a())}function ei(i,n){if(i&1){let e=P();r(0,"div",11)(1,"div",12),h("click",function(o){return x(e),_(o.stopPropagation())}),r(2,"button",13),h("click",function(){x(e);let o=p();return _(o.cartOpen.set(!1))}),c(3,"\xD7"),a(),r(4,"div",14)(5,"span",15),c(6),a(),r(7,"span",16),c(8," Sous-total : "),r(9,"strong"),c(10),H(11,"currency"),a()()(),r(12,"button",17),h("click",function(){x(e);let o=p();return _(o.checkout())}),c(13,"PASSER \xC0 LA CAISSE"),a(),f(14,Xn,6,1,"div",18)(15,Jn,2,0,"ng-template",null,0,ge),r(17,"a",19),h("click",function(){x(e);let o=p();return _(o.cartOpen.set(!1))}),c(18,"Afficher et modifier le panier"),a()()()}if(i&2){let e=ue(16),t=p();l(6),Me(" ",t.totalCount()," ",t.totalCount()>1?"Articles":"Article"," "),l(4),y(Re(11,5,t.subtotal(),"TND","symbol","1.0-3")),l(4),d("ngIf",t.cart.items().length)("ngIfElse",e)}}var at=class i{el=w(de);cartOpen=O(!1);isMobile=window.innerWidth<=768;cart=w(xe);router=w(te);constructor(){}count(){return this.cart.totalCount()}totalCount(){return this.cart.totalCount()}subtotal(){return this.cart.subtotal()}incQty(n){this.cart.inc(n)}decQty(n){this.cart.dec(n)}onQtyChange(n){this.cart.setQty(n,this.cart.items()[n].qty)}remove(n){this.cart.remove(n)}edit(n){alert(`Modifier l\u2019article: ${this.cart.items()[n].name}`)}toggleCart(){this.cartOpen.update(n=>!n)}checkout(){this.router.navigateByUrl("/panier"),this.cartOpen.set(!1)}onDocClick(n){if(!this.cartOpen())return;this.el.nativeElement.contains(n.target)||this.cartOpen.set(!1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-cart"]],hostBindings:function(e,t){e&1&&h("click",function(s){return t.onDocClick(s)},!1,Be)},decls:8,vars:3,consts:[["empty",""],["aria-label","Voir le panier",1,"cart-btn",3,"click"],["width","22","height","22","viewBox","0 0 24 24","fill","none","aria-hidden","true"],["d","M9 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M20 22a1 1 0 1 0 .001-2.001A1 1 0 0 0 20 22Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M1 1h3l3.6 12.59a2 2 0 0 0 2 1.41h7.92a2 2 0 0 0 1.98-1.64l1.2-6.36H6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","cart-badge",4,"ngIf"],["class","cart-backdrop",3,"click",4,"ngIf"],["class","cart-dropdown",4,"ngIf"],[1,"cart-badge"],[1,"cart-backdrop",3,"click"],[1,"cart-dropdown"],[1,"cart-box",3,"click"],["aria-label","Fermer",1,"cart-x",3,"click"],[1,"cart-top"],[1,"count"],[1,"subtotal"],[1,"btn-checkout",3,"click"],["class","cart-list",4,"ngIf","ngIfElse"],["routerLink","/panier",1,"cart-link",3,"click"],[1,"cart-list"],[1,"line"],["class","cart-row",4,"ngFor","ngForOf"],[1,"cart-row"],[1,"thumb",3,"src","alt"],[1,"meta"],[1,"title"],[1,"price"],[1,"controls"],[1,"qty"],["type","button","aria-label","Diminuer",3,"click"],["type","number","min","1",3,"ngModelChange","change","ngModel"],["type","button","aria-label","Augmenter",3,"click"],[1,"actions"],["aria-label","Modifier",1,"icon",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25Z","stroke","currentColor","stroke-width","1.6"],["d","M14.06 4.94l3.75 3.75","stroke","currentColor","stroke-width","1.6"],["aria-label","Supprimer",1,"icon",3,"click"],["d","M3 6h18","stroke","currentColor","stroke-width","1.6","stroke-linecap","round"],["d","M8 6V4h8v2","stroke","currentColor","stroke-width","1.6"],["d","M19 6l-1 14H6L5 6","stroke","currentColor","stroke-width","1.6"],[1,"muted","empty"]],template:function(e,t){e&1&&(r(0,"button",1),h("click",function(){return t.toggleCart()}),L(),r(1,"svg",2),m(2,"path",3)(3,"path",4)(4,"path",5),a(),f(5,Wn,2,1,"span",6),a(),f(6,Kn,1,0,"div",7)(7,ei,19,10,"div",8)),e&2&&(l(5),d("ngIf",t.totalCount()>0),l(),d("ngIf",t.cartOpen()),l(),d("ngIf",t.cartOpen()))},dependencies:[T,A,me,se,ne,Te,ie,Ve,fe,Z],styles:["[_nghost-%COMP%]{position:relative;display:flex;align-items:center;margin-left:auto}.cart-btn[_ngcontent-%COMP%]{position:relative;background:none;border:none;color:var(--text);display:inline-flex;align-items:center;justify-content:center;padding:6px;border-radius:10px;cursor:pointer;transition:color .2s}.cart-btn[_ngcontent-%COMP%]:hover{color:var(--accent)}[_nghost-%COMP%]{display:inline-flex}.cart-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:870;background:#0000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);animation:_ngcontent-%COMP%_fadeIn .18s ease}.cart-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);right:10px;z-index:880;animation:_ngcontent-%COMP%_slideDown .22s ease both}.cart-box[_ngcontent-%COMP%]{width:min(92vw,380px);background:linear-gradient(180deg,#121826f7,#0e1320f7);-webkit-backdrop-filter:blur(16px) saturate(160%);backdrop-filter:blur(16px) saturate(160%);border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 16px 40px #00000073;padding:16px;position:relative;overflow:hidden}.cart-x[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:32px;height:32px;display:grid;place-items:center;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);color:var(--muted);border-radius:10px;cursor:pointer;transition:background .2s,color .2s,transform .1s}.cart-x[_ngcontent-%COMP%]:hover{color:var(--accent);background:#ffffff1a}.cart-x[_ngcontent-%COMP%]:active{transform:translateY(1px)}.cart-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;padding-right:36px;margin-bottom:12px}.cart-top[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-weight:800;letter-spacing:.2px;color:var(--text)}.cart-top[_ngcontent-%COMP%]   .subtotal[_ngcontent-%COMP%]{color:var(--muted)}.cart-top[_ngcontent-%COMP%]   .subtotal[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent)}.btn-checkout[_ngcontent-%COMP%]{width:100%;margin:4px 0 10px;padding:12px 14px;border:0;border-radius:12px;background:linear-gradient(135deg,var(--primary),#5b4df0);color:#fff;font-weight:800;box-shadow:0 16px 36px #4f46e559;cursor:pointer;transition:filter .2s,transform .1s}.btn-checkout[_ngcontent-%COMP%]:hover{filter:brightness(1.06)}.btn-checkout[_ngcontent-%COMP%]:active{transform:translateY(1px)}.line[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.14),transparent);margin:10px 0}.cart-list[_ngcontent-%COMP%]{max-height:56vh;overflow:auto;-webkit-overflow-scrolling:touch;padding-right:4px}.cart-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.cart-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff24;border-radius:999px}.cart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:70px 1fr;gap:12px;align-items:center;padding:6px 2px;border-radius:10px;transition:background .2s}.cart-row[_ngcontent-%COMP%]:hover{background:#ffffff0a}.thumb[_ngcontent-%COMP%]{width:70px;height:70px;object-fit:cover;border-radius:12px;background:#0e1525}.meta[_ngcontent-%COMP%]{display:grid;gap:8px}.title[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:800;line-height:1.35}.price[_ngcontent-%COMP%]{color:var(--accent);font-weight:700}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:10px 14px}.controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--muted);font-size:12px}.qty[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#ffffff0a;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:3px}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:8px;border:0;background:#ffffff14;color:var(--text);cursor:pointer;transition:background .2s,transform .1s}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1f}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:54px;text-align:center;border:0;outline:0;background:transparent;color:var(--text);padding:4px 2px;font-weight:700}.actions[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-left:auto}.actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:0;cursor:pointer;display:grid;place-items:center;color:var(--text);background:#ffffff0f;border:1px solid rgba(255,255,255,.1);transition:background .2s,color .2s,transform .1s,border-color .2s}.actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:var(--accent);background:#ffffff1a;border-color:#ffffff2e}.actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:active{transform:translateY(1px)}.empty[_ngcontent-%COMP%]{margin:8px 0 12px;text-align:center}.cart-link[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:10px;color:var(--accent);text-decoration:none;font-weight:700}.cart-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.cart-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-6px;background:var(--accent);color:#0b0f1a;font-size:11px;font-weight:800;padding:2px 6px;border-radius:999px}@media (max-width: 768px){.cart-dropdown[_ngcontent-%COMP%]{position:fixed;inset:auto 0 0;z-index:880;animation:_ngcontent-%COMP%_sheetUp .24s cubic-bezier(.2,.7,.2,1) both}.cart-box[_ngcontent-%COMP%]{width:100%;max-width:none;border-radius:16px 16px 0 0;padding:14px 14px calc(env(safe-area-inset-bottom,0) + 14px);box-shadow:0 -12px 36px #0000;top:500px}.cart-list[_ngcontent-%COMP%]{max-height:50vh}.btn-checkout[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:1;padding:14px 16px;border-radius:12px}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px}.qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:64px}.actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:36px;height:36px}.cart-x[_ngcontent-%COMP%]{top:10px;right:10px;width:36px;height:36px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:none}}@keyframes _ngcontent-%COMP%_sheetUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}"]})};var st=class i{toggle=new D;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-menu-toggle"]],outputs:{toggle:"toggle"},decls:2,vars:0,consts:[["aria-label","Ouvrir le menu",1,"menu-toggle",3,"click"]],template:function(e,t){e&1&&(r(0,"button",0),h("click",function(){return t.toggle.emit()}),c(1,"\u2630"),a())},styles:[".menu-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;font-size:24px;color:var(--text);padding:6px 8px;border-radius:8px;cursor:pointer}.menu-toggle[_ngcontent-%COMP%]:hover{color:var(--accent)}@media (max-width: 768px){.menu-toggle[_ngcontent-%COMP%]{display:inline-flex}}"]})};var Sn=()=>[],ti=(i,n)=>["/categories",i,"sub",n],ni=i=>["/produits",i];function ii(i,n){if(i&1){let e=P();r(0,"div",7),h("click",function(){x(e);let o=p();return _(o.closed.emit())}),a()}}function oi(i,n){if(i&1){let e=P();r(0,"li")(1,"a",21),h("click",function(){x(e);let o=p(5);return _(o.closed.emit())}),c(2),a()()}if(i&2){let e=n.$implicit;l(),d("routerLink",K(2,ni,e._id)),l(),E(" ",e.name," ")}}function ri(i,n){if(i&1){let e=P();r(0,"ul",19),f(1,oi,3,4,"li",14),r(2,"li",20)(3,"a",21),h("click",function(){x(e);let o=p(4);return _(o.closed.emit())}),c(4," Tous les articles \u2192 "),a()()()}if(i&2){let e=p().$implicit,t=p(2).$implicit,o=p();l(),d("ngForOf",o.prodsCache.get(e._id)||At(2,Sn)),l(2),d("routerLink",We(3,ti,t._id,e._id))}}function ai(i,n){if(i&1){let e=P();r(0,"li")(1,"button",16),h("click",function(){let o=x(e).$implicit,s=p(3);return _(s.toggleSub(o._id))}),c(2),r(3,"span",17),c(4,"\u203A"),a()(),f(5,ri,5,6,"ul",18),a()}if(i&2){let e,t=n.$implicit,o=p(3);l(2),E(" ",t.name," "),l(),S("rotated",o.openSubId===t._id),l(2),d("ngIf",o.openSubId===t._id&&(((e=o.prodsCache.get(t._id))==null?null:e.length)||0)>0)}}function si(i,n){i&1&&(r(0,"li",22),c(1," Aucune sous-cat\xE9gorie. "),a())}function li(i,n){if(i&1&&(r(0,"div",13)(1,"ul"),f(2,ai,6,4,"li",14)(3,si,2,0,"li",15),a()()),i&2){let e,t=p().$implicit,o=p();l(2),d("ngForOf",o.subsCache.get(t._id)||At(2,Sn)),l(),d("ngIf",(((e=o.subsCache.get(t._id))==null?null:e.length)||0)===0)}}function ci(i,n){if(i&1){let e=P();r(0,"div",8)(1,"button",9),h("click",function(){let o=x(e).$implicit,s=p();return _(s.toggleCategory(o._id))}),r(2,"div",4),m(3,"img",10),a(),r(4,"span"),c(5),a(),r(6,"span",11),c(7,"\u203A"),a()(),f(8,li,4,3,"div",12),a()}if(i&2){let e=n.$implicit,t=p();l(3),d("src",t.getUrl(e.iconUrl||e.imageUrl||(e.banners==null?null:e.banners[0]))||"/assets/placeholder.jpg",F)("alt",e.name),l(2),y(e.name),l(),S("rotated",t.openCatId===e._id),l(2),d("ngIf",t.openCatId===e._id)}}var lt=class i{open=!1;closed=new D;openCatId=null;openSubId=null;api=w(Se);categories=O([]);subsApi=w(Ee);prodsApi=w(ae);subsCache=new Map;prodsCache=new Map;getUrl=W;ngOnInit(){return Y(this,null,function*(){try{let n=yield this.api.list().toPromise();this.categories.set((n||[]).filter(e=>e.isActive))}catch{}})}toggleCategory(n){return Y(this,null,function*(){if(this.openCatId===n){this.openCatId=null,this.openSubId=null;return}if(this.openCatId=n,this.openSubId=null,!this.subsCache.has(n))try{let e=yield this.subsApi.listByCategory(n).toPromise();this.subsCache.set(n,e||[])}catch{this.subsCache.set(n,[])}})}toggleSub(n){return Y(this,null,function*(){if(this.openSubId===n){this.openSubId=null;return}if(this.openSubId=n,!this.prodsCache.has(n))try{let e=yield this.prodsApi.listBySubcategory(n).toPromise();this.prodsCache.set(n,e?.items||[])}catch{this.prodsCache.set(n,[])}})}subsOf(n){let e=this.api.getOne(n);return[]}prodsOf(n){return[]}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-nav-mobile"]],inputs:{open:"open"},outputs:{closed:"closed"},decls:13,vars:4,consts:[["class","mobile-backdrop",3,"click",4,"ngIf"],["aria-label","Menu mobile",1,"mobile-menu",3,"click"],["aria-label","Fermer",1,"close-btn",3,"click"],["routerLink","/",1,"main-link",3,"click"],[1,"ico"],["class","accordion",4,"ngFor","ngForOf"],["routerLink","/contact",1,"main-link",3,"click"],[1,"mobile-backdrop",3,"click"],[1,"accordion"],[1,"accordion-header",3,"click"],[3,"src","alt"],[1,"chev"],["class","accordion-body",4,"ngIf"],[1,"accordion-body"],[4,"ngFor","ngForOf"],["class","muted","style","padding:6px 12px;",4,"ngIf"],[1,"sub-link",3,"click"],[1,"chev","small"],["class","sub-products",4,"ngIf"],[1,"sub-products"],[1,"all"],[3,"click","routerLink"],[1,"muted",2,"padding","6px 12px"]],template:function(e,t){e&1&&(f(0,ii,1,0,"div",0),r(1,"nav",1),h("click",function(s){return s.stopPropagation()}),r(2,"button",2),h("click",function(){return t.closed.emit()}),c(3," \u2715 "),a(),r(4,"a",3),h("click",function(){return t.closed.emit()}),r(5,"span",4),c(6,"\u{1F3E0}"),a(),c(7," Accueil "),a(),f(8,ci,9,6,"div",5),r(9,"a",6),h("click",function(){return t.closed.emit()}),r(10,"span",4),c(11,"\u{1F4DE}"),a(),c(12," Contact "),a()()),e&2&&(d("ngIf",t.open),l(),S("open",t.open),l(7),d("ngForOf",t.categories()))},dependencies:[A,T,Z],styles:['[_nghost-%COMP%]{--glass-bg: linear-gradient(135deg, rgb(134 153 203 / 95%) 0%, rgb(62 81 139 / 98%) 50%, rgb(28 29 33 / 95%) 100%);--glass-border: rgba(255, 255, 255, .12);--glass-shadow: 0 25px 50px rgba(0, 0, 0, .5);--accent-glow: rgba(34, 211, 238, .6);--text-primary: #eaf2ff;--text-secondary: #b6c2d9;--transition-drawer: transform .4s cubic-bezier(.25, .8, .25, 1);--transition-smooth: all .3s cubic-bezier(.4, 0, .2, 1)}.mobile-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:linear-gradient(135deg,#000c,#080c14e6);backdrop-filter:blur(15px) saturate(180%);-webkit-backdrop-filter:blur(15px) saturate(180%);z-index:1000;animation:_ngcontent-%COMP%_backdropReveal .4s cubic-bezier(.25,.8,.25,1)}@keyframes _ngcontent-%COMP%_backdropReveal{0%{opacity:0;backdrop-filter:blur(0px) saturate(100%)}to{opacity:1;backdrop-filter:blur(15px) saturate(180%)}}.mobile-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;width:320px;max-width:85vw;transform:translate(-100%);background:var(--glass-bg);backdrop-filter:blur(25px) saturate(200%);-webkit-backdrop-filter:blur(25px) saturate(200%);border-right:1px solid var(--glass-border);box-shadow:var(--glass-shadow),inset 1px 0 #ffffff0d;color:var(--text-primary);z-index:1100;display:flex;flex-direction:column;padding:32px 24px;gap:20px;overflow-y:auto;transition:var(--transition-drawer),opacity .4s}.mobile-menu.open[_ngcontent-%COMP%]{transform:translate(0)}.mobile-menu[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,var(--accent-glow) 50%,transparent 100%);opacity:0;transition:opacity .3s ease}.mobile-menu.open[_ngcontent-%COMP%]:before{opacity:1;animation:_ngcontent-%COMP%_borderGlow 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{opacity:.5}50%{opacity:1}}.close-btn[_ngcontent-%COMP%]{align-self:flex-end;background:#ffffff14;border:1px solid rgba(255,255,255,.15);border-radius:12px;color:var(--text-secondary);font-size:24px;width:40px;height:40px;display:grid;place-items:center;cursor:pointer;transition:var(--transition-smooth);backdrop-filter:blur(10px)}.close-btn[_ngcontent-%COMP%]:hover{background:#22d3ee26;border-color:var(--accent-glow);color:var(--text-primary);transform:rotate(90deg) scale(1.1);box-shadow:0 0 20px var(--accent-glow)}.main-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;font-weight:700;padding:16px 20px;border-radius:16px;color:var(--text-primary);text-decoration:none;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(10px);transition:var(--transition-smooth);position:relative;overflow:hidden}.main-link[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(34,211,238,.1) 0%,transparent 50%);opacity:0;transition:opacity .3s ease}.main-link[_ngcontent-%COMP%]:hover{background:#22d3ee26;border-color:var(--accent-glow);transform:translateY(-2px) scale(1.01);box-shadow:0 10px 30px #22d3ee4d,0 0 0 1px var(--accent-glow)}.main-link[_ngcontent-%COMP%]:hover:before{opacity:1}.main-link[_ngcontent-%COMP%]:active{transform:translateY(-1px) scale(1)}.main-link[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--accent-glow);transition:var(--transition-smooth)}.main-link[_ngcontent-%COMP%]:hover   .ico[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg)}.accordion-header[_ngcontent-%COMP%]{width:100%;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:var(--text-primary);font-weight:700;padding:16px 20px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:var(--transition-smooth);backdrop-filter:blur(10px);position:relative;overflow:hidden}.accordion-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(34,211,238,.1),transparent);transition:left .6s ease}.accordion-header[_ngcontent-%COMP%]:hover:before{left:100%}.accordion-header[_ngcontent-%COMP%]:hover{background:#22d3ee26;border-color:var(--accent-glow);transform:translateY(-2px);box-shadow:0 8px 25px #22d3ee33}.accordion-header[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:10px;overflow:hidden;background:#fff;border:1px solid rgba(0,0,0,.1);flex-shrink:0;transition:var(--transition-smooth)}.accordion-header[_ngcontent-%COMP%]:hover   .ico[_ngcontent-%COMP%]{transform:scale(1.05);box-shadow:0 4px 15px #22d3ee4d}.accordion-header[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.chev[_ngcontent-%COMP%]{margin-left:auto;transition:var(--transition-smooth);color:var(--text-secondary)}.chev.rotated[_ngcontent-%COMP%]{transform:rotate(90deg);color:var(--accent-glow)}.accordion-header[_ngcontent-%COMP%]:hover   .chev[_ngcontent-%COMP%]{color:var(--accent-glow)}.accordion-body[_ngcontent-%COMP%]{padding-left:0;display:grid;gap:8px;margin-top:8px;animation:_ngcontent-%COMP%_accordionReveal .4s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_accordionReveal{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.sub-link[_ngcontent-%COMP%]{width:100%;background:#ffffff08;color:var(--text-primary);border:1px solid transparent;text-align:left;padding:14px 18px;border-radius:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:var(--transition-smooth);min-height:48px;backdrop-filter:blur(5px)}.sub-link[_ngcontent-%COMP%]:hover{background:#22d3ee1a;border-color:#22d3ee4d;color:var(--accent-glow);transform:translate(4px);box-shadow:0 4px 15px #22d3ee26}.sub-link.active[_ngcontent-%COMP%]{background:#22d3ee33;border-color:var(--accent-glow);color:var(--text-primary);font-weight:700;box-shadow:0 0 20px #22d3ee4d}.sub-link[_ngcontent-%COMP%]   .chev.small[_ngcontent-%COMP%]{margin-left:12px;transition:var(--transition-smooth)}.sub-link[_ngcontent-%COMP%]:hover   .chev.small[_ngcontent-%COMP%]{transform:translate(2px)}.sub-products[_ngcontent-%COMP%]{list-style:none;padding:12px 0 12px 16px;display:grid;gap:6px;margin-left:16px;border-left:2px solid rgba(34,211,238,.4);position:relative}.sub-products[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-2px;height:100%;background:linear-gradient(to bottom,transparent,var(--accent-glow),transparent);opacity:.3;animation:_ngcontent-%COMP%_linePulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_linePulse{0%,to{opacity:.3}50%{opacity:.6}}.sub-products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:var(--text-secondary);text-decoration:none;font-weight:500;font-size:14px;padding:10px 14px;border-radius:10px;background:transparent;transition:var(--transition-smooth);border:1px solid transparent}.sub-products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#22d3ee1a;color:var(--text-primary);border-color:#22d3ee33;transform:translate(2px);text-decoration:none}.sub-products[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--accent-glow);font-weight:700;background:#22d3ee26;border:1px solid var(--accent-glow);box-shadow:0 0 15px #22d3ee4d;text-decoration:none;margin-top:8px;transition:var(--transition-smooth);position:relative;overflow:hidden}.sub-products[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s ease}.sub-products[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#22d3ee40;box-shadow:0 0 25px #22d3ee80;transform:translateY(-1px)}.sub-products[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{left:100%}.mobile-menu[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none}.mobile-menu[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (prefers-reduced-motion: reduce){.mobile-menu[_ngcontent-%COMP%], .main-link[_ngcontent-%COMP%], .accordion-header[_ngcontent-%COMP%], .sub-link[_ngcontent-%COMP%], .sub-products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:none!important;animation:none!important}}@media (max-width: 480px){.mobile-menu[_ngcontent-%COMP%]{width:280px;padding:24px 16px;gap:16px}.main-link[_ngcontent-%COMP%], .accordion-header[_ngcontent-%COMP%]{padding:14px 16px;gap:12px}.sub-link[_ngcontent-%COMP%]{padding:12px 16px}}']})};var ct=class i{http=w(mn);base="/api/search";suggest(n,e=8){let t=new gn().set("q",n).set("limit",e);return this.http.get(`${this.base}/products`,{params:t})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var di=["mobileInput"],En=i=>["/produits",i];function pi(i,n){i&1&&(r(0,"div",17),c(1,"Recherche\u2026"),a())}function ui(i,n){if(i&1&&(r(0,"div",18),c(1),a()),i&2){let e=p(3);l(),y(e.error())}}function gi(i,n){if(i&1&&(R(0),c(1),z()),i&2){let e=p(2).$implicit;l(),E("\u203A ",e.subCategory==null?null:e.subCategory.name,"")}}function mi(i,n){if(i&1&&(r(0,"div",25),c(1),f(2,gi,2,1,"ng-container",15),a()),i&2){let e=p().$implicit;l(),E(" ",e.category==null?null:e.category.name," "),l(),d("ngIf",e.subCategory==null?null:e.subCategory.name)}}function hi(i,n){if(i&1&&(r(0,"a",20),m(1,"img",21),r(2,"div",22)(3,"div",23),c(4),a(),f(5,mi,3,2,"div",24),a()()),i&2){let e=n.$implicit,t=p(4);d("routerLink",K(5,En,e._id)),l(),d("src",t.getUrl(e.imageUrl)||"assets/images/placeholder.jpg",F)("alt",e.name),l(3),y(e.name),l(),d("ngIf",e.category==null?null:e.category.name)}}function fi(i,n){if(i&1&&(R(0),f(1,hi,6,7,"a",19),z()),i&2){let e=p(3);l(),d("ngForOf",e.results())("ngForTrackBy",e.trackById)}}function bi(i,n){i&1&&(r(0,"div",26),c(1," Aucun r\xE9sultat. "),a())}function xi(i,n){if(i&1&&(r(0,"div",12),f(1,pi,2,0,"div",13)(2,ui,2,1,"div",14)(3,fi,2,2,"ng-container",15)(4,bi,2,0,"div",16),a()),i&2){let e=p(2);l(),d("ngIf",e.loading()),l(),d("ngIf",!e.loading()&&e.error()),l(),d("ngIf",!e.loading()&&!e.error()&&e.results().length),l(),d("ngIf",!e.loading()&&!e.error()&&!e.results().length)}}function _i(i,n){if(i&1){let e=P();r(0,"form",6),h("submit",function(o){x(e);let s=p();return _(s.onSubmit(o))}),r(1,"input",7),h("ngModelChange",function(o){x(e);let s=p();return _(s.onType(o))}),a(),r(2,"button",8),L(),r(3,"svg",9),m(4,"path",10),a()(),f(5,xi,5,4,"div",11),a()}if(i&2){let e=p();l(),d("placeholder","Rechercher des produits\u2026")("ngModel",e.query),l(4),d("ngIf",e.query&&(e.results().length||e.loading()||e.error()))}}function vi(i,n){if(i&1){let e=P();r(0,"button",27),h("click",function(){x(e);let o=p();return _(o.openMobile())}),L(),r(1,"svg",28),m(2,"path",10),a()()}}function Ci(i,n){if(i&1){let e=P();r(0,"div",29),h("click",function(){x(e);let o=p();return _(o.closeMobile())}),a()}}function wi(i,n){i&1&&(r(0,"div",17),c(1,"Recherche\u2026"),a())}function Oi(i,n){if(i&1&&(r(0,"div",18),c(1),a()),i&2){let e=p(3);l(),y(e.error())}}function Mi(i,n){if(i&1&&(R(0),c(1),z()),i&2){let e=p(2).$implicit;l(),E("\u203A ",e.subCategory==null?null:e.subCategory.name,"")}}function yi(i,n){if(i&1&&(r(0,"div",25),c(1),f(2,Mi,2,1,"ng-container",15),a()),i&2){let e=p().$implicit;l(),E(" ",e.category==null?null:e.category.name," "),l(),d("ngIf",e.subCategory==null?null:e.subCategory.name)}}function Pi(i,n){if(i&1){let e=P();r(0,"a",37),h("click",function(){x(e);let o=p(3);return _(o.closeMobile())}),m(1,"img",21),r(2,"div",22)(3,"div",23),c(4),a(),f(5,yi,3,2,"div",24),a()()}if(i&2){let e=n.$implicit,t=p(3);d("routerLink",K(5,En,e._id)),l(),d("src",t.getUrl(e.imageUrl)||"assets/images/placeholder.jpg",F)("alt",e.name),l(3),y(e.name),l(),d("ngIf",e.category==null?null:e.category.name)}}function ki(i,n){i&1&&(r(0,"div",26),c(1," Aucun r\xE9sultat. "),a())}function Si(i,n){if(i&1&&(r(0,"div",35),f(1,wi,2,0,"div",13)(2,Oi,2,1,"div",14)(3,Pi,6,7,"a",36)(4,ki,2,0,"div",16),a()),i&2){let e=p(2);l(),d("ngIf",e.loading()),l(),d("ngIf",!e.loading()&&e.error()),l(),d("ngForOf",e.results())("ngForTrackBy",e.trackById),l(),d("ngIf",!e.loading()&&!e.error()&&!e.results().length)}}function Ei(i,n){if(i&1){let e=P();r(0,"div",30)(1,"form",31),h("submit",function(o){x(e);let s=p();return _(s.onSubmit(o))}),r(2,"button",32),h("click",function(){x(e);let o=p();return _(o.closeMobile())}),c(3,"\xD7"),a(),r(4,"input",33,0),h("ngModelChange",function(o){x(e);let s=p();return _(s.onType(o))}),a(),r(6,"button",8),L(),r(7,"svg",9),m(8,"path",10),a()()(),f(9,Si,5,5,"div",34),a()}if(i&2){let e=p();l(4),d("placeholder","Rechercher des produits\u2026")("ngModel",e.query),l(5),d("ngIf",e.query&&(e.results().length||e.loading()||e.error()))}}var dt=class i{submitSearch=new D;searchApi=w(ct);router=w(te);query="";isMobile=!1;isOpen=!1;results=O([]);loading=O(!1);error=O(null);input$=new Ce;mobileInput;constructor(){this.input$.pipe($t(220),Ae(),Wt(n=>n?.trim()?(this.loading.set(!0),this.error.set(null),this.searchApi.suggest(n.trim()).pipe(Qt(()=>(this.error.set("Erreur de recherche"),Ht([]))))):(this.results.set([]),Ht([])))).subscribe(n=>{this.results.set(n||[]),this.loading.set(!1)})}onType(n){this.query=n,this.input$.next(n)}onSubmit(n){n.preventDefault();let e=this.query?.trim();e&&(this.submitSearch.emit(e),this.closeMobile())}openMobile(){this.isOpen=!0,setTimeout(()=>this.mobileInput?.nativeElement?.focus(),0)}closeMobile(){this.isOpen=!1}clear(){this.query="",this.results.set([])}trackById=(n,e)=>e._id;getUrl=W;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-search"]],viewQuery:function(e,t){if(e&1&&Q(di,5),e&2){let o;q(o=G())&&(t.mobileInput=o.first)}},outputs:{submitSearch:"submitSearch"},decls:5,vars:6,consts:[["mobileInput",""],[1,"search-wrap"],["class","searchbar desktop","role","search",3,"submit",4,"ngIf"],["class","icon-btn search-icon-mobile","type","button","aria-label","Ouvrir la recherche",3,"click",4,"ngIf"],["class","backdrop",3,"click",4,"ngIf"],["class","mobile-sheet","role","dialog","aria-modal","true",4,"ngIf"],["role","search",1,"searchbar","desktop",3,"submit"],["type","search","name","q","aria-label","Rechercher",3,"ngModelChange","placeholder","ngModel"],["type","submit","aria-label","Rechercher"],["width","18","height","18","viewBox","0 0 24 24","aria-hidden","true"],["fill","currentColor","d","M15.5 14h-.79l-.28-.27a6.5 6.5 0 1 0-1.41 1.41l.27.28v.79L20 21.5 21.5 20 15.5 14zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"],["class","suggest",4,"ngIf"],[1,"suggest"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],["class","empty",4,"ngIf"],[1,"loading"],[1,"error"],["class","hit",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hit",3,"routerLink"],[1,"thumb",3,"src","alt"],[1,"meta"],[1,"name"],["class","crumbs",4,"ngIf"],[1,"crumbs"],[1,"empty"],["type","button","aria-label","Ouvrir la recherche",1,"icon-btn","search-icon-mobile",3,"click"],["width","22","height","22","viewBox","0 0 24 24","aria-hidden","true"],[1,"backdrop",3,"click"],["role","dialog","aria-modal","true",1,"mobile-sheet"],["role","search",1,"searchbar","mobile",3,"submit"],["type","button","aria-label","Fermer",1,"icon-btn",3,"click"],["type","search","name","q","aria-label","Rechercher dans le site",3,"ngModelChange","placeholder","ngModel"],["class","suggest mobile",4,"ngIf"],[1,"suggest","mobile"],["class","hit",3,"routerLink","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hit",3,"click","routerLink"]],template:function(e,t){e&1&&(r(0,"div",1),f(1,_i,6,3,"form",2)(2,vi,3,0,"button",3)(3,Ci,1,0,"div",4)(4,Ei,10,3,"div",5),a()),e&2&&(S("open",t.isOpen&&t.isMobile),l(),d("ngIf",!t.isMobile),l(),d("ngIf",!t.isOpen),l(),d("ngIf",t.isOpen),l(),d("ngIf",t.isOpen))},dependencies:[se,tt,ne,ie,et,fe,vn,T,A,Z],styles:[".search-wrap[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.searchbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:var(--surface, rgba(18,24,38,.85));border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:2px 10px}.searchbar.desktop[_ngcontent-%COMP%]{min-width:450px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:#0e1525;color:var(--text, #fff);font-size:15px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff6}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--accent, #22d3ee);box-shadow:0 0 0 3px #22d3ee29;outline:none}.searchbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;min-width:36px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:#ffffff0f;color:var(--text, #fff);cursor:pointer;display:grid;place-items:center;transition:background .2s,border-color .2s}.searchbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#22d3ee14;border-color:#22d3ee40}.icon-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.15);border-radius:10px;color:var(--text, #fff);width:40px;height:40px;display:grid;place-items:center}.suggest[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 8px);background:linear-gradient(180deg,#1a2234f5,#121826f5);border:1px solid rgba(255,255,255,.08);border-radius:14px;box-shadow:0 20px 60px #00000059;padding:10px;z-index:100}.suggest[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%], .suggest[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], .suggest[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{padding:10px;color:var(--muted, #999);font-size:14px}.suggest[_ngcontent-%COMP%]   .hit[_ngcontent-%COMP%]{display:grid;grid-template-columns:54px 1fr;gap:10px;align-items:center;padding:8px;border-radius:10px;text-decoration:none;color:var(--text, #fff);border:1px solid transparent;transition:background .15s,border-color .15s}.suggest[_ngcontent-%COMP%]   .hit[_ngcontent-%COMP%]:hover{background:#22d3ee0f;border-color:#22d3ee26}.suggest[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:cover;border-radius:10px;background:#0e1525;border:1px solid rgba(255,255,255,.08)}.suggest[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.2px;font-size:15px}.suggest[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .crumbs[_ngcontent-%COMP%]{color:var(--muted, #aaa);font-size:12px;margin-top:2px}.backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0000008c;backdrop-filter:blur(3px);z-index:900;animation:_ngcontent-ng-c390820198_fadeIn .25s ease;border-radius:20px}.mobile-sheet[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:50px;background:#0c101ce0;border-bottom:1px solid rgba(255,255,255,.08);box-shadow:0 20px 60px #00000059;z-index:901;padding:12px;display:flex;flex-direction:column;gap:12px;border-radius:20px;animation:_ngcontent-ng-c390820198_slideDown .25s ease}.searchbar.mobile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.searchbar.mobile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;font-size:16px;padding:12px;border-radius:12px}.suggest.mobile[_ngcontent-%COMP%]{position:relative;background:transparent;box-shadow:none;border:none;padding:4px 0;max-height:calc(100vh - 150px);overflow-y:auto;display:flex;flex-direction:column;gap:4px}.suggest.mobile[_ngcontent-%COMP%]   .hit[_ngcontent-%COMP%]{grid-template-columns:48px 1fr;gap:8px;padding:10px;border-radius:10px}.suggest.mobile[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{width:48px;height:48px}.suggest.mobile[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px}.suggest.mobile[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .crumbs[_ngcontent-%COMP%]{font-size:12px;opacity:.8}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-15px);opacity:0}to{transform:none;opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.searchbar.desktop[_ngcontent-%COMP%]{display:none}.searchbar.mobile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}@media (min-width: 769px){.mobile-sheet[_ngcontent-%COMP%], .backdrop[_ngcontent-%COMP%]{display:none}}.search-icon-mobile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:12px;background:#ffffff0d;border:1px solid rgba(255,255,255,.12);color:var(--text, #fff);cursor:pointer;transition:background .2s,border-color .2s;z-index:20}.search-icon-mobile[_ngcontent-%COMP%]:hover{background:#22d3ee1a;border-color:#22d3ee40}@media (min-width: 769px){.search-icon-mobile[_ngcontent-%COMP%]{display:none}}"]})};var He=class i{_list=O([]);list=this._list.asReadonly();seq=1;show(n,e="info",t=2500){let o=this.seq++,s={id:o,text:n,kind:e};this._list.update(g=>[...g,s]),setTimeout(()=>this.dismiss(o),t)}dismiss(n){this._list.update(e=>e.filter(t=>t.id!==n))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ti=["firstField"];function Vi(i,n){if(i&1){let e=P();r(0,"button",7),h("click",function(){x(e);let o=p();return _(o.toggleModal())}),L(),r(1,"svg",8),m(2,"path",9)(3,"circle",10),a()()}}function Ii(i,n){if(i&1){let e=P();R(0),r(1,"img",17),h("error",function(){x(e);let o=p(2);return _(o.onAvatarError())}),a(),z()}if(i&2){let e=p(2);l(),d("src",e.avatarUrlSafe(),F)}}function Hi(i,n){if(i&1&&(r(0,"div",18),c(1),H(2,"slice"),H(3,"uppercase"),a()),i&2){let e=p(2);l(),y(we(3,5,ye(2,1,e.shortName(),0,1)))}}function Li(i,n){if(i&1){let e=P();r(0,"div",19)(1,"a",20),h("click",function(){x(e);let o=p(2);return _(o.closeUserMenu())}),c(2,"Mes commandes"),a(),r(3,"button",21),h("click",function(){let o;x(e);let s=p(2);return _(s.startForgot(((o=s.auth.user())==null?null:o.email)||void 0))}),c(4,"Changer mon mot de passe"),a(),r(5,"button",21),h("click",function(){x(e);let o=p(2);return _(o.logout())}),c(6,"Se d\xE9connecter"),a()()}}function Di(i,n){if(i&1){let e=P();r(0,"div",11),h("click",function(){x(e);let o=p();return _(o.toggleUserMenu())}),f(1,Ii,2,1,"ng-container",12)(2,Hi,4,7,"ng-template",null,1,ge),r(4,"span",13),c(5),a(),L(),r(6,"svg",14),m(7,"path",15),a()(),f(8,Li,7,0,"div",16)}if(i&2){let e=ue(3),t=p();re("aria-expanded",t.userMenuOpen()),l(),d("ngIf",t.avatarUrlSafe()&&t.hasAvatar())("ngIfElse",e),l(4),y(t.shortName()),l(3),d("ngIf",t.userMenuOpen())}}function Ni(i,n){if(i&1){let e=P();r(0,"div",22),h("click",function(){x(e);let o=p();return _(o.toggleModal())}),a()}}function Fi(i,n){i&1&&(R(0),r(1,"div",36)(2,"label"),c(3,"Nouveau mot de passe"),a(),m(4,"input",37,2),a(),r(6,"div",36)(7,"label"),c(8,"Confirmer le mot de passe"),a(),m(9,"input",38),a(),z())}function Ai(i,n){if(i&1){let e=P();R(0),r(1,"div",36)(2,"label"),c(3,"Email"),a(),m(4,"input",39,2),a(),r(6,"div",36)(7,"label"),c(8,"Mot de passe"),a(),m(9,"input",37),r(10,"button",40),h("click",function(){x(e);let o=p(2);return _(o.startForgot(o.form.value.email||""))}),c(11," Mot de passe oubli\xE9 ? "),a()(),z()}}function Bi(i,n){i&1&&(R(0),r(1,"div",41)(2,"div",36)(3,"label"),c(4,"Nom et Pr\xE9nom"),a(),m(5,"input",42,2),a(),r(7,"div",36)(8,"label"),c(9,"T\xE9l\xE9phone"),a(),m(10,"input",43),a()(),r(11,"div",36)(12,"label"),c(13,"Email"),a(),m(14,"input",39),a(),r(15,"div",41)(16,"div",36)(17,"label"),c(18,"Mot de passe"),a(),m(19,"input",37),a(),r(20,"div",36)(21,"label"),c(22,"Confirmer le mot de passe"),a(),m(23,"input",38),a()(),r(24,"div",36)(25,"label"),c(26,"Adresse"),a(),m(27,"input",44),a(),z())}function Ui(i,n){i&1&&(R(0),r(1,"p",45),c(2,"Saisis ton email, tu recevras un lien de r\xE9initialisation."),a(),r(3,"div",36)(4,"label"),c(5,"Email"),a(),m(6,"input",39,2),a(),z())}function Ri(i,n){i&1&&(R(0),r(1,"p",45),c(2," Ton compte n\u2019est pas encore activ\xE9."),m(3,"br"),c(4," Entre ton email pour recevoir un nouveau lien de v\xE9rification. "),a(),r(5,"div",36)(6,"label"),c(7,"Email"),a(),m(8,"input",39),a(),z())}function zi(i,n){if(i&1&&(r(0,"p",46),c(1),a()),i&2){let e=p(2);l(),y(e.okMsg())}}function ji(i,n){if(i&1&&(r(0,"p",47),c(1),a()),i&2){let e=p(2);l(),y(e.err())}}function qi(i,n){if(i&1){let e=P();R(0),c(1," Pas de compte ? "),r(2,"button",49),h("click",function(){x(e);let o=p(3);return _(o.switchMode("register"))}),c(3,"Cr\xE9er un compte"),a(),z()}}function Gi(i,n){if(i&1){let e=P();c(0," D\xE9j\xE0 inscrit ? "),r(1,"button",49),h("click",function(){x(e);let o=p(3);return _(o.switchMode("login"))}),c(2,"Se connecter"),a()}}function Yi(i,n){if(i&1&&(r(0,"div",48),f(1,qi,4,0,"ng-container",12)(2,Gi,3,0,"ng-template",null,3,ge),a()),i&2){let e=ue(3),t=p(2);l(),d("ngIf",t.mode()==="login")("ngIfElse",e)}}function Qi(i,n){if(i&1){let e=P();r(0,"div",48)(1,"button",49),h("click",function(){x(e);let o=p(2);return _(o.switchMode("login"))}),c(2,"Retour \xE0 la connexion"),a()()}}function $i(i,n){if(i&1){let e=P();r(0,"div",50)(1,"button",51),h("click",function(){x(e);let o=p(2);return _(o.loginWithGoogle())}),r(2,"span",52),L(),r(3,"svg",53),m(4,"path",54)(5,"path",55)(6,"path",56)(7,"path",57),a()(),ee(),r(8,"span"),c(9,"Google"),a()()()}}function Wi(i,n){if(i&1){let e=P();r(0,"div",23)(1,"div",24)(2,"div",25)(3,"h3",26),c(4),a(),r(5,"button",27),h("click",function(){x(e);let o=p();return _(o.toggleModal())}),c(6,"\xD7"),a()(),r(7,"form",28),h("ngSubmit",function(){x(e);let o=p();return _(o.submit())}),r(8,"div",29),f(9,Fi,10,0,"ng-container",30)(10,Ai,12,0,"ng-container",30)(11,Bi,28,0,"ng-container",30)(12,Ui,8,0,"ng-container",30)(13,Ri,9,0,"ng-container",30)(14,zi,2,1,"p",31)(15,ji,2,1,"p",32),r(16,"button",33),c(17),a(),f(18,Yi,4,2,"div",34)(19,Qi,3,0,"div",34),a(),f(20,$i,10,0,"div",35),a()()()}if(i&2){let e=p();S("is-register",e.mode()==="register"),l(4),E(" ",e.mode()==="login"?"Connexion":e.mode()==="register"?"Cr\xE9er un compte":e.mode()==="verify-email"?"Confirme adresse email":e.mode()==="forgot"?"Mot de passe oubli\xE9":"Nouveau mot de passe"," "),l(3),d("formGroup",e.form),l(2),d("ngIf",e.mode()==="reset"),l(),d("ngIf",e.mode()==="login"),l(),d("ngIf",e.mode()==="register"),l(),d("ngIf",e.mode()==="forgot"),l(),d("ngIf",e.mode()==="verify-email"),l(),d("ngIf",e.okMsg()),l(),d("ngIf",e.err()),l(),d("disabled",e.loading()),l(),E(" ",e.loading()?"Veuillez patienter\u2026":e.mode()==="login"?"Se connecter":e.mode()==="register"?"Cr\xE9er le compte":e.mode()==="verify-email"||e.mode()==="forgot"?"Envoyer le lien":"Changer le mot de passe"," "),l(),d("ngIf",e.mode()!=="forgot"&&e.mode()!=="reset"&&e.mode()!=="verify-email"),l(),d("ngIf",e.mode()==="forgot"&&!e.auth.user()),l(),d("ngIf",e.mode()!=="reset"&&e.mode()!=="verify-email"&&!e.auth.user())}}function Tn(i){return n=>{let e=n.parent;if(!e)return null;let t=e.get(i);return t?n.value===t.value?null:{mismatch:!0}:null}}var pt=class i{fb=w(nt);auth=w(be);host=w(de);router=w(te);route=w(he);toast=w(He);hasAvatar=O(!0);open=O(!1);mode=O("login");loading=O(!1);userMenuOpen=O(!1);err=O(void 0);okMsg=O(void 0);resetToken=O(null);firstField;focusables=[];navSub;scrollY=0;form=this.fb.group({email:["",[B.required,B.email]],password:["",[]],confirm:["",[]],name:["",[]],phone:["",[]],address:["",[]]});ngOnInit(){return Y(this,null,function*(){this.navSub=this.router.events.pipe(Oe(e=>e instanceof Xe)).subscribe(()=>{let e=this.findResetToken(this.route);e&&(this.resetToken.set(e),this.mode.set("reset"),this.err.set(void 0),this.okMsg.set(void 0),this.setupValidatorsForMode(),this.form.patchValue({password:"",confirm:""},{emitEvent:!1}),this.open.set(!0),this.lockBody(),queueMicrotask(()=>this.firstField?.nativeElement?.focus()))});let n=yield this.auth.handleAuthHash();if(n){if(n.type==="VERIFY_OK"){this.toast?.show("Compte v\xE9rifi\xE9 et connect\xE9 ","success"),this.open.set(!1),document.body.style.overflow="";return}if(n.type==="EMAIL_VALID"){this.toast?.show("Compte et v\xE9rifi\xE9 connect\xE9-vous","success"),this.mode.set("login"),this.err.set(void 0),this.okMsg.set(void 0),this.setupValidatorsForMode(),this.open.set(!0),document.body.style.overflow="hidden";return}if(n.type==="VERIFY_EXPIRED"){this.switchMode("verify-email"),this.open.set(!0),this.form.patchValue({email:n.email||""}),this.okMsg.set(void 0),this.err.set("Le lien d\u2019activation a expir\xE9. Renvoyez un nouveau lien \u{1F447}"),document.body.style.overflow="hidden";return}if(n.type==="VERIFY_INVALID"){this.switchMode("verify-email"),this.open.set(!0),this.form.patchValue({email:n.email||""}),this.okMsg.set(void 0),this.err.set("Lien invalide. Vous pouvez demander un nouveau lien \u{1F447}"),document.body.style.overflow="hidden";return}}})}ngOnDestroy(){this.navSub?.unsubscribe(),this.open()&&this.unlockBody()}findResetToken(n){for(;n;){if(n.snapshot.url.map(t=>t.path)[0]==="reset-password"&&n.snapshot.params.token)return n.snapshot.params.token;n=n.firstChild}return null}isLoggedIn(){return this.auth.isLoggedIn()}user(){return this.auth.user()}shortName(){let n=this.user();return n?n.name?n.name:(n.email||"").split("@")[0]:""}onAvatarError(){this.hasAvatar.set(!1)}avatarUrlSafe(){let n=this.auth.user()?.avatar??null;if(!n||typeof n!="string")return null;let e=n.trim().replace(/^"+|"+$/g,"");return e=e.replace(/=s\d+(-c)?$/,"=s64-c"),e||null}toggleUserMenu(){this.userMenuOpen.update(n=>!n)}closeUserMenu(){this.userMenuOpen.set(!1)}onDocClick(n){if(!this.userMenuOpen())return;this.host.nativeElement.contains(n.target)||this.closeUserMenu()}toggleModal(){let n=!this.open();if(this.open.set(n),n){this.mode()!=="register"&&this.mode()!=="forgot"&&this.mode()!=="reset"&&this.mode.set("login"),this.err.set(void 0),this.okMsg.set(void 0);let e=this.auth.user();e?.email&&this.form.patchValue({email:e.email}),this.lockBody(),queueMicrotask(()=>{this.collectFocusables(),this.firstField?.nativeElement?.focus()})}else this.unlockBody(),this.resetToken()&&(this.setupValidatorsForMode(),this.resetToken.set(null),this.router.navigateByUrl("/",{replaceUrl:!0}))}switchMode(n){this.mode.set(n),this.err.set(void 0),this.okMsg.set(void 0),this.setupValidatorsForMode(),queueMicrotask(()=>{this.collectFocusables(),this.firstField?.nativeElement?.focus()})}startForgot(n){this.err.set(void 0),this.okMsg.set(void 0),this.open()||this.toggleModal(),this.mode.set("forgot"),n&&this.form.patchValue({email:n}),this.setupValidatorsForMode(),this.closeUserMenu()}setupValidatorsForMode(){let n=this.mode(),e=(t,o)=>{let s=this.form.get(t);s&&(s.clearValidators(),s.setValidators(o),s.updateValueAndValidity({emitEvent:!1}))};n==="login"?(e("email",[B.required,B.email]),e("password",[B.required,B.minLength(6)]),e("confirm",[]),e("name",[]),e("phone",[]),e("address",[])):n==="register"?(e("email",[B.required,B.email]),e("password",[B.required,B.minLength(6)]),e("confirm",[B.required,Tn("password")]),e("name",[B.required]),e("phone",[B.pattern(/^[0-9 +\-().]{6,20}$/)]),e("address",[B.minLength(4)])):n==="forgot"?(e("email",[B.required,B.email]),e("password",[]),e("confirm",[]),e("name",[]),e("phone",[]),e("address",[])):n==="reset"?(e("email",[]),e("password",[B.required,B.minLength(6)]),e("confirm",[B.required,Tn("password")]),e("name",[]),e("phone",[]),e("address",[])):(e("email",[B.required,B.email]),e("password",[]),e("confirm",[]),e("name",[]),e("phone",[]),e("address",[]))}submit(){return Y(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched(),this.err.set("Veuillez remplir correctement le formulaire.");return}this.err.set(void 0),this.okMsg.set(void 0);try{if(this.mode()==="forgot"){let n=this.form.value.email.trim();this.loading.set(!0),yield this.auth.forgotPassword(n),this.okMsg.set("Si un compte existe, un email de r\xE9initialisation a \xE9t\xE9 envoy\xE9."),this.toast.show("Email envoy\xE9","info"),this.loading.set(!1);return}if(this.mode()==="login"){let{email:n,password:e}=this.form.getRawValue();this.loading.set(!0);let t=yield this.auth.login(n,e);this.loading.set(!1),t?(this.open.set(!1),this.unlockBody(),this.toast.show("Connect\xE9","info")):this.err.set("Identifiants invalides.");return}if(this.mode()==="register"){let n=this.form.getRawValue();if(n.password!==n.confirm){this.err.set("Les mots de passe ne correspondent pas.");return}this.loading.set(!0),yield this.auth.register({email:n.email,password:n.password,name:n.name||"",phone:n.phone||"",address:n.address||""}),this.loading.set(!1),this.okMsg.set("Compte cr\xE9\xE9. V\xE9rifie ta bo\xEEte mail si la v\xE9rification est requise."),this.toast.show("Compte cr\xE9\xE9","success"),setTimeout(()=>{this.open.set(!1),this.mode.set("login"),this.unlockBody(),this.setupValidatorsForMode()},3e3);return}if(this.mode()==="reset"){let n=this.resetToken();if(!n){this.err.set("Lien invalide.");return}let{password:e,confirm:t}=this.form.getRawValue();if(e!==t){this.err.set("Les mots de passe ne correspondent pas.");return}this.loading.set(!0),yield this.auth.resetPassword(n,e),this.loading.set(!1),this.toast.show("Mot de passe chang\xE9","success"),this.open.set(!1),this.unlockBody(),this.resetToken.set(null),this.router.navigateByUrl("/",{replaceUrl:!0}),this.mode.set("login");return}if(this.mode()==="verify-email"){let n=this.form.value.email?.trim();if(!n){this.err.set("Email requis.");return}this.loading.set(!0),yield this.auth.resendVerification(n),this.loading.set(!1),this.okMsg.set("Un nouveau lien de v\xE9rification a \xE9t\xE9 envoy\xE9. V\xE9rifie ta bo\xEEte mail."),setTimeout(()=>{this.open.set(!1),this.unlockBody()},3e3);return}}catch(n){this.loading.set(!1),this.err.set(n?.error?.error||n?.message||"Action impossible.")}})}logout(){this.auth.logout(),this.open.set(!1),this.unlockBody(),this.mode.set("login"),this.toast.show("D\xE9connect\xE9","info"),this.closeUserMenu()}lockBody(){this.scrollY=window.scrollY||0,document.body.style.top=`-${this.scrollY}px`,document.body.style.position="fixed",document.body.style.width="100%"}unlockBody(){document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,this.scrollY)}onKeydown(n){if(!this.open())return;if(n.key==="Escape"){n.preventDefault(),this.open.set(!1),this.unlockBody();return}if(n.key!=="Tab"||this.focusables.length===0)return;let e=this.focusables[0],t=this.focusables[this.focusables.length-1],o=document.activeElement;n.shiftKey?(o===e||!o)&&(n.preventDefault(),t.focus()):o===t&&(n.preventDefault(),e.focus())}collectFocusables(){let n=this.host.nativeElement.querySelector(".modal-panel");this.focusables=n?Array.from(n.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden")):[]}loginWithGoogle(){let n=this.auth.openOAuthPopup(`${this.auth.API_URL}/auth/google`);this.auth.waitForOAuthMessage(n).then(()=>{this.open.set(!1),this.unlockBody(),this.toast.show("Connect\xE9","info")}).catch(()=>{this.toast.show("Connexion Google annul\xE9e","error")})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-user"]],viewQuery:function(e,t){if(e&1&&Q(Ti,5),e&2){let o;q(o=G())&&(t.firstField=o.first)}},hostBindings:function(e,t){e&1&&h("click",function(s){return t.onDocClick(s)},!1,Be)("keydown",function(s){return t.onKeydown(s)},!1,Be)},decls:5,vars:4,consts:[["logged",""],["letter",""],["firstField",""],["regLink",""],["class","user-btn","aria-label","Se connecter / Cr\xE9er un compte",3,"click",4,"ngIf","ngIfElse"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true","aria-labelledby","authTitle",3,"is-register",4,"ngIf"],["aria-label","Se connecter / Cr\xE9er un compte",1,"user-btn",3,"click"],["width","22","height","22","viewBox","0 0 24 24","fill","none","aria-hidden","true"],["d","M20 21a8 8 0 1 0-16 0","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","2"],["tabindex","0","aria-haspopup","menu",1,"user-chip",3,"click"],[4,"ngIf","ngIfElse"],[1,"name"],["width","16","height","16","viewBox","0 0 24 24",1,"chev"],["fill","currentColor","d","M7 10l5 5 5-5z"],["class","user-menu",4,"ngIf"],["alt","avatar","loading","lazy","referrerpolicy","no-referrer",1,"avatar-img",3,"error","src"],[1,"avatar"],[1,"user-menu"],["routerLink","/commandes",3,"click"],["type","button",3,"click"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","authTitle",1,"modal"],[1,"modal-panel"],[1,"modal-head"],["id","authTitle"],["aria-label","Fermer",1,"close",3,"click"],[1,"modal-body",3,"ngSubmit","formGroup"],[1,"fields"],[4,"ngIf"],["class","notice-ok",4,"ngIf"],["class","error",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],["class","switch",4,"ngIf"],["class","social",4,"ngIf"],[1,"field"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","","minlength","6"],["type","password","formControlName","confirm","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required",""],["type","email","formControlName","email","placeholder","vous@exemple.tn","required",""],["type","button",1,"link","small",3,"click"],[1,"row-2"],["type","text","formControlName","name","placeholder","Nom et Pr\xE9nom","required",""],["type","tel","formControlName","phone","placeholder","+216 ..."],["type","text","formControlName","address","placeholder","Rue, ville..."],[1,"muted"],[1,"notice-ok"],[1,"error"],[1,"switch"],["type","button",1,"link",3,"click"],[1,"social"],["type","button",1,"btn","social-btn","google",3,"click"],[1,"icon"],["viewBox","0 0 48 48","width","20","height","20","aria-hidden","true"],["fill","#FFC107","d","M43.6 20.5H42V20H24v8h11.3C33.6 32.3 29.2 35 24 35c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.2 0 6.2 1.2 8.5 3.1l5.7-5.7C34.9 6.1 29.7 4 24 4 16 4 9.1 8.1 6.3 14.7z"],["fill","#FF3D00","d","M6.3 14.7l6.6 4.8C14.4 16 18.8 13 24 13c3.2 0 6.2 1.2 8.5 3.1l5.7-5.7C34.9 6.1 29.7 4 24 4 16 4 9.1 8.1 6.3 14.7z"],["fill","#4CAF50","d","M24 46c5.1 0 9.8-1.9 13.4-5l-6.2-5.1C29.1 37.3 26.7 38 24 38c-5.1 0-9.4-3.3-10.9-7.8l-6.7 5.1C9.2 41 16 46 24 46z"],["fill","#1976D2","d","M43.6 20.5H42V20H24v8h11.3c-1.3 3.8-4.6 6.8-8.6 7.6l6.2 5.1C36.1 39.1 40 33.2 40 26c0-1.6-.2-3.1-.4-4.5z"]],template:function(e,t){if(e&1&&f(0,Vi,4,0,"button",4)(1,Di,9,5,"ng-template",null,0,ge)(3,Ni,1,0,"div",5)(4,Wi,21,16,"div",6),e&2){let o=ue(2);d("ngIf",!t.isLoggedIn())("ngIfElse",o),l(3),d("ngIf",t.open()),l(),d("ngIf",t.open())}},dependencies:[ke,T,pn,Pe,Ie,tt,ne,ie,et,yn,Pn,wn,On],styles:[".header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:800;padding:12px 16px;display:flex;align-items:center;gap:14px;background:#1218268c;-webkit-backdrop-filter:blur(20px) saturate(150%);backdrop-filter:blur(20px) saturate(150%);border-bottom:1px solid rgba(255,255,255,.06);border-radius:16px}.header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:0}app-header-brand[_ngcontent-%COMP%], app-header-search[_ngcontent-%COMP%], app-header-nav-desktop[_ngcontent-%COMP%], app-header-user[_ngcontent-%COMP%], app-header-cart[_ngcontent-%COMP%], app-header-menu-toggle[_ngcontent-%COMP%]{display:inline-flex}app-header-brand[_ngcontent-%COMP%]{flex:0 0 auto}app-header-nav-desktop[_ngcontent-%COMP%]{flex:0 0 auto}app-header-user[_ngcontent-%COMP%]{flex:0 0 auto}app-header-search[_ngcontent-%COMP%]{flex:1 1 520px;min-width:280px}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:0 0 auto}@media (max-width: 1200px){app-header-search[_ngcontent-%COMP%]{flex-basis:420px}}@media (max-width: 992px){app-header-search[_ngcontent-%COMP%]{flex-basis:360px;min-width:220px}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px;padding:10px 12px}app-header-nav-desktop[_ngcontent-%COMP%]{display:none!important}app-header-brand[_ngcontent-%COMP%]{order:1}app-header-user[_ngcontent-%COMP%]{order:2}.header-right[_ngcontent-%COMP%]{order:3;margin-left:auto;gap:8px}app-header-search[_ngcontent-%COMP%]{order:4;flex:1 0 100%;min-width:100%;width:100%}}@media (max-width: 380px){.header[_ngcontent-%COMP%]{padding:8px 10px;border-radius:12px}}app-header-search[_ngcontent-%COMP%]   .searchbar[_ngcontent-%COMP%], app-header-search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}app-header-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:44px;font-size:16px}.user-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--text);display:inline-flex;align-items:center;justify-content:center;padding:6px;border-radius:10px;cursor:pointer;transition:color .2s,transform .15s}.user-btn[_ngcontent-%COMP%]:hover{color:var(--accent);transform:scale(1.05)}.user-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.user-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 10px;border-radius:12px;cursor:pointer;background:#ffffff0a;border:1px solid rgba(255,255,255,.08);color:var(--text);transition:background .2s,border-color .2s,transform .1s;position:relative;margin-left:25px}.user-chip[_ngcontent-%COMP%]:hover{background:#22d3ee1a;border-color:#22d3ee40}.user-chip[_ngcontent-%COMP%]:active{transform:translateY(1px)}.avatar-img[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;object-fit:cover;display:block}.avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,var(--primary),var(--accent));color:#0b0f1a;font-weight:800;font-size:12px}.name[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.chev[_ngcontent-%COMP%]{opacity:.7}@media (max-width: 768px){.user-chip[_ngcontent-%COMP%]{padding:4px 6px;gap:6px;border-radius:10px}.user-chip[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .chev[_ngcontent-%COMP%]{display:none}.avatar[_ngcontent-%COMP%]{width:22px;height:22px;font-size:11px}}.user-menu[_ngcontent-%COMP%]{position:absolute;right:85px;margin-top:8px;z-index:900;background:#121826f5;-webkit-backdrop-filter:blur(14px) saturate(160%);backdrop-filter:blur(14px) saturate(160%);border:1px solid rgba(255,255,255,.08);border-radius:12px;box-shadow:0 10px 26px #00000059;padding:8px;display:grid;gap:4px}.user-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#e5e7eb;text-align:left;padding:8px 10px;border-radius:8px;cursor:pointer}.user-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff0f;color:var(--accent)}.header-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]   app-header-menu-toggle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px}body.modal-open[_ngcontent-%COMP%]{position:fixed;width:100%;overflow:hidden}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0000;-webkit-backdrop-filter:blur(5px) saturate(120%);backdrop-filter:blur(5px) saturate(120%);animation:_ngcontent-%COMP%_modalFadeIn .28s ease forwards;z-index:980}.modal[_ngcontent-%COMP%]{position:fixed;inset:250px 0 0;z-index:990;display:flex;align-items:center;justify-content:center;padding:clamp(12px,2vw,20px);pointer-events:none}.modal-panel[_ngcontent-%COMP%]{pointer-events:auto;width:min(96vw,720px);max-height:90vh;overflow-y:auto;display:grid;grid-template-rows:auto 1fr;background:linear-gradient(180deg,#121826f5,#0f1420f5);-webkit-backdrop-filter:blur(18px) saturate(170%);backdrop-filter:blur(18px) saturate(170%);border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:0 40px 90px #0000008c,inset 0 0 0 1px #ffffff08;animation:_ngcontent-%COMP%_modalScaleIn .26s cubic-bezier(.2,.7,.2,1) forwards;transform-origin:center center}.modal.is-register[_ngcontent-%COMP%]   .modal-panel[_ngcontent-%COMP%]{width:min(96vw,900px)}.modal-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 18px;background:radial-gradient(80% 120% at 0% 0%,rgba(79,70,229,.12) 0%,transparent 55%),linear-gradient(180deg,#ffffff08,#fff0);border-bottom:1px solid rgba(255,255,255,.06)}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:clamp(18px,2.4vw,22px);font-weight:800;letter-spacing:.2px;color:var(--accent);text-shadow:0 0 24px rgba(34,211,238,.25)}.close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:var(--muted);font-size:22px;line-height:1;border-radius:10px;padding:6px 10px;transition:background .2s ease,color .2s ease,transform .1s ease}.close[_ngcontent-%COMP%]:hover{background:#ffffff0f;color:var(--accent)}.close[_ngcontent-%COMP%]:active{transform:translateY(1px)}.close[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.modal-body[_ngcontent-%COMP%]{display:grid;gap:20px;grid-template-columns:1fr;padding:clamp(14px,2.2vw,20px);overflow:auto;-webkit-overflow-scrolling:touch}@media (min-width: 860px){.modal.is-register[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{grid-template-columns:1.2fr .8fr;gap:28px}}.fields[_ngcontent-%COMP%]{display:grid;gap:14px;align-content:start}.field[_ngcontent-%COMP%]{display:grid;gap:8px;position:relative}label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;letter-spacing:.2px;color:var(--muted)}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border-radius:14px;border:1px solid rgba(255,255,255,.11);background:linear-gradient(180deg,#0b1222,#0d1528);color:var(--text);transition:border .15s ease,box-shadow .2s ease,transform .05s ease}input[_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{border-color:#ffffff2e}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#22d3ee99;box-shadow:0 0 0 3px #22d3ee33}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#7f8aa3}.row-2[_ngcontent-%COMP%]{display:grid;gap:12px;grid-template-columns:1fr 1fr}@media (max-width: 560px){.row-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}.error[_ngcontent-%COMP%]{margin-top:-4px;color:var(--danger);font-size:13px;font-weight:600}.pwd-meter[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin-top:-2px}.pwd-meter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:6px;border-radius:999px;background:#ffffff1a}.pwd-meter[_ngcontent-%COMP%]   span.active-1[_ngcontent-%COMP%]{background:#ef4444}.pwd-meter[_ngcontent-%COMP%]   span.active-2[_ngcontent-%COMP%]{background:#f59e0b}.pwd-meter[_ngcontent-%COMP%]   span.active-3[_ngcontent-%COMP%]{background:#10b981}.pwd-meter[_ngcontent-%COMP%]   span.active-4[_ngcontent-%COMP%]{background:#22d3ee}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:5px 16px;border-radius:14px;font-weight:700;cursor:pointer;border:1px solid transparent;transition:transform .1s ease,background .2s ease,box-shadow .2s ease,filter .2s ease}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary),#5b4df0);color:#fff;box-shadow:0 16px 36px #4f46e559}.btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.06)}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:var(--text);border-color:#ffffff29}.btn-outline[_ngcontent-%COMP%]:hover{border-color:#ffffff52}.switch[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:6px;font-size:14px;color:var(--muted)}.switch[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:var(--accent);text-decoration:underline;font-weight:700}.social[_ngcontent-%COMP%]{display:grid;gap:12px;align-content:start;padding:12px;border:1px dashed rgba(255,255,255,.1);border-radius:14px;background:#ffffff08}.social-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.08);cursor:pointer;font-weight:700;font-size:15px;transition:transform .08s ease,box-shadow .2s ease,filter .2s ease}.social-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 22px #00000047}.social-btn.google[_ngcontent-%COMP%]{background:#fff;color:#222;border-color:#fff}.social-btn.google[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#ea4335}.social-btn.facebook[_ngcontent-%COMP%]{background:#1877f2;color:#fff;border-color:#1877f2}.social-btn.facebook[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#fff}.modal-panel.shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalShake .34s cubic-bezier(.36,.07,.19,.97)}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalScaleIn{0%{opacity:0;transform:translateY(-8px) scale(.97)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_modalShake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}.modal[_ngcontent-%COMP%]   [tabindex][_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{outline:none}.modal[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.w-full[_ngcontent-%COMP%]{width:100%}.avatar-img[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;object-fit:cover;box-shadow:0 0 0 2px #ffffff14}.link.small[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent);text-decoration:underline;font-size:12px;margin-top:6px;cursor:pointer}.notice-ok[_ngcontent-%COMP%]{margin:8px 0 0;background:#10b98126;border:1px solid rgba(16,185,129,.35);color:#d1fae5;padding:8px 10px;border-radius:10px}.error[_ngcontent-%COMP%]{color:#ef4444;margin-top:8px}"]})};var ut=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header-topbar"]],decls:35,vars:0,consts:[[1,"topbar"],[1,"promo"],[1,"right"],["aria-label","R\xE9seaux sociaux",1,"socials"],[1,"social-icons-wrapper"],["rel","noopener noreferrer nofollow","href","https://www.facebook.com","target","_blank","aria-label","Lien Facebook",1,"social-icon","facebook"],[1,"icon-bg"],[1,"icon-inner"],["viewBox","0 0 24 24","width","16","height","16"],["d","M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"],[1,"pulse-effect"],["rel","noopener noreferrer nofollow","href","https://www.instagram.com","target","_blank","aria-label","Lien Instagram",1,"social-icon","instagram"],["fill","url(#instagramGradient)","d","M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7Zm10 2c1.7 0 3 1.3 3 3v10c0 1.7-1.3 3-3 3H7c-1.7 0-3-1.3-3-3V7c0-1.7 1.3-3 3-3h10Zm-5 3a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm4.8-.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z"],["rel","noopener noreferrer nofollow","href","#","target","_blank","aria-label","Lien YouTube",1,"social-icon","youtube"],["d","M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"],["rel","noopener noreferrer nofollow","href","https://www.tiktok.com","target","_blank","aria-label","Lien TikTok",1,"social-icon","tiktok"],["d","M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"],["routerLink","/contact",1,"contact-btn"],[1,"btn-icon"],[1,"btn-text"],[1,"btn-hover-effect"]],template:function(e,t){e&1&&(r(0,"div",0),m(1,"div",1),r(2,"div",2)(3,"nav",3)(4,"div",4)(5,"a",5),m(6,"span",6),r(7,"span",7),L(),r(8,"svg",8),m(9,"path",9),a()(),ee(),m(10,"span",10),a(),r(11,"a",11),m(12,"span",6),r(13,"span",7),L(),r(14,"svg",8),m(15,"path",12),a()(),ee(),m(16,"span",10),a(),r(17,"a",13),m(18,"span",6),r(19,"span",7),L(),r(20,"svg",8),m(21,"path",14),a()(),ee(),m(22,"span",10),a(),r(23,"a",15),m(24,"span",6),r(25,"span",7),L(),r(26,"svg",8),m(27,"path",16),a()(),ee(),m(28,"span",10),a()()(),r(29,"a",17)(30,"span",18),c(31,"\u{1F4DE}"),a(),r(32,"span",19),c(33,"CONTACTER-NOUS"),a(),m(34,"span",20),a()()())},dependencies:[Z],styles:['.topbar[_ngcontent-%COMP%]{--tb-text: #fff;--tb-border: rgba(255,255,255,.08);position:relative;z-index:40;display:flex;align-items:center;justify-content:space-between;gap:14px;padding:12px 16px;color:var(--tb-text);font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial;letter-spacing:.25px;text-transform:uppercase;backdrop-filter:blur(10px);margin-top:-17px}.right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.social-icons-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.social-icon[_ngcontent-%COMP%]{position:relative;width:36px;height:36px;display:inline-grid;place-items:center;border-radius:12px;text-decoration:none;background:#ffffff14;border:1px solid rgba(255,255,255,.12);transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.social-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:currentColor;opacity:0;transition:opacity .3s ease}.social-icon[_ngcontent-%COMP%]:hover:before{opacity:.1}.icon-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background:currentColor;opacity:0;transition:opacity .3s ease}.icon-inner[_ngcontent-%COMP%]{position:relative;z-index:2;display:grid;place-items:center;width:100%;height:100%;transition:transform .3s ease}.icon-inner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;fill:currentColor;transition:transform .3s ease}.pulse-effect[_ngcontent-%COMP%]{position:absolute;inset:-2px;border-radius:14px;border:2px solid currentColor;opacity:0;transform:scale(.8);transition:all .4s ease}.social-icon.facebook[_ngcontent-%COMP%]{color:#1877f2}.social-icon.facebook[_ngcontent-%COMP%]:hover{background:#1877f226;border-color:#1877f266;transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #1877f24d}.social-icon.facebook[_ngcontent-%COMP%]:hover   .icon-inner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.social-icon.facebook[_ngcontent-%COMP%]:hover   .pulse-effect[_ngcontent-%COMP%]{opacity:.6;transform:scale(1);animation:_ngcontent-%COMP%_pulse-facebook 2s infinite}@keyframes _ngcontent-%COMP%_pulse-facebook{0%,to{opacity:.6;transform:scale(1)}50%{opacity:.3;transform:scale(1.1)}}.social-icon.instagram[_ngcontent-%COMP%]{color:transparent;background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888);background-clip:text;-webkit-background-clip:text}.social-icon.instagram[_ngcontent-%COMP%]   .icon-inner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fffaf0}.social-icon.instagram[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#f09433ba,#e6683cbf,#dc2743b3,#cc2366b5,#bc1888);transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #dc27434d}.social-icon.instagram[_ngcontent-%COMP%]:hover   .icon-inner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff;transform:scale(1.1) rotate(5deg)}.social-icon.instagram[_ngcontent-%COMP%]:hover   .pulse-effect[_ngcontent-%COMP%]{opacity:.8;transform:scale(1);animation:_ngcontent-%COMP%_pulse-instagram 2s infinite}@keyframes _ngcontent-%COMP%_pulse-instagram{0%,to{opacity:.8;transform:scale(1)}50%{opacity:.4;transform:scale(1.1)}}.social-icon.youtube[_ngcontent-%COMP%]{color:red}.social-icon.youtube[_ngcontent-%COMP%]:hover{background:#ff000026;border-color:#f006;transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #ff00004d}.social-icon.youtube[_ngcontent-%COMP%]:hover   .icon-inner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.social-icon.youtube[_ngcontent-%COMP%]:hover   .pulse-effect[_ngcontent-%COMP%]{opacity:.6;transform:scale(1);animation:_ngcontent-%COMP%_pulse-youtube 2s infinite}@keyframes _ngcontent-%COMP%_pulse-youtube{0%,to{opacity:.6;transform:scale(1)}50%{opacity:.3;transform:scale(1.1)}}.social-icon.tiktok[_ngcontent-%COMP%]{color:#000}.social-icon.tiktok[_ngcontent-%COMP%]:hover{background:#00000026;border-color:#0006;transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #0000004d}.social-icon.tiktok[_ngcontent-%COMP%]:hover   .icon-inner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.social-icon.tiktok[_ngcontent-%COMP%]:hover   .pulse-effect[_ngcontent-%COMP%]{opacity:.6;transform:scale(1);animation:_ngcontent-%COMP%_pulse-tiktok 2s infinite}@keyframes _ngcontent-%COMP%_pulse-tiktok{0%,to{opacity:.6;transform:scale(1)}50%{opacity:.3;transform:scale(1.1)}}.contact-btn[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;gap:8px;color:#fff;text-decoration:none;padding:10px 18px;border-radius:50px;background:linear-gradient(135deg,#22d3ee33,#22d3ee1a);border:1px solid rgba(34,211,238,.3);font-weight:700;font-size:11px;letter-spacing:.5px;transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.contact-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(34,211,238,.3),transparent);opacity:0;transition:opacity .3s ease}.contact-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#22d3ee4d,#22d3ee33);border-color:#22d3ee80;transform:translateY(-2px);box-shadow:0 8px 25px #22d3ee40}.contact-btn[_ngcontent-%COMP%]:hover:before{opacity:1}.contact-btn[_ngcontent-%COMP%]:hover   .btn-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(10deg)}.contact-btn[_ngcontent-%COMP%]:hover   .btn-text[_ngcontent-%COMP%]{transform:translate(2px)}.btn-icon[_ngcontent-%COMP%]{font-size:14px;transition:transform .3s ease}.btn-text[_ngcontent-%COMP%]{transition:transform .3s ease}.btn-hover-effect[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(circle at center,rgba(34,211,238,.1),transparent 70%);opacity:0;transition:opacity .3s ease}.contact-btn[_ngcontent-%COMP%]:hover   .btn-hover-effect[_ngcontent-%COMP%]{opacity:1}svg[_ngcontent-%COMP%]   defs[_ngcontent-%COMP%]{position:absolute}@media (max-width: 820px){.topbar[_ngcontent-%COMP%]{padding:10px 165px}.right[_ngcontent-%COMP%]{gap:12px}.social-icon[_ngcontent-%COMP%]{width:32px;height:32px}.contact-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:10px}}@media (max-width: 560px){.promo[_ngcontent-%COMP%]{display:none}.social-icons-wrapper[_ngcontent-%COMP%]{gap:6px}.social-icon[_ngcontent-%COMP%]{width:30px;height:30px}.contact-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.contact-btn[_ngcontent-%COMP%]{padding:8px;border-radius:50%;width:32px;height:32px;justify-content:center}}.social-icon[_ngcontent-%COMP%]:focus-visible, .contact-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid rgba(34,211,238,.8);outline-offset:2px}']})};var gt=class i{open=O(!1);toggleMenu(){this.open.update(n=>!n)}closeMenu(){this.open.set(!1)}onSearch(n){console.log("search:",n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header"]],decls:10,vars:1,consts:[[1,"header"],[3,"submitSearch"],[1,"header-right"],[3,"toggle"],[3,"closed","open"]],template:function(e,t){e&1&&(m(0,"app-header-topbar"),r(1,"header",0),m(2,"app-header-brand"),r(3,"app-header-search",1),h("submitSearch",function(s){return t.onSearch(s)}),a(),m(4,"app-header-user"),r(5,"div",2),m(6,"app-header-cart"),r(7,"app-header-menu-toggle",3),h("toggle",function(){return t.toggleMenu()}),a()()(),m(8,"app-header-nav-desktop"),r(9,"app-header-nav-mobile",4),h("closed",function(){return t.closeMenu()}),a()),e&2&&(l(9),d("open",t.open()))},dependencies:[ot,dt,rt,at,st,lt,pt,ut],styles:[".header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;backdrop-filter:blur(18px) saturate(150%);-webkit-backdrop-filter:blur(18px) saturate(150%);background:#12182699;border-bottom:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:space-between;gap:16px;padding:5px 18px;border-radius:30px}@media (max-width: 768px){.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:nowrap;padding:10px 12px}app-header-nav-desktop[_ngcontent-%COMP%]{display:none!important}app-header-brand[_ngcontent-%COMP%]{flex:0 0 auto}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:auto}app-header-user[_ngcontent-%COMP%], app-header-cart[_ngcontent-%COMP%], app-header-menu-toggle[_ngcontent-%COMP%]{flex:0 0 auto}.searchbar.desktop[_ngcontent-%COMP%]{display:none}.searchbar.mobile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.searchbar.mobile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.searchbar.mobile.open[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;position:absolute;top:60px;left:10px;right:10px;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0e1525;z-index:1000}}.header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;backdrop-filter:blur(18px) saturate(150%);-webkit-backdrop-filter:blur(18px) saturate(150%);background:#12182699;border-bottom:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:space-between;gap:16px;padding:10px 18px;border-radius:30px}@media (max-width: 768px){.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:0px;flex-wrap:nowrap;padding:7px 5px}app-header-nav-desktop[_ngcontent-%COMP%]{display:none!important}app-header-brand[_ngcontent-%COMP%]{flex:0 0 auto}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:auto}app-header-user[_ngcontent-%COMP%], app-header-cart[_ngcontent-%COMP%], app-header-menu-toggle[_ngcontent-%COMP%]{flex:0 0 auto}.searchbar.desktop[_ngcontent-%COMP%]{display:none}.searchbar.mobile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.searchbar.mobile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.searchbar.mobile.open[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;position:absolute;top:60px;left:10px;right:10px;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0e1525;z-index:1000}}.no-stack[_ngcontent-%COMP%]{position:relative;z-index:1;transform:none!important;filter:none!important;backdrop-filter:none!important}"]})};function Ki(i,n){if(i&1&&(r(0,"div",2),m(1,"span",3),c(2),a()),i&2){let e=n.$implicit;d("ngClass",e.kind),l(2),E("",e.text," ")}}var mt=class i{toast=w(He);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-toasts"]],decls:2,vars:1,consts:[[1,"toasts"],["class","toast",3,"ngClass",4,"ngFor","ngForOf"],[1,"toast",3,"ngClass"],[1,"dot"]],template:function(e,t){e&1&&(r(0,"div",0),f(1,Ki,3,2,"div",1),a()),e&2&&(l(),d("ngForOf",t.toast.list()))},dependencies:[A,Ke],styles:[".toasts[_ngcontent-%COMP%]{position:fixed;right:30px;top:90px;display:grid;gap:10px;z-index:9999}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#121826f5;border:1px solid rgba(255,255,255,.08);padding:10px 12px;border-radius:12px;box-shadow:0 10px 24px #00000059;color:#e5e7eb;min-width:220px;animation:_ngcontent-%COMP%_fadeIn .55s ease}.toast.success[_ngcontent-%COMP%]{border-color:#10b98159}.toast.error[_ngcontent-%COMP%]{border-color:#ef444459}.toast.info[_ngcontent-%COMP%]{border-color:#22d3ee59}.dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.success[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#10b98187}.error[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#ef4444ad}.info[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#22d3eea8}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}"]})};var ht=class i{catsApi=w(Se);subsApi=w(Ee);prodApi=w(ae);loading=O(!0);categories=O([]);open=O(!1);activeCatId=O(null);activeSubId=O(null);subCache=new Map;prodCache=new Map;ngOnInit(){return Y(this,null,function*(){try{this.loading.set(!0);let n=yield this.catsApi.list().toPromise();this.categories.set((n||[]).filter(e=>e.isActive))}finally{this.loading.set(!1)}})}onEnterSub(n){return Y(this,null,function*(){if(this.activeSubId.set(n._id),!this.prodCache.has(n._id)){let e=yield this.prodApi.listBySubcategory(n._id,6).toPromise();this.prodCache.set(n._id,e?.items||[])}})}subsOf(n){return this.subCache.get(n)||[]}prodsOf(n){return this.prodCache.get(n)||[]}toggle(){this.open.update(n=>!n)}close(){this.open.set(!1),this.activeCatId.set(null),this.activeSubId.set(null)}getUrl=W;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-subnav-mega"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})};function Zi(i,n){i&1&&m(0,"app-header")}function Xi(i,n){i&1&&m(0,"app-subnav-mega")}function Ji(i,n){i&1&&m(0,"app-footer")}var ft=class i{constructor(n){this.router=n;this.router.events.pipe(Oe(e=>e instanceof Xe)).subscribe(()=>{let e=this.router.routerState.root;console.log(e);let t=e.firstChild,o=!1;for(;t;)o=!!t.snapshot.data?.hideShell||o,t=t.firstChild;this.hideShell.set(o),console.log(this.hideShell())})}title="4tek";hideShell=O(!1);static \u0275fac=function(e){return new(e||i)(j(te))};static \u0275cmp=M({type:i,selectors:[["app-root"]],decls:6,vars:3,consts:[[1,"container"],[4,"ngIf"]],template:function(e,t){e&1&&(r(0,"div",0),f(1,Zi,1,0,"app-header",1)(2,Xi,1,0,"app-subnav-mega",1),m(3,"router-outlet")(4,"app-toasts"),f(5,Ji,1,0,"app-footer",1),a()),e&2&&(l(),d("ngIf",!t.hideShell()),l(),d("ngIf",!t.hideShell()),l(3),d("ngIf",!t.hideShell()))},dependencies:[Je,it,gt,T,mt,ht],encapsulation:2})};function eo(i,n){if(i&1){let e=P();r(0,"div",10)(1,"div",11),m(2,"img",12),r(3,"div",13),c(4),a()(),r(5,"div",14),c(6),H(7,"currency"),a(),r(8,"div",15)(9,"button",16),h("click",function(){let o=x(e).index,s=p();return _(s.cart.dec(o))}),c(10,"\u2212"),a(),r(11,"input",17),$e("ngModelChange",function(o){let s=x(e).index,g=p();return Qe(g.cart.items()[s].qty,o)||(g.cart.items()[s].qty=o),_(o)}),h("change",function(){let o=x(e).index,s=p();return _(s.cart.setQty(o,s.cart.items()[o].qty))}),a(),r(12,"button",18),h("click",function(){let o=x(e).index,s=p();return _(s.cart.inc(o))}),c(13,"\uFF0B"),a()(),r(14,"div",19),c(15),H(16,"currency"),a(),r(17,"button",20),h("click",function(){let o=x(e).index,s=p();return _(s.cart.remove(o))}),c(18,"\u{1F5D1}\uFE0F"),a()()}if(i&2){let e=n.$implicit,t=n.index,o=p();l(2),d("src",e.imageUrl||"assets/images/placeholder.jpg",F)("alt",e.name),l(2),y(e.name),l(2),y(X(7,6,e.price,"TND")),l(5),Ye("ngModel",o.cart.items()[t].qty),l(4),y(X(16,9,e.price*e.qty,"TND"))}}function to(i,n){i&1&&(r(0,"div",21),c(1,"Votre panier est vide."),a())}var bt=class i{cart=w(xe);ngOnInit(){console.log(this.cart.items())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-cart"]],decls:33,vars:10,consts:[[1,"cart-page"],[1,"layout"],[1,"table"],[1,"thead"],["class","row",4,"ngFor","ngForOf"],["class","empty",4,"ngIf"],[1,"summary"],[1,"sum-row"],[1,"sum-row","total"],[1,"btn-primary","w-full"],[1,"row"],[1,"prod"],[3,"src","alt"],[1,"name"],[1,"price"],[1,"qty"],["type","button","aria-label","Moins",3,"click"],["type","number","min","1",3,"ngModelChange","change","ngModel"],["type","button","aria-label","Plus",3,"click"],[1,"line-total"],["type","button","aria-label","Supprimer",1,"remove",3,"click"],[1,"empty"]],template:function(e,t){e&1&&(r(0,"section",0)(1,"h1"),c(2,"Panier"),a(),r(3,"div",1)(4,"div",2)(5,"div",3)(6,"span"),c(7,"Article"),a(),r(8,"span"),c(9,"Prix"),a(),r(10,"span"),c(11,"Qt\xE9"),a(),r(12,"span"),c(13,"Sous-total"),a()(),f(14,eo,19,12,"div",4)(15,to,2,0,"div",5),a(),r(16,"aside",6)(17,"h2"),c(18,"Sommaire"),a(),r(19,"div",7)(20,"span"),c(21,"Sous-total"),a(),r(22,"strong"),c(23),H(24,"currency"),a()(),r(25,"div",8)(26,"span"),c(27,"Total de la commande"),a(),r(28,"strong"),c(29),H(30,"currency"),a()(),r(31,"button",9),c(32,"PASSER \xC0 LA CAISSE"),a()()()()),e&2&&(l(14),d("ngForOf",t.cart.items()),l(),d("ngIf",!t.cart.items().length),l(8),y(X(24,4,t.cart.subtotal(),"TND")),l(6),y(X(30,7,t.cart.subtotal(),"TND")))},dependencies:[A,me,se,ne,Te,ie,Ve,fe,T],styles:["[_ngcontent-%COMP%]:root{--surface: rgba(255,255,255,.06);--border: rgba(255,255,255,.12);--text: #e5e7eb;--muted: #9ca3af;--accent: #22d3ee;--success: #22c55e;--shadow-1: 0 10px 30px rgba(0,0,0,.28)}.cart-page[_ngcontent-%COMP%]{max-width:1200px;margin:28px auto;padding:0 16px;color:var(--text)}.cart-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 18px;font-size:24px;font-weight:800;letter-spacing:.2px}.layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) 340px;gap:24px}@media (max-width: 980px){.layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.table[_ngcontent-%COMP%]{background:#12182699;backdrop-filter:blur(14px) saturate(150%);-webkit-backdrop-filter:blur(14px) saturate(150%);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow-1);overflow:hidden}.thead[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(240px,1fr) 140px 160px 160px;gap:14px;align-items:center;padding:14px 16px}.thead[_ngcontent-%COMP%]{font-weight:800;color:var(--muted);background:#ffffff08;border-bottom:1px solid var(--border)}.row[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.06);transition:background .2s ease}.row[_ngcontent-%COMP%]:hover{background:#ffffff08}.prod[_ngcontent-%COMP%]{display:grid;grid-template-columns:116px 1fr;gap:12px;align-items:center}.prod[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:116px;height:116px;object-fit:cover;border-radius:10px;background:#0e1525;border:1px solid var(--border)}.name[_ngcontent-%COMP%]{font-weight:700;line-height:1.3}.price[_ngcontent-%COMP%], .line-total[_ngcontent-%COMP%]{font-weight:800;font-size:15px;letter-spacing:.2px}.qty[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:#ffffff0a;border:1px solid var(--border);border-radius:10px;padding:6px 8px}.qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:56px;text-align:center;border:none;outline:none;background:transparent;color:var(--text);font-weight:700}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;border:none;cursor:pointer;border-radius:8px;background:#ffffff0f;color:var(--text);transition:background .2s ease,transform .05s ease}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.row[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:14px;bottom:14px;border:none;background:#ffffff0f;color:var(--muted);width:32px;height:32px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s ease,color .2s ease}.row[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:var(--text)}.empty[_ngcontent-%COMP%]{padding:22px;color:var(--muted)}.summary[_ngcontent-%COMP%]{position:sticky;top:16px;background:#121826b3;backdrop-filter:blur(14px) saturate(160%);-webkit-backdrop-filter:blur(14px) saturate(160%);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow-1);padding:16px;height:fit-content}.summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:18px;font-weight:800}.sum-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.08);color:var(--muted)}.sum-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text)}.sum-row.total[_ngcontent-%COMP%]{border:none;font-size:16px;padding-top:16px}.btn-primary[_ngcontent-%COMP%]{width:100%;background:var(--success);color:#0b0f1a;border:none;border-radius:12px;padding:12px 14px;font-weight:900;letter-spacing:.3px;cursor:pointer;margin-top:14px;transition:filter .2s ease,transform .05s ease}.btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.05)}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}@media (max-width: 820px){.thead[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr)}.price[_ngcontent-%COMP%], .line-total[_ngcontent-%COMP%]{justify-self:end}.row[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{right:10px;top:10px;bottom:auto}.prod[_ngcontent-%COMP%]{grid-template-columns:92px 1fr}.prod[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:92px;height:92px}}"]})};function no(i,n){if(i&1&&(r(0,"div",28),c(1),a()),i&2){let e=p(2);l(),E("-",e.discount(),"%")}}function io(i,n){if(i&1){let e=P();r(0,"button",31),h("click",function(){let o=x(e).index,s=p(3);return _(s.selectImage(o))}),m(1,"img",4),a()}if(i&2){let e=n.$implicit,t=n.index,o=p(2).ngIf,s=p();S("active",t===s.activeIndex()),re("aria-label","Voir image "+(t+1)),l(),d("src",s.getUrl(e),F)("alt",o.name+" "+(t+1))}}function oo(i,n){if(i&1&&(r(0,"div",29),f(1,io,2,5,"button",30),a()),i&2){let e=p(2);l(),d("ngForOf",e.images())}}function ro(i,n){if(i&1&&m(0,"img",32),i&2){let e=p().ngIf,t=p();d("src",t.getUrl(e.brands==null?null:e.brands.iconUrl),F)("alt",(e.brands==null?null:e.brands.name)||"brand")}}function ao(i,n){if(i&1&&(r(0,"span",33),c(1),a()),i&2){let e=p().ngIf;l(),y(e.brands==null?null:e.brands.name)}}function so(i,n){if(i&1&&(r(0,"div",34),c(1,"R\xE9f\xE9rence#: "),r(2,"strong"),c(3),a()()),i&2){let e=p().ngIf;l(3),y(e.sku)}}function lo(i,n){if(i&1&&(r(0,"span",37),c(1),a()),i&2){let e=p(3);l(),E("-",e.discount(),"%")}}function co(i,n){if(i&1&&(r(0,"div",35)(1,"s"),c(2),H(3,"currency"),a(),f(4,lo,2,1,"span",36),a()),i&2){let e=p().ngIf,t=p();l(2),y(Re(3,2,e.oldPrice,e.currency||"TND","symbol","1.0-3")),l(2),d("ngIf",t.discount())}}function po(i,n){if(i&1&&(r(0,"li"),c(1),a()),i&2){let e=n.$implicit;l(),Me(" ",e.key," : ",e.value," ")}}function uo(i,n){if(i&1&&(r(0,"div",38)(1,"h3"),c(2,"Caract\xE9ristiques principales"),a(),r(3,"ul"),f(4,po,2,2,"li",39),H(5,"keyvalue"),H(6,"slice"),a()()),i&2){let e=p().ngIf;l(4),d("ngForOf",ye(6,3,we(5,1,e.specs),0,7))}}function go(i,n){if(i&1&&(r(0,"span",42),c(1),a()),i&2){let e=n.$implicit;l(),y(e)}}function mo(i,n){if(i&1&&(r(0,"div",40),f(1,go,2,1,"span",41),a()),i&2){let e=p().ngIf;l(),d("ngForOf",e.tags)}}function ho(i,n){if(i&1&&(r(0,"div",43),c(1),a()),i&2){let e=p().ngIf;l(),E(" ",e.description," ")}}function fo(i,n){if(i&1){let e=P();r(0,"section",1)(1,"div",2)(2,"div",3),m(3,"img",4),f(4,no,2,1,"div",5),a(),f(5,oo,2,1,"div",6),a(),r(6,"aside",7)(7,"h1",8),c(8),a(),r(9,"div",9)(10,"span",10),c(11),a(),f(12,ro,1,2,"img",11)(13,ao,2,1,"span",12),a(),f(14,so,4,1,"div",13),r(15,"div",14)(16,"div",15),c(17),H(18,"currency"),a(),f(19,co,5,7,"div",16),a(),r(20,"div",17)(21,"label",18),c(22,"Quantit\xE9"),a(),r(23,"div",19)(24,"button",20),h("click",function(){x(e);let o=p();return _(o.dec())}),c(25,"\u2212"),a(),r(26,"input",21),h("ngModelChange",function(o){x(e);let s=p();return _(s.qty.set(s.Math.max(1,s.Math.min(99,+o||1))))}),a(),r(27,"button",22),h("click",function(){x(e);let o=p();return _(o.inc())}),c(28,"\uFF0B"),a()(),r(29,"button",23),h("click",function(){x(e);let o=p();return _(o.addToCart())}),c(30," Ajouter au panier "),a()(),f(31,uo,7,7,"div",24),H(32,"keyvalue"),f(33,mo,2,1,"div",25)(34,ho,2,1,"div",26),r(35,"div",27)(36,"strong"),c(37,"Livraison"),a(),c(38," : Gratuite \u2014 "),r(39,"small"),c(40,"Exp\xE9dition en 24h"),a()()()()}if(i&2){let e,t,o,s,g,b=n.ngIf,C=p();l(3),d("src",C.getUrl(C.images()[C.activeIndex()])||"assets/images/placeholder.jpg",F)("alt",b.name),l(),d("ngIf",C.discount()),l(),d("ngIf",C.images().length>1),l(3),y(b.name),l(2),S("ok",((e=b.stock)!==null&&e!==void 0?e:0)>0)("ko",!((t=b.stock)!==null&&t!==void 0&&t)),l(),E(" \u25CF ",((o=b.stock)!==null&&o!==void 0?o:0)>0?"En stock":"Rupture"," "),l(),d("ngIf",b.brands==null?null:b.brands.iconUrl),l(),d("ngIf",b.brands==null?null:b.brands.name),l(),d("ngIf",b.sku),l(3),y(Re(18,20,b.price,b.currency||"TND","symbol","1.0-3")),l(2),d("ngIf",b.oldPrice),l(7),d("ngModel",C.qty()),l(3),d("disabled",!((s=b.stock)!==null&&s!==void 0&&s)),l(2),d("ngIf",b.specs&&((g=we(32,25,b.specs))==null?null:g.length)),l(2),d("ngIf",b.tags==null?null:b.tags.length),l(),d("ngIf",b.description)}}var xt=class i{route=w(he);api=w(ae);cart=w(xe);product=O(null);images=O([]);activeIndex=O(0);qty=O(1);discount=sn(()=>{let n=this.product();return!n?.oldPrice||!n.price?null:Math.round((1-n.price/n.oldPrice)*100)});ngOnInit(){let n=this.route.snapshot.paramMap.get("slug");this.api.getBySlug(n).subscribe(e=>{this.product.set(e);let t=e.imageUrl?[e.imageUrl]:[],o=Array.isArray(e.gallery)?e.gallery:[];this.images.set([...t,...o]),this.activeIndex.set(0)})}selectImage(n){this.activeIndex.set(n)}inc(){this.qty.update(n=>Math.min(99,n+1))}dec(){this.qty.update(n=>Math.max(1,n-1))}addToCart(){let n=this.product();n&&this.cart.add({id:n._id,name:n.name,price:n.price,qty:this.qty(),imageUrl:this.images()[0]?W(this.images()[0]):void 0})}getUrl=W;Math=Math;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-detail"]],decls:1,vars:1,consts:[["class","detail",4,"ngIf"],[1,"detail"],[1,"gallery"],[1,"main"],[3,"src","alt"],["class","badge",4,"ngIf"],["class","thumbs",4,"ngIf"],[1,"sheet"],[1,"title"],[1,"meta"],[1,"stock"],["class","brand",3,"src","alt",4,"ngIf"],["class","brand-name",4,"ngIf"],["class","ref",4,"ngIf"],[1,"price-block"],[1,"price"],["class","old",4,"ngIf"],[1,"buy"],["for","q"],[1,"qty"],["type","button","aria-label","Diminuer",3,"click"],["id","q","type","number","min","1","max","99",3,"ngModelChange","ngModel"],["type","button","aria-label","Augmenter",3,"click"],[1,"btn-primary",3,"click","disabled"],["class","specs",4,"ngIf"],["class","tags",4,"ngIf"],["class","desc",4,"ngIf"],[1,"ship"],[1,"badge"],[1,"thumbs"],["type","button","class","thumb",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"thumb",3,"click"],[1,"brand",3,"src","alt"],[1,"brand-name"],[1,"ref"],[1,"old"],["class","save",4,"ngIf"],[1,"save"],[1,"specs"],[4,"ngFor","ngForOf"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"desc"]],template:function(e,t){e&1&&f(0,fo,41,27,"section",0),e&2&&d("ngIf",t.product())},dependencies:[T,A,se,ne,Te,ie,Ve,Mn,fe,me,Ze,Pe],styles:[".detail[_ngcontent-%COMP%]{max-width:1200px;margin:24px auto;padding:0 16px;display:grid;grid-template-columns:1.15fr .85fr;gap:22px}@media (max-width: 980px){.detail[_ngcontent-%COMP%]{grid-template-columns:1fr}}.gallery[_ngcontent-%COMP%]{background:#12182699;backdrop-filter:blur(14px) saturate(150%);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px;max-height:fit-content;box-shadow:0 10px 26px #00000040}.gallery[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{position:relative;aspect-ratio:16 / 10;background:#0e1525;border-radius:12px;overflow:hidden}.gallery[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.gallery[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;background:#ef4444;color:#fff;font-weight:800;padding:4px 8px;border-radius:999px;font-size:13px}.thumbs[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(72px,1fr);gap:10px;margin-top:12px;overflow-x:auto;padding-bottom:2px}.thumb[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);border-radius:10px;overflow:hidden;background:#0e1525;height:72px;cursor:pointer;transition:transform .12s ease,border-color .2s ease}.thumb[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#22d3ee59}.thumb.active[_ngcontent-%COMP%]{outline:2px solid #22d3ee}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.sheet[_ngcontent-%COMP%]{background:#121826b3;backdrop-filter:blur(14px) saturate(150%);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px;box-shadow:0 10px 26px #00000040}.title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:20px;font-weight:800;letter-spacing:.2px}.meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:6px}.stock[_ngcontent-%COMP%]{font-weight:700}.stock.ok[_ngcontent-%COMP%]{color:#22c55e}.stock.ko[_ngcontent-%COMP%]{color:#ef4444}.brand[_ngcontent-%COMP%]{height:18px;opacity:.9}.ref[_ngcontent-%COMP%]{color:#9ca3af;margin-bottom:10px}.price-block[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:12px;margin:8px 0 14px}.price[_ngcontent-%COMP%]{font-size:26px;font-weight:900;color:#e5e7eb}.old[_ngcontent-%COMP%]{color:#9ca3af;display:flex;align-items:baseline;gap:8px}.old[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background:#22d3ee2e;color:#22d3ee;font-weight:800;padding:2px 8px;border-radius:999px;font-size:12px}.buy[_ngcontent-%COMP%]{display:grid;grid-template-columns:160px 1fr;gap:12px;align-items:center}.buy[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#9ca3af;font-size:14px}.qty[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:#ffffff0a;border:1px solid rgba(255,255,255,.12);border-radius:10px;max-width:max-content;padding:6px 8px}.qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:56px;text-align:center;border:none;outline:none;background:transparent;color:#e5e7eb;font-weight:700}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;cursor:pointer;border-radius:8px;background:#ffffff0f;color:#e5e7eb}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.btn-primary[_ngcontent-%COMP%]{background:#22c55e;color:#0b0f1a;border:none;border-radius:10px;padding:12px 14px;font-weight:900;letter-spacing:.3px;cursor:pointer;transition:filter .2s ease,transform .05s ease}.btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.05)}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.cta-alt[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.ghost[_ngcontent-%COMP%]{background:#ffffff0f;color:#e5e7eb;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:10px 12px;cursor:pointer}.ghost[_ngcontent-%COMP%]:hover{background:#ffffff1a}.specs[_ngcontent-%COMP%]{margin-top:14px}.specs[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px}.specs[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:18px;display:grid;gap:6px}.specs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#d1d5db}.ship[_ngcontent-%COMP%]{margin-top:12px;color:#d1d5db}"]})};var _t=class i{cfg={API_BASE_URL:window.__env?.API_BASE_URL||"http://localhost:3000"};get apiBaseUrl(){return this.cfg.API_BASE_URL}static \u0275fac=function(e){return new(e||i)};static \u0275prov=pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var In=(i,n)=>{let e=w(_t);if(i.url.startsWith("/api/")){let t=e.apiBaseUrl+i.url.replace("/api","");i=i.clone({url:t})}return n(i)};var Hn=(i,n)=>{let t=w(be).token();return t&&(i=i.clone({setHeaders:{Authorization:`Bearer ${t}`}})),n(i)};var vt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-public-layout"]],decls:2,vars:0,consts:[[1,"page"]],template:function(e,t){e&1&&(r(0,"main",0),m(1,"router-outlet"),a())},dependencies:[Je],styles:[".page[_ngcontent-%COMP%]{min-height:calc(100dvh - 160px);padding:12px 0}"]})};var Ct=class i{route=w(he);router=w(te);auth=w(be);ngOnInit(){try{let n=this.route.snapshot.queryParamMap.get("data"),e=(window.location.hash||"").match(/(?:^|#|&)data=([^&]+)/),t=n||(e?e[1]:null);if(!t)throw new Error("Missing payload");let o=this.base64UrlDecode(t),s=JSON.parse(o);if(!s||s.type!=="OAUTH_RESULT"||!s.token||!s.user)throw new Error("Bad payload");this.auth.applyLogin?this.auth.applyLogin(s):(this.auth.token.set(s.token),localStorage.setItem("auth_token",s.token),localStorage.setItem("auth_user",JSON.stringify(s.user)),this.auth.user.set(s.user));try{window.opener?.postMessage(s,window.location.origin)}catch{}setTimeout(()=>{try{window.close()}catch{}},60),window.opener||this.router.navigateByUrl("/")}catch(n){console.error("OAuth complete error:",n),this.router.navigateByUrl("/")}}base64UrlDecode(n){let e=n.replace(/-/g,"+").replace(/_/g,"/"),t=e.length%4?4-e.length%4:0,o=e+"=".repeat(t);return atob(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-oauth-complete"]],decls:2,vars:0,consts:[[2,"display","grid","place-items","center","height","100dvh"]],template:function(e,t){e&1&&(r(0,"div",0),c(1,"Connexion en cours\u2026"),a())},encapsulation:2})};var Ln=(i,n)=>{let e=w(be),t=w(te),o=!!e.token(),s=e.user()?.role==="admin";return o&&s?!0:(t.navigateByUrl("/"),!1)};function bo(i,n){if(i&1){let e=P();r(0,"li",5),h("click",function(o){let s=x(e).$implicit;return p(2).choose(s.key),_(o.stopPropagation())}),c(1),a()}if(i&2){let e=n.$implicit,t=p(2);S("active",e.key===t.sortBy),l(),E(" ",e.label," ")}}function xo(i,n){if(i&1&&(r(0,"ul",3),f(1,bo,2,3,"li",4),a()),i&2){let e=p();l(),d("ngForOf",e.options)}}var wt=class i{sortBy="priceAsc";sortChange=new D;open=O(!1);options=[{key:"priceAsc",label:"Prix le plus bas"},{key:"priceDesc",label:"Prix le plus haut"},{key:"newest",label:"Nouveaut\xE9s"}];toggle(){this.open.update(n=>!n)}choose(n){this.sortBy=n,this.sortChange.emit(n),this.open.set(!1)}label(n){return this.options.find(e=>e.key===n)?.label??n}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-sort-dropdown"]],inputs:{sortBy:"sortBy"},outputs:{sortChange:"sortChange"},decls:4,vars:4,consts:[[1,"custom-select",3,"click"],[1,"selected"],["class","options",4,"ngIf"],[1,"options"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){e&1&&(r(0,"div",0),h("click",function(){return t.toggle()}),r(1,"div",1),c(2),a(),f(3,xo,2,1,"ul",2),a()),e&2&&(S("open",t.open()),l(2),y(t.label(t.sortBy)),l(),d("ngIf",t.open()))},dependencies:[T,A],styles:[".custom-select[_ngcontent-%COMP%]{position:relative;width:220px;background:#ffffff0d;border:1px solid rgba(255,255,255,.15);border-radius:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.custom-select[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{padding:10px 14px;color:var(--text);font-size:14px;font-weight:500}.custom-select.open[_ngcontent-%COMP%]{border-color:var(--accent);box-shadow:0 6px 18px #0000004d}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{list-style:none;margin:0;padding:6px 0;position:absolute;top:calc(100% + 4px);left:0;right:0;background:#121826f2;border-radius:12px;box-shadow:0 12px 24px #00000073;z-index:100;animation:_ngcontent-%COMP%_fadeIn .2s ease}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px;color:var(--text);transition:background .2s ease,color .2s ease}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#22d3ee26;color:var(--accent)}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{font-weight:600;color:var(--accent)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}"]})};var Ot=class i{view="grid";viewChange=new D;featuredOnly=!1;featuredChange=new D;sortBy="priceAsc";sortChange=new D;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-controls"]],inputs:{view:"view",featuredOnly:"featuredOnly",sortBy:"sortBy"},outputs:{viewChange:"viewChange",featuredChange:"featuredChange",sortChange:"sortChange"},decls:14,vars:5,consts:[[1,"controls"],[1,"col-4"],[1,"view"],["aria-label","Vue grille",3,"click"],["aria-label","Vue liste",3,"click"],[1,"sort"],[3,"sortChange","sortBy"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),c(4,"Vue:"),a(),r(5,"button",3),h("click",function(){return t.viewChange.emit("grid")}),c(6,"\u25A6"),a(),r(7,"button",4),h("click",function(){return t.viewChange.emit("list")}),c(8,"\u25A4"),a()()(),r(9,"div",1)(10,"div",5)(11,"label"),c(12,"Trier par:"),a(),r(13,"app-product-sort-dropdown",6),h("sortChange",function(s){return t.sortChange.emit(s)}),a()()()()),e&2&&(l(5),S("active",t.view==="grid"),l(2),S("active",t.view==="list"),l(6),d("sortBy",t.sortBy))},dependencies:[se,wt],styles:['.controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:16px}.view[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.view[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--muted);font-size:14px}.view[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:8px;border:1px solid rgba(255,255,255,.15);background:var(--surface);color:var(--text);cursor:pointer;transition:background .2s,transform .15s}.view[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff0f;transform:scale(1.05)}.view[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-color:var(--accent);box-shadow:0 0 0 2px #22d3ee40}.featured[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.featured[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--muted);font-size:14px}.switch[_ngcontent-%COMP%]{position:relative;width:44px;height:24px;display:inline-block}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:999px;background:#fff3}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:after{content:"";position:absolute;top:3px;left:3px;width:18px;height:18px;border-radius:50%;background:#fff;transition:transform .2s}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:var(--accent)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:after{transform:translate(20px)}.custom-select[_ngcontent-%COMP%]{position:relative;width:200px;background:#ffffff0d;border:1px solid rgba(255,255,255,.15);border-radius:10px;cursor:pointer}.custom-select[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{padding:10px 14px}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{list-style:none;margin:0;padding:6px 0;position:absolute;top:100%;left:0;right:0;background:#121826f2;border-radius:10px;box-shadow:0 8px 24px #00000059;animation:fadeIn .2s ease}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 14px;transition:background .2s ease,color .2s ease}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#22d3ee26;color:var(--accent)}']})};var J=typeof window<"u"?window:{screen:{},navigator:{}},Le=(J.matchMedia||function(){return{matches:!1}}).bind(J),Dn=!1,_o={get passive(){return Dn=!0}},Nn=function(){};J.addEventListener&&J.addEventListener("p",Nn,_o);J.removeEventListener&&J.removeEventListener("p",Nn,!1);var Mt=Dn,Vl="PointerEvent"in J,Bt="ontouchstart"in J,vo="TouchEvent"in J,Co=Bt||vo&&Le("(any-pointer: coarse)").matches,Il=(J.navigator.maxTouchPoints||0)>0||Co,Fn=J.navigator.userAgent||"",wo=Le("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Fn)&&Math.min(J.screen.width||0,J.screen.height||0)>=768,Hl=(Le("(pointer: coarse)").matches||!Le("(pointer: fine)").matches&&Bt)&&!/Windows.*Firefox/.test(Fn),Ll=Le("(any-pointer: fine)").matches||Le("(any-hover: hover)").matches||wo||!Bt;var Oo=(i,n,e)=>({tooltip:i,placement:n,content:e});function Mo(i,n){}function yo(i,n){i&1&&f(0,Mo,0,0,"ng-template")}function Po(i,n){if(i&1&&(R(0),f(1,yo,1,0,null,1),z()),i&2){let e=p();l(),d("ngTemplateOutlet",e.template)("ngTemplateOutletContext",an(2,Oo,e.tooltip,e.placement,e.content))}}function ko(i,n){if(i&1&&(R(0),r(1,"div",2),c(2),a(),z()),i&2){let e=p();l(),re("title",e.tooltip)("data-tooltip-placement",e.placement),l(),E(" ",e.content," ")}}var So=["tooltipTemplate"],Eo=["leftOuterSelectionBar"],To=["rightOuterSelectionBar"],Vo=["fullBar"],Io=["selectionBar"],Ho=["minHandle"],Lo=["maxHandle"],Do=["floorLabel"],No=["ceilLabel"],Fo=["minHandleLabel"],Ao=["maxHandleLabel"],Bo=["combinedLabel"],Uo=["ticksElement"],Ro=i=>({"ngx-slider-selected":i});function zo(i,n){if(i&1&&m(0,"ngx-slider-tooltip-wrapper",32),i&2){let e=p().$implicit,t=p();d("template",t.tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function jo(i,n){if(i&1&&m(0,"span",33),i&2){let e=p().$implicit;d("innerText",e.legend)}}function qo(i,n){if(i&1&&m(0,"span",34),i&2){let e=p().$implicit;d("innerHTML",e.legend,tn)}}function Go(i,n){if(i&1&&(r(0,"span",27),m(1,"ngx-slider-tooltip-wrapper",28),f(2,zo,1,4,"ngx-slider-tooltip-wrapper",29)(3,jo,1,1,"span",30)(4,qo,1,1,"span",31),a()),i&2){let e=n.$implicit,t=p();d("ngClass",K(8,Ro,e.selected))("ngStyle",e.style),l(),d("template",t.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),l(),d("ngIf",e.value!==null&&e.value!==void 0),l(),d("ngIf",e.legend!==null&&e.legend!==void 0&&t.allowUnsafeHtmlInSlider===!1),l(),d("ngIf",e.legend!==null&&e.legend!==void 0&&(t.allowUnsafeHtmlInSlider===null||t.allowUnsafeHtmlInSlider===void 0||t.allowUnsafeHtmlInSlider))}}var le=function(i){return i[i.Low=0]="Low",i[i.High=1]="High",i[i.Floor=2]="Floor",i[i.Ceil=3]="Ceil",i[i.TickValue=4]="TickValue",i}(le||{}),Ne=class{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1},An=new Xt("AllowUnsafeHtmlInSlider"),v=function(i){return i[i.Min=0]="Min",i[i.Max=1]="Max",i}(v||{}),Rt=class{value;highValue;pointerType},u=class{static isNullOrUndefined(n){return n==null}static areArraysEqual(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}static linearValueToPosition(n,e,t){let o=t-e;return(n-e)/o}static logValueToPosition(n,e,t){n=Math.log(n),e=Math.log(e),t=Math.log(t);let o=t-e;return(n-e)/o}static linearPositionToValue(n,e,t){return n*(t-e)+e}static logPositionToValue(n,e,t){e=Math.log(e),t=Math.log(t);let o=n*(t-e)+e;return Math.exp(o)}static findStepIndex(n,e){let t=e.map(s=>Math.abs(n-s.value)),o=0;for(let s=0;s<e.length;s++)t[s]!==t[o]&&t[s]<t[o]&&(o=s);return o}},ce=class{static isTouchEvent(n){return window.TouchEvent!==void 0?n instanceof TouchEvent:n.touches!==void 0}static isResizeObserverAvailable(){return window.ResizeObserver!==void 0}},N=class{static roundToPrecisionLimit(n,e){return+n.toPrecision(e)}static isModuloWithinPrecisionLimit(n,e,t){let o=Math.pow(10,-t);return Math.abs(n%e)<=o||Math.abs(Math.abs(n%e)-e)<=o}static clampToRange(n,e,t){return Math.min(Math.max(n,e),t)}},yt=class{eventName=null;events=null;eventsSubscription=null;teardownCallback=null},Pt=class{renderer;constructor(n){this.renderer=n}attachPassiveEventListener(n,e,t,o){if(Mt!==!0)return this.attachEventListener(n,e,t,o);let s=new yt;s.eventName=e,s.events=new Ce;let g=b=>{s.events.next(b)};return n.addEventListener(e,g,{passive:!0,capture:!1}),s.teardownCallback=()=>{n.removeEventListener(e,g,{passive:!0,capture:!1})},s.eventsSubscription=s.events.pipe(u.isNullOrUndefined(o)?Lt(()=>{}):Dt(o,void 0,{leading:!0,trailing:!0})).subscribe(b=>{t(b)}),s}detachEventListener(n){u.isNullOrUndefined(n.eventsSubscription)||(n.eventsSubscription.unsubscribe(),n.eventsSubscription=null),u.isNullOrUndefined(n.events)||(n.events.complete(),n.events=null),u.isNullOrUndefined(n.teardownCallback)||(n.teardownCallback(),n.teardownCallback=null)}attachEventListener(n,e,t,o){let s=new yt;s.eventName=e,s.events=new Ce;let g=b=>{s.events.next(b)};return s.teardownCallback=this.renderer.listen(n,e,g),s.eventsSubscription=s.events.pipe(u.isNullOrUndefined(o)?Lt(()=>{}):Dt(o,void 0,{leading:!0,trailing:!0})).subscribe(b=>{t(b)}),s}},_e=(()=>{class i{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(e,t,o){this.elemRef=e,this.renderer=t,this.changeDetectionRef=o,this.eventListenerHelper=new Pt(this.renderer)}setAlwaysHide(e){this._alwaysHide=e,e?this.visibility="hidden":this.visibility="visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return this.alwaysHide?!1:this.opacity!==0}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){let e=this.getBoundingClientRect();this.vertical?this._dimension=(e.bottom-e.top)*this.scale:this._dimension=(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,t,o){let s=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,t,o);this.eventListeners.push(s)}onPassive(e,t,o){let s=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,t,o);this.eventListeners.push(s)}off(e){let t,o;u.isNullOrUndefined(e)?(t=[],o=this.eventListeners):(t=this.eventListeners.filter(s=>s.eventName!==e),o=this.eventListeners.filter(s=>s.eventName===e));for(let s of o)this.eventListenerHelper.detachEventListener(s);this.eventListeners=t}isRefDestroyed(){return u.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(t){return new(t||i)(j(de),j(Ue),j(ze))};static \u0275dir=Ge({type:i,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(t,o){t&2&&Ft("opacity",o.opacity)("visibility",o.visibility)("left",o.left)("bottom",o.bottom)("height",o.height)("width",o.width)("transform",o.transform)},standalone:!1})}return i})(),Ut=(()=>{class i extends _e{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}focusIfNeeded(){document.activeElement!==this.elemRef.nativeElement&&this.elemRef.nativeElement.focus()}constructor(e,t,o){super(e,t,o)}static \u0275fac=function(t){return new(t||i)(j(de),j(Ue),j(ze))};static \u0275dir=Ge({type:i,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(t,o){t&2&&(re("role",o.role)("tabindex",o.tabindex)("aria-orientation",o.ariaOrientation)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledBy)("aria-valuenow",o.ariaValueNow)("aria-valuetext",o.ariaValueText)("aria-valuemin",o.ariaValueMin)("aria-valuemax",o.ariaValueMax),S("ngx-slider-active",o.active))},standalone:!1,features:[Nt]})}return i})(),De=(()=>{class i extends _e{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(e,t,o,s){super(e,t,o),this.allowUnsafeHtmlInSlider=s}setValue(e){let t=!1;!this.alwaysHide&&(u.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&this.dimension===0)&&(t=!0),this._value=e,this.allowUnsafeHtmlInSlider===!1?this.elemRef.nativeElement.innerText=e:this.elemRef.nativeElement.innerHTML=e,t&&this.calculateDimension()}static \u0275fac=function(t){return new(t||i)(j(de),j(Ue),j(ze),j(An,8))};static \u0275dir=Ge({type:i,selectors:[["","ngxSliderLabel",""]],standalone:!1,features:[Nt]})}return i})(),Yo=(()=>{class i{template;tooltip;placement;content;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},standalone:!1,decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(t,o){t&1&&f(0,Po,2,6,"ng-container",0)(1,ko,3,3,"ng-container",0),t&2&&(d("ngIf",o.template),l(),d("ngIf",!o.template))},dependencies:[T,dn],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return i})(),zt=class{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null},kt=class{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0},Fe=class{value;highValue;static compare(n,e){return u.isNullOrUndefined(n)&&u.isNullOrUndefined(e)||u.isNullOrUndefined(n)!==u.isNullOrUndefined(e)?!1:n.value===e.value&&n.highValue===e.highValue}},St=class extends Fe{forceChange;static compare(n,e){return u.isNullOrUndefined(n)&&u.isNullOrUndefined(e)||u.isNullOrUndefined(n)!==u.isNullOrUndefined(e)?!1:n.value===e.value&&n.highValue===e.highValue&&n.forceChange===e.forceChange}};var Qo={provide:_n,useExisting:Kt(()=>jt),multi:!0},jt=(()=>{class i{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;sliderElementNgxSliderClass=!0;value=null;valueChange=new D;highValue=null;highValueChange=new D;options=new Ne;userChangeStart=new D;userChange=new D;userChangeEnd=new D;manualRefreshSubscription;set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(t=>{this.focusPointer(t)})}cancelUserChangeSubscription;set cancelUserChange(e){this.unsubscribeCancelUserChange(),this.cancelUserChangeSubscription=e.subscribe(()=>{this.moving&&(this.positionTrackingHandle(this.preStartHandleValue),this.forceEnd(!0))})}get range(){return!u.isNullOrUndefined(this.value)&&!u.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Ce;inputModelChangeSubscription=null;outputModelChangeSubject=new Ce;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new Ne;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new kt;preStartHandleValue=null;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(e,t,o,s,g){this.renderer=e,this.elementRef=t,this.changeDetectionRef=o,this.zone=s,this.allowUnsafeHtmlInSlider=g,this.eventListenerHelper=new Pt(this.renderer)}ngOnInit(){this.viewOptions=new Ne,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!u.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!u.isNullOrUndefined(e.value)||!u.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,controlAccessorChange:!1,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1,controlAccessorChange:!0})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState(),this.initHasRun&&this.manageEventsBindings()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(Ae(St.compare),Oe(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(Ae(St.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){ce.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){ce.isResizeObserverAvailable()&&this.resizeObserver!==null&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){u.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){u.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){u.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){u.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){u.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){u.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}unsubscribeCancelUserChange(){u.isNullOrUndefined(this.cancelUserChangeSubscription)||(this.cancelUserChangeSubscription.unsubscribe(),this.cancelUserChangeSubscription=null)}getPointerElement(e){return e===v.Min?this.minHandleElement:e===v.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===v.Min?this.viewLowValue:this.currentTrackingPointer===v.Max?this.viewHighValue:null}modelValueToViewValue(e){return u.isNullOrUndefined(e)?NaN:!u.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?u.findStepIndex(+e,this.viewOptions.stepsArray):+e}viewValueToModelValue(e){return!u.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e}getStepValue(e){let t=this.viewOptions.stepsArray[e];return u.isNullOrUndefined(t)?NaN:t.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,controlAccessorChange:!1,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,controlAccessorChange:!1,forceChange:!1,internalChange:!0})}applyInputModelChange(e){let t=this.normaliseModelValues(e),o=!Fe.compare(e,t);o&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.range?this.viewHighValue=this.modelValueToViewValue(t.highValue):this.viewHighValue=null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,controlAccessorChange:e.controlAccessorChange,forceChange:o,userEventInitiated:!1})}publishOutputModelChange(e){let t=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),!e.controlAccessorChange&&(u.isNullOrUndefined(this.onChangeCallback)||(this.range?this.onChangeCallback([e.value,e.highValue]):this.onChangeCallback(e.value)),u.isNullOrUndefined(this.onTouchedCallback)||(this.range?this.onTouchedCallback([e.value,e.highValue]):this.onTouchedCallback(e.value)))};e.userEventInitiated?(t(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{t()})}normaliseModelValues(e){let t=new Fe;if(t.value=e.value,t.highValue=e.highValue,!u.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){let o=u.findStepIndex(t.value,this.viewOptions.stepsArray);if(t.value=this.viewOptions.stepsArray[o].value,this.range){let s=u.findStepIndex(t.highValue,this.viewOptions.stepsArray);t.highValue=this.viewOptions.stepsArray[s].value}}return t}if(this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),this.viewOptions.enforceRange&&(t.value=N.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=N.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)t.value=t.highValue;else{let o=e.value;t.value=e.highValue,t.highValue=o}return t}renormaliseModelValues(){let e={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(e);Fe.compare(t,e)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,controlAccessorChange:!1,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;let e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();let t=this.getOptionsInfluencingEventBindings(this.viewOptions),o=!u.areArraysEqual(e,t);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.resetSlider(o)}applyOptions(){if(this.viewOptions=new Ne,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!u.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!u.isNullOrUndefined(this.viewOptions.tickStep)||!u.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!u.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),u.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),u.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,t)=>e+" - "+t),this.viewOptions.logScale&&this.viewOptions.floor===0)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,u.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>this.viewOptions.bindIndexForStepsArray?String(this.getStepValue(e)):String(e))}applyFloorCeilOptions(){if(u.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),u.isNullOrUndefined(this.viewOptions.ceil)||u.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,u.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(e){e!==v.Min&&e!==v.Max&&(e=v.Min),e===v.Min?this.minHandleElement.focus():this.range&&e===v.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){u.isNullOrUndefined(this.currentFocusPointer)||this.getPointerElement(this.currentFocusPointer).focusIfNeeded()}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);let e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(let e of this.getAllSliderElements())u.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(let e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(let e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.minHandleElement.tabindex="0":this.minHandleElement.tabindex="",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",u.isNullOrUndefined(this.viewOptions.ariaLabel)?u.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.maxHandleElement.tabindex="0":this.maxHandleElement.tabindex="",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",u.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?u.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,le.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,le.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){u.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);let e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,u.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass){setTimeout(()=>{this.sliderElementWithLegendClass=!1});return}let e=u.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,t=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();let o=u.isNullOrUndefined(this.viewOptions.tickValueStep)?u.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep,s=!1,g=e.map(b=>{let C=this.valueToPosition(b);this.viewOptions.vertical&&(C=this.maxHandlePosition-C);let V=t+"("+Math.round(C)+"px)",k=new zt;k.selected=this.isTickSelected(b),k.style={"-webkit-transform":V,"-moz-transform":V,"-o-transform":V,"-ms-transform":V,transform:V},k.selected&&!u.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(k.style["background-color"]=this.getSelectionBarColor()),!k.selected&&!u.isNullOrUndefined(this.viewOptions.getTickColor)&&(k.style["background-color"]=this.getTickColor(b)),u.isNullOrUndefined(this.viewOptions.ticksTooltip)||(k.tooltip=this.viewOptions.ticksTooltip(b),k.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!u.isNullOrUndefined(o)&&N.isModuloWithinPrecisionLimit(b,o,this.viewOptions.precisionLimit)&&(k.value=this.getDisplayValue(b,le.TickValue),u.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(k.valueTooltip=this.viewOptions.ticksValuesTooltip(b),k.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let $=null;if(u.isNullOrUndefined(this.viewOptions.stepsArray))u.isNullOrUndefined(this.viewOptions.getLegend)||($=this.viewOptions.getLegend(b));else{let oe=this.viewOptions.stepsArray[b];u.isNullOrUndefined(this.viewOptions.getStepLegend)?u.isNullOrUndefined(oe)||($=oe.legend):$=this.viewOptions.getStepLegend(oe)}return u.isNullOrUndefined($)||(k.legend=$,s=!0),k});if(this.sliderElementWithLegendClass!==s&&setTimeout(()=>{this.sliderElementWithLegendClass=s}),!u.isNullOrUndefined(this.ticks)&&this.ticks.length===g.length)for(let b=0;b<g.length;++b)Object.assign(this.ticks[b],g[b]);else this.ticks=g,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){if(!this.viewOptions.showTicks)return[];let e=u.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[],o=1+Math.floor(N.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let s=0;s<o;++s)t.push(N.roundToPrecisionLimit(this.viewOptions.floor+e*s,this.viewOptions.precisionLimit));return t}isTickSelected(e){if(!this.range)if(u.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{let t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&e>=t&&e<=this.viewLowValue)return!0;if(this.viewLowValue<t&&e<=t&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){if(!this.floorLabelElement.alwaysHide){this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,le.Floor)),this.floorLabelElement.calculateDimension();let e=this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0;this.floorLabelElement.setPosition(e)}}updateCeilLabel(){if(!this.ceilLabelElement.alwaysHide){this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,le.Ceil)),this.ceilLabelElement.calculateDimension();let e=this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension;this.ceilLabelElement.setPosition(e)}}updateHandles(e,t){e===v.Min?this.updateLowHandle(t):e===v.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,t){let o=e===v.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,s=t-o/2+this.handleHalfDimension,g=this.fullBarElement.dimension-o;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===v.Min||!this.viewOptions.rightToLeft&&e===v.Max?Math.min(s,g):Math.min(Math.max(s,0),g):s}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,le.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(v.Min,e)),u.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(v.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,le.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(v.Max,e)),u.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(v.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,t=!1,o=this.isLabelBelowFloorLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.minHandleLabelElement),g=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),b=this.isLabelBelowFloorLabel(this.combinedLabelElement),C=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(o?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),s?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){let V=this.combinedLabelElement.isVisible()?C:g,k=this.combinedLabelElement.isVisible()?b:o;V?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),k?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){let t=e.position,o=e.dimension,s=this.floorLabelElement.position,g=this.floorLabelElement.dimension;return this.viewOptions.rightToLeft?t+o>=s-2:t<=s+g+2}isLabelAboveCeilLabel(e){let t=e.position,o=e.dimension,s=this.ceilLabelElement.position,g=this.ceilLabelElement.dimension;return this.viewOptions.rightToLeft?t<=s+g+2:t+o>=s-2}updateSelectionBar(){let e=0,t=0,o=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,s=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=s;else if(u.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))o?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,e=0);else{let g=this.viewOptions.showSelectionBarFromValue,b=this.valueToPosition(g);(this.viewOptions.rightToLeft?this.viewLowValue<=g:this.viewLowValue>g)?(t=this.minHandleElement.position-b,e=b+this.handleHalfDimension):(t=b-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+t)),this.leftOuterSelectionBarElement.setPosition(e+t)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+t)),this.rightOuterSelectionBarElement.setPosition(e+t))),u.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!u.isNullOrUndefined(this.viewOptions.selectionBarGradient)){let g=u.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),b=g-e>0&&!o||g-e<=0&&o,C=this.viewOptions.vertical?b?"bottom":"top":b?"left":"right";this.barStyle={backgroundImage:"linear-gradient(to "+C+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(g+t+e+(b?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=g-e+(b?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{let g=this.getSelectionBarColor();this.barStyle={backgroundColor:g}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return e===v.Max?this.viewOptions.getPointerColor(this.highValue,e):this.viewOptions.getPointerColor(this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(this.viewOptions.rightToLeft?e=this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:e=this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){let t=this.getDisplayValue(this.viewLowValue,le.Low),o=this.getDisplayValue(this.viewHighValue,le.High),s=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(o,t):this.viewOptions.combineLabels(t,o);this.combinedLabelElement.setValue(s);let g=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(g),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,t){return!u.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,t)}roundStep(e,t){let o=u.isNullOrUndefined(t)?this.viewOptions.step:t,s=N.roundToPrecisionLimit((e-this.viewOptions.floor)/o,this.viewOptions.precisionLimit);return s=Math.round(s)*o,N.roundToPrecisionLimit(this.viewOptions.floor+s,this.viewOptions.precisionLimit)}valueToPosition(e){let t=u.linearValueToPosition;u.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=u.logValueToPosition):t=this.viewOptions.customValueToPosition,e=N.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil);let o=t(e,this.viewOptions.floor,this.viewOptions.ceil);return u.isNullOrUndefined(o)&&(o=0),this.viewOptions.rightToLeft&&(o=1-o),o*this.maxHandlePosition}positionToValue(e){let t=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);let o=u.linearPositionToValue;u.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(o=u.logPositionToValue):o=this.viewOptions.customPositionToValue;let s=o(t,this.viewOptions.floor,this.viewOptions.ceil);return u.isNullOrUndefined(s)?0:s}getEventXY(e,t){if(e instanceof MouseEvent)return this.viewOptions.vertical||this.viewOptions.rotate!==0?e.clientY:e.clientX;let o=0,s=e.touches;if(!u.isNullOrUndefined(t)){for(let g=0;g<s.length;g++)if(s[g].identifier===t){o=g;break}}return this.viewOptions.vertical||this.viewOptions.rotate!==0?s[o].clientY:s[o].clientX}getEventPosition(e,t){let o=this.elementRef.nativeElement.getBoundingClientRect(),s=this.viewOptions.vertical||this.viewOptions.rotate!==0?o.bottom:o.left,g=0;return this.viewOptions.vertical||this.viewOptions.rotate!==0?g=-this.getEventXY(e,t)+s:g=this.getEventXY(e,t)-s,g*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return v.Min;let t=this.getEventPosition(e),o=Math.abs(t-this.minHandleElement.position),s=Math.abs(t-this.maxHandleElement.position);return o<s?v.Min:o>s?v.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?v.Min:v.Max:t<this.minHandleElement.position?v.Min:v.Max}bindEvents(){let e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",t=>this.onBarStart(null,e,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",t=>this.onBarStart(v.Min,e,t,!0,!0)),this.maxHandleElement.on("mousedown",t=>this.onBarStart(v.Max,e,t,!0,!0))):(this.minHandleElement.on("mousedown",t=>this.onStart(v.Min,t,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",t=>this.onStart(v.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",t=>this.onBarStart(null,e,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",t=>this.onBarStart(v.Min,e,t,!0,!0)),this.maxHandleElement.onPassive("touchstart",t=>this.onBarStart(v.Max,e,t,!0,!0))):(this.minHandleElement.onPassive("touchstart",t=>this.onStart(v.Min,t,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",t=>this.onStart(v.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.onPassive("touchstart",t=>this.onStart(null,t,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(v.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(v.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(let e of this.getAllSliderElements())u.isNullOrUndefined(e)||e.off()}onBarStart(e,t,o,s,g,b,C){t?this.onDragStart(e,o,s,g):this.onStart(e,o,s,g,b,C)}onStart(e,t,o,s,g,b){t.stopPropagation(),!ce.isTouchEvent(t)&&!Mt&&t.preventDefault(),this.moving=!1,this.calculateViewDimensions(),u.isNullOrUndefined(e)&&(e=this.getNearestHandle(t)),this.currentTrackingPointer=e;let C=this.getPointerElement(e);if(C.active=!0,this.preStartHandleValue=this.getCurrentTrackingValue(),this.viewOptions.keyboardSupport&&C.focus(),o){this.unsubscribeOnMove();let V=k=>this.dragging.active?this.onDragMove(k):this.onMove(k);ce.isTouchEvent(t)?this.onMoveEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",V):this.onMoveEventListener=this.eventListenerHelper.attachEventListener(document,"mousemove",V)}if(s){this.unsubscribeOnEnd();let V=k=>this.onEnd(k);ce.isTouchEvent(t)?this.onEndEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchend",V):this.onEndEventListener=this.eventListenerHelper.attachEventListener(document,"mouseup",V)}this.userChangeStart.emit(this.getChangeContext()),ce.isTouchEvent(t)&&!u.isNullOrUndefined(t.changedTouches)&&u.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),g&&this.onMove(t,!0),b&&this.onEnd(t)}onMove(e,t){let o=null;if(ce.isTouchEvent(e)){let V=e.changedTouches;for(let k=0;k<V.length;k++)if(V[k].identifier===this.touchId){o=V[k];break}if(u.isNullOrUndefined(o))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let s=u.isNullOrUndefined(o)?this.getEventPosition(e):this.getEventPosition(e,o.identifier),g,b=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil,C=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor;s<=0?g=C:s>=this.maxHandlePosition?g=b:(g=this.positionToValue(s),t&&!u.isNullOrUndefined(this.viewOptions.tickStep)?g=this.roundStep(g,this.viewOptions.tickStep):g=this.roundStep(g)),this.positionTrackingHandle(g)}forceEnd(e=!1){this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),e&&(this.sliderElementAnimateClass=!1,setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate})),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext())}onEnd(e){ce.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||this.forceEnd()}onPointerFocus(e){let t=this.getPointerElement(e);t.on("blur",()=>this.onPointerBlur(t)),t.on("keydown",o=>this.onKeyboardEvent(o)),t.on("keyup",()=>this.onKeyUp()),t.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,u.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){let t=this.viewOptions.ceil-this.viewOptions.floor,o=e+this.viewOptions.step,s=e-this.viewOptions.step,g=e+t/10,b=e-t/10;this.viewOptions.reversedControls&&(o=e-this.viewOptions.step,s=e+this.viewOptions.step,g=e-t/10,b=e+t/10);let C={UP:o,DOWN:s,LEFT:s,RIGHT:o,PAGEUP:g,PAGEDOWN:b,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(C.LEFT=o,C.RIGHT=s,(this.viewOptions.vertical||this.viewOptions.rotate!==0)&&(C.UP=s,C.DOWN=o)),C}onKeyboardEvent(e){let t=this.getCurrentTrackingValue(),o=u.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,s={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},g=this.getKeyActions(t),b=s[o],C=g[b];if(u.isNullOrUndefined(C)||u.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));let V=N.clampToRange(C,this.viewOptions.floor,this.viewOptions.ceil),k=this.roundStep(V);if(!this.viewOptions.draggableRangeOnly)this.positionTrackingHandle(k);else{let $=this.viewHighValue-this.viewLowValue,oe,ve;this.currentTrackingPointer===v.Min?(oe=k,ve=k+$,ve>this.viewOptions.ceil&&(ve=this.viewOptions.ceil,oe=ve-$)):this.currentTrackingPointer===v.Max&&(ve=k,oe=k-$,oe<this.viewOptions.floor&&(oe=this.viewOptions.floor,ve=oe+$)),this.positionTrackingBar(oe,ve)}}onDragStart(e,t,o,s){let g=this.getEventPosition(t);this.dragging=new kt,this.dragging.active=!0,this.dragging.value=this.positionToValue(g),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-g:g-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?g-this.maxHandleElement.position:this.maxHandleElement.position-g,this.onStart(e,t,o,s)}getMinValue(e,t,o){let s=this.viewOptions.rightToLeft,g=null;return t?o?g=s?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:g=s?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:g=s?this.positionToValue(e+this.dragging.lowLimit):this.positionToValue(e-this.dragging.lowLimit),this.roundStep(g)}getMaxValue(e,t,o){let s=this.viewOptions.rightToLeft,g=null;return t?o?g=s?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:g=s?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:s?g=this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:g=this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(g)}onDragMove(e){let t=this.getEventPosition(e);this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let o,s,g,b;this.viewOptions.rightToLeft?(o=this.dragging.lowLimit,s=this.dragging.highLimit,g=this.maxHandleElement,b=this.minHandleElement):(o=this.dragging.highLimit,s=this.dragging.lowLimit,g=this.minHandleElement,b=this.maxHandleElement);let C=t<=s,V=t>=this.maxHandlePosition-o,k,$;if(C){if(g.position===0)return;k=this.getMinValue(t,!0,!1),$=this.getMaxValue(t,!0,!1)}else if(V){if(b.position===this.maxHandlePosition)return;$=this.getMaxValue(t,!0,!0),k=this.getMinValue(t,!0,!0)}else k=this.getMinValue(t,!1,!1),$=this.getMaxValue(t,!1,!1);this.positionTrackingBar(k,$)}positionTrackingBar(e,t){!u.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(e=this.viewOptions.minLimit,t=N.roundToPrecisionLimit(e+this.dragging.difference,this.viewOptions.precisionLimit)),!u.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(t=this.viewOptions.maxLimit,e=N.roundToPrecisionLimit(t-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(v.Min,this.valueToPosition(e)),this.updateHandles(v.Max,this.valueToPosition(t))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===v.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===v.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===v.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(v.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=v.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===v.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(v.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=v.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===v.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===v.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!u.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!u.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){let t=this.currentTrackingPointer===v.Min?this.viewHighValue:this.viewLowValue,o=Math.abs(e-t);if(!u.isNullOrUndefined(this.viewOptions.minRange)&&o<this.viewOptions.minRange){if(this.currentTrackingPointer===v.Min)return N.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===v.Max)return N.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!u.isNullOrUndefined(this.viewOptions.maxRange)&&o>this.viewOptions.maxRange){if(this.currentTrackingPointer===v.Min)return N.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===v.Max)return N.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){let t=this.currentTrackingPointer===v.Min?this.viewHighValue-e:e-this.viewLowValue,o=u.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,s=this.viewOptions.maxRange;return t<o?(this.currentTrackingPointer===v.Min?(this.viewHighValue=N.roundToPrecisionLimit(Math.min(e+o,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=N.roundToPrecisionLimit(this.viewHighValue-o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(v.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===v.Max&&(this.viewLowValue=N.roundToPrecisionLimit(Math.max(e-o,this.viewOptions.floor),this.viewOptions.precisionLimit),e=N.roundToPrecisionLimit(this.viewLowValue+o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(v.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!u.isNullOrUndefined(s)&&t>s&&(this.currentTrackingPointer===v.Min?(this.viewHighValue=N.roundToPrecisionLimit(e+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(v.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===v.Max&&(this.viewLowValue=N.roundToPrecisionLimit(e-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(v.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){let e=new Rt;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}static \u0275fac=function(t){return new(t||i)(j(Ue),j(de),j(ze),j(en),j(An,8))};static \u0275cmp=M({type:i,selectors:[["ngx-slider"]],contentQueries:function(t,o,s){if(t&1&&on(s,So,5),t&2){let g;q(g=G())&&(o.tooltipTemplate=g.first)}},viewQuery:function(t,o){if(t&1&&(Q(Eo,5,_e),Q(To,5,_e),Q(Vo,5,_e),Q(Io,5,_e),Q(Ho,5,Ut),Q(Lo,5,Ut),Q(Do,5,De),Q(No,5,De),Q(Fo,5,De),Q(Ao,5,De),Q(Bo,5,De),Q(Uo,5,_e)),t&2){let s;q(s=G())&&(o.leftOuterSelectionBarElement=s.first),q(s=G())&&(o.rightOuterSelectionBarElement=s.first),q(s=G())&&(o.fullBarElement=s.first),q(s=G())&&(o.selectionBarElement=s.first),q(s=G())&&(o.minHandleElement=s.first),q(s=G())&&(o.maxHandleElement=s.first),q(s=G())&&(o.floorLabelElement=s.first),q(s=G())&&(o.ceilLabelElement=s.first),q(s=G())&&(o.minHandleLabelElement=s.first),q(s=G())&&(o.maxHandleLabelElement=s.first),q(s=G())&&(o.combinedLabelElement=s.first),q(s=G())&&(o.ticksElement=s.first)}},hostVars:10,hostBindings:function(t,o){t&1&&h("resize",function(g){return o.onResize(g)},!1,qe),t&2&&(re("disabled",o.sliderElementDisabledAttr)("aria-label",o.sliderElementAriaLabel),S("ngx-slider",o.sliderElementNgxSliderClass)("vertical",o.sliderElementVerticalClass)("animate",o.sliderElementAnimateClass)("with-legend",o.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus",cancelUserChange:"cancelUserChange"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},standalone:!1,features:[rn([Qo]),Jt],decls:29,vars:13,consts:[["leftOuterSelectionBar",""],["rightOuterSelectionBar",""],["fullBar",""],["selectionBar",""],["minHandle",""],["maxHandle",""],["floorLabel",""],["ceilLabel",""],["minHandleLabel",""],["maxHandleLabel",""],["combinedLabel",""],["ticksElement",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(t,o){t&1&&(r(0,"span",12,0),m(2,"span",13),a(),r(3,"span",14,1),m(5,"span",13),a(),r(6,"span",15,2),m(8,"span",13),a(),r(9,"span",16,3),m(11,"span",17),a(),m(12,"span",18,4)(14,"span",19,5)(16,"span",20,6)(18,"span",21,7)(20,"span",22,8)(22,"span",23,9)(24,"span",24,10),r(26,"span",25,11),f(28,Go,5,10,"span",26),a()),t&2&&(l(6),S("ngx-slider-transparent",o.fullBarTransparentClass),l(3),S("ngx-slider-draggable",o.selectionBarDraggableClass),l(2),d("ngStyle",o.barStyle),l(),d("ngStyle",o.minPointerStyle),l(2),Ft("display",o.range?"inherit":"none"),d("ngStyle",o.maxPointerStyle),l(12),S("ngx-slider-ticks-values-under",o.ticksUnderValuesClass),d("hidden",!o.showTicks),l(2),d("ngForOf",o.ticks))},dependencies:[Ke,A,T,cn,_e,Ut,De,Yo],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}']})}return i})(),Bn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=nn({type:i});static \u0275inj=Zt({imports:[ke]})}return i})();function Wo(i,n){if(i&1){let e=P();r(0,"div",10)(1,"input",11),h("input",function(){x(e);let o=p();return _(o.filterChange.emit())}),a()()}if(i&2){let e=p();l(),d("formControl",e.form.controls.brand)}}function Ko(i,n){if(i&1){let e=P();r(0,"button",14),h("click",function(){let o=x(e).$implicit,s=p(2);return _(s.selectBrand(o._id))}),r(1,"div",15),m(2,"img",16),a(),r(3,"span",17),c(4),a()()}if(i&2){let e=n.$implicit,t=p(2);S("active",(t.form.value==null?null:t.form.value.brandId)===e._id),d("title",e.name),re("aria-pressed",(t.form.value==null?null:t.form.value.brandId)===e._id),l(2),d("src",t.getUrl(e.iconUrl)||"/assets/placeholder.jpg",F)("alt",e.name),l(2),y(e.name)}}function Zo(i,n){if(i&1&&(r(0,"div",12),f(1,Ko,5,7,"button",13),a()),i&2){let e=p();l(),d("ngForOf",e.brands)("ngForTrackBy",e.trackByBrand)}}function Xo(i,n){i&1&&(r(0,"p",18),c(1,"Aucune marque disponible."),a())}var Et=class i{form;minValue=0;maxValue=1e4;options;showTextBrand=!1;minValueChange=new D;maxValueChange=new D;filterChange=new D;reset=new D;brandApi=w(kn);brands=[];getUrl=W;ngOnInit(){this.brandApi.list(!0).subscribe(n=>this.brands=n||[])}selectBrand(n){let e=this.form.value.brandId;this.form.patchValue({brandId:e===n?null:n},{emitEvent:!0}),this.filterChange.emit()}trackByBrand=(n,e)=>e._id;onMinChange(n){this.minValue=n,this.minValueChange.emit(n)}onMaxChange(n){this.maxValue=n,this.maxValueChange.emit(n)}onReset(){this.form.patchValue({brandId:null,brand:null},{emitEvent:!0}),this.reset.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-filters"]],inputs:{form:"form",minValue:"minValue",maxValue:"maxValue",options:"options",showTextBrand:"showTextBrand"},outputs:{minValueChange:"minValueChange",maxValueChange:"maxValueChange",filterChange:"filterChange",reset:"reset"},decls:24,vars:14,consts:[["noBrands",""],["aria-label","Filtres",1,"filters"],[1,"filters-head"],["type","button",1,"link-reset",3,"click"],[1,"brands"],["class","field inline",4,"ngIf"],["class","brand-grid",4,"ngIf","ngIfElse"],[1,"prices"],[3,"valueChange","highValueChange","userChangeEnd","value","highValue","options"],[1,"price-row"],[1,"field","inline"],["type","text","placeholder","ex: Lenovo",3,"input","formControl"],[1,"brand-grid"],["type","button","class","brand-chip",3,"active","title","click",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"brand-chip",3,"click","title"],[1,"logo"],[3,"src","alt"],[1,"name"],[1,"muted"]],template:function(e,t){if(e&1){let o=P();r(0,"aside",1)(1,"div",2)(2,"h3"),c(3,"Filtres"),a(),r(4,"button",3),h("click",function(){return x(o),_(t.onReset())}),c(5,"Effacer tout"),a()(),r(6,"section",4)(7,"h4"),c(8,"Marque"),a(),f(9,Wo,2,1,"div",5)(10,Zo,2,2,"div",6)(11,Xo,2,0,"ng-template",null,0,ge),a(),r(13,"section",7)(14,"h4"),c(15,"Prix"),a(),r(16,"ngx-slider",8),h("valueChange",function(g){return x(o),_(t.onMinChange(g))})("highValueChange",function(g){return x(o),_(t.onMaxChange(g))})("userChangeEnd",function(){return x(o),_(t.filterChange.emit())}),a(),r(17,"div",9)(18,"span"),c(19),H(20,"number"),a(),r(21,"span"),c(22),H(23,"number"),a()()()()}if(e&2){let o=ue(12);l(9),d("ngIf",t.showTextBrand),l(),d("ngIf",t.brands.length)("ngIfElse",o),l(6),d("value",t.minValue)("highValue",t.maxValue)("options",t.options),l(3),E("",X(20,8,t.minValue,"1.0-0")," DT"),l(3),E("",X(23,11,t.maxValue,"1.0-0")," DT")}},dependencies:[ke,A,T,un,Ie,ne,ie,Cn,Bn,jt],styles:[".link-reset[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent);cursor:pointer;font-weight:700}.link-reset[_ngcontent-%COMP%]:hover{text-decoration:underline}.brands[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .prices[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-weight:800;letter-spacing:.2px}.field.inline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:12px;background:var(--surface);color:var(--text);border:1px solid rgba(255,255,255,.08)}.brand-grid[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.brand-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;background:#ffffff0a;border:1px solid rgba(255,255,255,.08);color:var(--text);cursor:pointer;transition:background .18s,border-color .18s,box-shadow .18s,transform .08s;text-align:left}.brand-chip[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:10px;overflow:hidden;background:#fff;border:1px solid rgba(0,0,0,.06);display:grid;place-items:center}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:6px;font-size:var(--fs-2);color:var(--muted)}@media (max-width: 680px){.brand-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}}.filters[_ngcontent-%COMP%]{display:grid;gap:16px}.link-reset[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent);cursor:pointer}.brands[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .prices[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:800;letter-spacing:.2px}.brand-grid[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}.brand-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;background:#ffffff0a;border:1px solid rgba(255,255,255,.08);color:var(--text);cursor:pointer;transition:background .18s,border-color .18s,transform .08s,box-shadow .18s;text-align:left}.brand-chip[_ngcontent-%COMP%]:hover{background:#22d3ee0f;border-color:#22d3ee26;box-shadow:0 0 0 3px #22d3ee0f inset}.brand-chip.active[_ngcontent-%COMP%]{background:#22d3ee14;border-color:#22d3ee38}.brand-chip[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:10px;overflow:hidden;background:#fff;border:1px solid rgba(0,0,0,.05);display:grid;place-items:center}.brand-chip[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.brand-chip[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:var(--fs-2);color:var(--muted);margin-top:6px}@media (max-width: 680px){.brand-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}}.filters[_ngcontent-%COMP%]{position:sticky;top:0;display:grid;gap:16px;padding:16px;border-radius:16px;background:#121826a6;border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px) saturate(160%);box-shadow:0 10px 26px #00000040;color:#e6eaf2}.filters-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.filters-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:800;letter-spacing:-.01em;background:linear-gradient(135deg,#e6eaf2,#22d3ee);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.link-reset[_ngcontent-%COMP%]{background:none;border:none;color:#9ddfee;font-weight:700;cursor:pointer;padding:6px 10px;border-radius:10px;transition:.2s ease}.link-reset[_ngcontent-%COMP%]:hover{background:#22d3ee1f}section.brands[_ngcontent-%COMP%], section.prices[_ngcontent-%COMP%]{display:grid;gap:10px}section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:800;color:#e6eaf2}.field.inline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:12px;border:1.5px solid rgba(255,255,255,.12);background:#0e1525;color:#e6eaf2;outline:none;transition:.2s ease}.field.inline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#22d3ee;box-shadow:0 0 0 3px #22d3ee26,inset 0 0 0 1px #ffffff1a}.brand-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:10px}.brand-chip[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto;gap:8px;align-items:center;justify-items:center;padding:12px 10px;border-radius:14px;border:1.5px solid rgba(255,255,255,.1);background:linear-gradient(180deg,#ffffff0d,#ffffff08);color:#e6eaf2;cursor:pointer;transition:transform .15s ease,box-shadow .2s ease,border-color .2s ease;-webkit-user-select:none;user-select:none}.brand-chip[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#fff3;box-shadow:0 6px 16px #00000040}.brand-chip.active[_ngcontent-%COMP%]{border-color:#22d3ee99;box-shadow:0 0 0 3px #22d3ee26,0 8px 22px #22d3ee26;background:radial-gradient(100% 100% at 0% 0%,rgba(34,211,238,.12),transparent 60%),linear-gradient(180deg,#ffffff0f,#ffffff08)}.logo[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:12px;background:#0e1525;display:grid;place-items:center;overflow:hidden;border:1px solid rgba(255,255,255,.08)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;transition:transform .2s ease}.brand-chip[_ngcontent-%COMP%]:hover   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.name[_ngcontent-%COMP%]{font-size:.82rem;font-weight:700;text-align:center;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#cfd6e4}.muted[_ngcontent-%COMP%]{color:#9aa3b2;font-size:.9rem}ngx-slider[_ngcontent-%COMP%]{--track: rgba(255,255,255,.18);--range: #22d3ee;--thumb: #22d3ee;display:block}ngx-slider[_ngcontent-%COMP%]   .ngx-slider[_ngcontent-%COMP%]   .ngx-slider-bar[_ngcontent-%COMP%]{background:var(--track)!important;height:6px!important}ngx-slider[_ngcontent-%COMP%]   .ngx-slider[_ngcontent-%COMP%]   .ngx-slider-selection[_ngcontent-%COMP%]{background:var(--range)!important}ngx-slider[_ngcontent-%COMP%]   .ngx-slider[_ngcontent-%COMP%]   .ngx-slider-pointer[_ngcontent-%COMP%]{width:18px!important;height:18px!important;top:-6px!important;background:var(--thumb)!important;border:2px solid rgba(255,255,255,.9)!important;box-shadow:0 2px 8px #22d3ee59!important}ngx-slider[_ngcontent-%COMP%]   .ngx-slider[_ngcontent-%COMP%]   .ngx-slider-pointer[_ngcontent-%COMP%]:after{display:none!important}ngx-slider[_ngcontent-%COMP%]   .ngx-slider[_ngcontent-%COMP%]   .ngx-slider-bubble[_ngcontent-%COMP%]{color:#cfd6e4!important}.price-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-weight:700;color:#e6eaf2}@media (max-width: 768px){.filters[_ngcontent-%COMP%]{padding:14px}.brand-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(96px,1fr))}.logo[_ngcontent-%COMP%]{width:56px;height:56px}}"]})};var qt=i=>["/product",i];function Jo(i,n){i&1&&(r(0,"span",23),c(1,"Rupture"),a())}function er(i,n){if(i&1&&(r(0,"div",24),m(1,"img",25),a()),i&2){let e=p();l(),d("src",e.getUrl(e.product.brands==null?null:e.product.brands.iconUrl),F)}}function tr(i,n){if(i&1&&(r(0,"span",26),c(1),a()),i&2){let e=p();l(),y(e.product.brands==null?null:e.product.brands.name)}}function nr(i,n){if(i&1&&(r(0,"span",27),c(1),a()),i&2){let e=p();l(),E("SKU: ",e.product.sku,"")}}function ir(i,n){if(i&1&&(R(0),r(1,"span",30),c(2),a(),z()),i&2){let e=n.$implicit;l(2),Me("",e.key,": ",e.value,"")}}function or(i,n){if(i&1&&(r(0,"div",28),f(1,ir,3,2,"ng-container",29),H(2,"keyvalue"),H(3,"slice"),a()),i&2){let e=p();l(),d("ngForOf",ye(3,3,we(2,1,e.product.specs),0,3))}}function rr(i,n){if(i&1&&(r(0,"span",33),c(1),a()),i&2){let e=n.$implicit;l(),y(e)}}function ar(i,n){if(i&1&&(r(0,"div",31),f(1,rr,2,1,"span",32),a()),i&2){let e=p();l(),d("ngForOf",e.product.tags)}}function sr(i,n){if(i&1&&(r(0,"p",34),c(1),a()),i&2){let e=p();l(),y(e.product.description)}}function lr(i,n){if(i&1&&(r(0,"span",35),c(1),H(2,"currency"),a()),i&2){let e=p();l(),y(X(2,1,e.product.oldPrice,e.product.currency||"TND"))}}var Tt=class i{product;view="grid";getUrl=W;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-card"]],inputs:{product:"product",view:"view"},decls:29,vars:31,consts:[[1,"card"],[1,"thumb",3,"routerLink"],["loading","lazy",3,"src","alt"],["class","badge oos",4,"ngIf"],["class","brand-mark",4,"ngIf"],[1,"info"],[1,"top"],[1,"title"],[3,"routerLink"],[1,"stock"],[1,"meta"],["class","brand",4,"ngIf"],["class","sku",4,"ngIf"],["class","chips",4,"ngIf"],["class","tags",4,"ngIf"],["class","desc",4,"ngIf"],[1,"bottom"],[1,"price-wrap"],[1,"price"],["class","old",4,"ngIf"],[1,"actions"],[1,"btn","sm","ghost",3,"routerLink"],["type","button",1,"btn","sm","primary"],[1,"badge","oos"],[1,"brand-mark"],["alt","brand",3,"src"],[1,"brand"],[1,"sku"],[1,"chips"],[4,"ngFor","ngForOf"],[1,"chip"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"desc"],[1,"old"]],template:function(e,t){e&1&&(r(0,"article",0)(1,"a",1),m(2,"img",2),f(3,Jo,2,0,"span",3)(4,er,2,1,"div",4),a(),r(5,"div",5)(6,"div",6)(7,"h3",7)(8,"a",8),c(9),a()(),r(10,"span",9),c(11),a()(),r(12,"div",10),f(13,tr,2,1,"span",11)(14,nr,2,1,"span",12),a(),f(15,or,4,7,"div",13)(16,ar,2,1,"div",14)(17,sr,2,1,"p",15),r(18,"div",16)(19,"div",17)(20,"span",18),c(21),H(22,"currency"),a(),f(23,lr,3,4,"span",19),a(),r(24,"div",20)(25,"a",21),c(26,"Voir"),a(),r(27,"button",22),c(28,"Ajouter"),a()()()()()),e&2&&(S("list",t.view==="list"),l(),d("routerLink",K(25,qt,t.product.slug)),l(),d("src",t.getUrl(t.product.imageUrl)||"assets/images/placeholder.jpg",F)("alt",t.product.name),l(),d("ngIf",!t.product.stock||t.product.stock<=0),l(),d("ngIf",t.product.brands==null?null:t.product.brands.iconUrl),l(4),d("routerLink",K(27,qt,t.product.slug)),l(),y(t.product.name),l(),S("in",t.product.stock>0)("out",!t.product.stock||t.product.stock<=0),l(),E(" ",t.product.stock>0?"En stock":"Rupture"," "),l(2),d("ngIf",t.product.brands==null?null:t.product.brands.name),l(),d("ngIf",t.product.sku),l(),d("ngIf",t.product==null?null:t.product.specs),l(),d("ngIf",t.product.tags==null?null:t.product.tags.length),l(),d("ngIf",t.product.description),l(4),y(X(22,22,t.product.price,t.product.currency||"TND")),l(2),d("ngIf",t.product.oldPrice),l(2),d("routerLink",K(29,qt,t.product.slug)))},dependencies:[T,me,Ze,Pe,Z],styles:[".card[_ngcontent-%COMP%]{background:#ffffff0a;border:1px solid rgba(255,255,255,.08);border-radius:16px;overflow:hidden;display:grid;grid-template-columns:1fr;transition:transform .2s,box-shadow .3s,border-color .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);border-color:#22d3ee66;box-shadow:0 16px 40px #00000059}.thumb[_ngcontent-%COMP%]{position:relative;display:block;background:#0e1525;width:100%;aspect-ratio:16 / 10}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block;transition:transform .35s ease}.card[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.04)}.badge[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:800;z-index:2;white-space:nowrap}.badge.oos[_ngcontent-%COMP%]{background:#ef4444f2;color:#fff}.brand-mark[_ngcontent-%COMP%]{position:absolute;left:10px;bottom:10px;width:42px;height:42px;border-radius:10px;overflow:hidden;background:#0e1525;border:1px solid rgba(255,255,255,.12);display:grid;place-items:center;z-index:2}.brand-mark[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.info[_ngcontent-%COMP%]{padding:14px;display:grid;gap:10px;min-width:0}.top[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;gap:10px;min-width:0}.title[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:1.35;font-weight:800;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;white-space:normal;text-overflow:ellipsis;word-break:break-word}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.stock[_ngcontent-%COMP%]{padding:3px 8px;border-radius:999px;font-size:11px;font-weight:800;background:#ffffff0f;border:1px solid rgba(255,255,255,.12);white-space:nowrap;flex-shrink:0}.stock.in[_ngcontent-%COMP%]{background:#10b98126;border-color:#10b98159;color:#b6f3d7}.stock.out[_ngcontent-%COMP%]{background:#ef444426;border-color:#ef444459;color:#ffd3d3}.meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;color:#a7b0c2;font-size:12px;min-width:0}.sku[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;white-space:nowrap}.brand[_ngcontent-%COMP%]{white-space:nowrap}.chips[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;overflow:hidden}.chip[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:5px 8px;border-radius:8px;background:#ffffff0f;border:1px solid rgba(255,255,255,.12);white-space:nowrap}.tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.tag[_ngcontent-%COMP%]{font-size:11px;font-weight:700;padding:4px 8px;border-radius:999px;background:#ffffff0f;border:1px solid rgba(255,255,255,.12);color:#cfd6e4;white-space:nowrap}.desc[_ngcontent-%COMP%]{margin:0;color:#9aa3b2;font-size:13px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;word-break:break-word}.bottom[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.price-wrap[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;gap:8px}.price[_ngcontent-%COMP%]{color:var(--accent, #22d3ee);font-weight:900;font-size:18px;letter-spacing:.2px}.old[_ngcontent-%COMP%]{color:#9aa3b2;text-decoration:line-through;font-weight:600}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:36px;padding:0 12px;border-radius:12px;font-weight:700;border:1px solid transparent;cursor:pointer;transition:.2s}.btn.sm[_ngcontent-%COMP%]{height:34px;font-size:.875rem}.btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff}.btn.ghost[_ngcontent-%COMP%]{background:#ffffff0f;color:#e6eaf2;border-color:#ffffff1f}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.card.list[_ngcontent-%COMP%]{grid-template-columns:260px 1fr;align-items:stretch}.card.list[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{aspect-ratio:auto;height:100%;min-height:180px}.card.list[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:16px}.card.list[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{-webkit-line-clamp:2}@media (max-width: 768px){.card.list[_ngcontent-%COMP%]{grid-template-columns:1fr}.thumb[_ngcontent-%COMP%]{aspect-ratio:16 / 11}.bottom[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 480px){.title[_ngcontent-%COMP%]{font-size:14px;-webkit-line-clamp:3}.price[_ngcontent-%COMP%]{font-size:17px}.brand-mark[_ngcontent-%COMP%]{width:38px;height:38px}}.info[_ngcontent-%COMP%], .top[_ngcontent-%COMP%], .meta[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{min-width:0}*[_ngcontent-%COMP%]{word-wrap:break-word}"]})};function cr(i,n){i&1&&(r(0,"div",3),c(1,"Chargement\u2026"),a())}function dr(i,n){i&1&&(r(0,"div",4),c(1,"Aucun produit trouv\xE9."),a())}function pr(i,n){if(i&1&&m(0,"app-product-card",6),i&2){let e=n.$implicit,t=p(2);d("product",e)("view",t.view)}}function ur(i,n){if(i&1&&(r(0,"div"),f(1,pr,1,2,"app-product-card",5),a()),i&2){let e=p();S("grid",e.view==="grid")("list",e.view==="list"),l(),d("ngForOf",e.products)}}var Vt=class i{products=[];view="grid";loading=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-grid"]],inputs:{products:"products",view:"view",loading:"loading"},decls:3,vars:3,consts:[["class","loading",4,"ngIf"],["class","empty",4,"ngIf"],[3,"grid","list",4,"ngIf"],[1,"loading"],[1,"empty"],[3,"product","view",4,"ngFor","ngForOf"],[3,"product","view"]],template:function(e,t){e&1&&f(0,cr,2,0,"div",0)(1,dr,2,0,"div",1)(2,ur,2,5,"div",2),e&2&&(d("ngIf",t.loading),l(),d("ngIf",!t.loading&&t.products.length===0),l(),d("ngIf",!t.loading&&t.products.length))},dependencies:[T,A,Tt],styles:[".loading[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{color:var(--muted);padding:24px 0;text-align:center;font-size:15px;font-style:italic}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px}.list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:16px}"]})};function gr(i,n){i&1&&(R(0),r(1,"p",6),c(2,"Aucun produit dans cette sous-cat\xE9gorie."),a(),z())}var It=class i{fb=w(nt);route=w(he);productsApi=w(ae);view=O("grid");featuredOnly=O(!1);sortBy=O("priceAsc");loading=O(!0);minValue=O(0);maxValue=O(1e4);sliderOptions={floor:0,ceil:1e4,step:50,translate:n=>`${n} DT`};f=this.fb.group({brand:this.fb.control(null),brandId:this.fb.control(null)});products=O([]);allProducts=[];ngOnInit(){this.route.paramMap.subscribe(n=>Y(this,null,function*(){let e=n.get("id");if(!e){this.allProducts=[],this.products.set([]),this.loading.set(!1);return}yield this.fetchForSubcategory(e)})),this.f.valueChanges.subscribe(()=>this.applyFilters())}fetchForSubcategory(n){return Y(this,null,function*(){this.loading.set(!0);try{let e=yield this.productsApi.listBySubcategory(n).toPromise();if(this.allProducts=e?.items||[],this.products.set(this.allProducts),this.allProducts.length){let t=this.allProducts.map(g=>g.price??0),o=Math.floor(Math.min(...t)),s=Math.ceil(Math.max(...t));this.minValue.set(o),this.maxValue.set(s),this.sliderOptions=Yt(Gt({},this.sliderOptions),{floor:o,ceil:s})}this.applyFilters()}finally{this.loading.set(!1)}})}onSortChange(n){this.sortBy.set(n),this.applyFilters()}applyFilters(){let n=[...this.allProducts],{brandId:e,brand:t}=this.f?.value||{},o=this.minValue(),s=this.maxValue(),g=C=>C?.brand?typeof C.brand=="string"?C.brand:typeof C.brand=="object"&&(C.brand._id||C.brand.id)||null:null,b=C=>C?.brand?typeof C.brand=="string"?C.brand:typeof C.brand=="object"?(C.brand.name||C.brand.label||"").toString():"":"";if(e&&(n=n.filter(C=>g(C)===e)),t&&t.trim()){let C=t.trim().toLowerCase();n=n.filter(V=>b(V).toLowerCase().includes(C))}switch(n=n.filter(C=>(C.price??0)>=o&&(C.price??0)<=s),this.featuredOnly()&&(n=n.filter(C=>C.isFeatured===!0)),this.sortBy()){case"priceAsc":n.sort((C,V)=>(C.price??0)-(V.price??0));break;case"priceDesc":n.sort((C,V)=>(V.price??0)-(C.price??0));break;case"newest":break}this.products.set(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-list"]],decls:6,vars:11,consts:[[1,"listing"],[3,"viewChange","featuredChange","sortChange","view","featuredOnly","sortBy"],[1,"layout"],[3,"minValueChange","maxValueChange","filterChange","reset","form","minValue","maxValue","options"],[3,"products","view","loading"],[4,"ngIf"],[1,"muted",2,"padding","12px 0"]],template:function(e,t){if(e&1&&(r(0,"section",0)(1,"app-product-controls",1),h("viewChange",function(s){return t.view.set(s)})("featuredChange",function(s){return t.featuredOnly.set(s),t.applyFilters()})("sortChange",function(s){return t.onSortChange(s)}),a(),r(2,"div",2)(3,"app-product-filters",3),h("minValueChange",function(s){return t.minValue.set(s)})("maxValueChange",function(s){return t.maxValue.set(s)})("filterChange",function(){return t.applyFilters()})("reset",function(){return t.applyFilters()}),a(),m(4,"app-product-grid",4),a(),f(5,gr,3,0,"ng-container",5),a()),e&2){let o;l(),d("view",t.view())("featuredOnly",t.featuredOnly())("sortBy",t.sortBy()),l(2),d("form",t.f)("minValue",t.minValue())("maxValue",t.maxValue())("options",t.sliderOptions),l(),d("products",t.products())("view",t.view())("loading",t.loading()),l(),d("ngIf",!t.loading&&(!t.products||((o=t.products())==null?null:o.length)===0))}},dependencies:[T,Ie,Ot,Et,Vt],styles:["section.listing[_ngcontent-%COMP%]{display:block;margin-top:16px;padding-inline:8px}app-product-controls[_ngcontent-%COMP%]{display:block;position:static;top:68px;z-index:6;background:linear-gradient(180deg,#121826d9,#121826a6);-webkit-backdrop-filter:blur(14px) saturate(140%);border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:10px 12px;box-shadow:0 8px 24px #00000040}app-product-controls[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:0}.layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr;gap:18px;margin-top:16px}app-product-filters[_ngcontent-%COMP%]{display:block;position:static;top:132px;align-self:start;background:#ffffff0a;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px;box-shadow:0 8px 22px #0003}app-product-grid[_ngcontent-%COMP%]{display:block;min-width:0}app-product-filters[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}app-product-filters[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff24;border-radius:999px}@media (max-width: 992px){.layout[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:14px}app-product-filters[_ngcontent-%COMP%]{position:relative;top:0;order:2;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#121826d9;-webkit-backdrop-filter:blur(10px) saturate(120%);backdrop-filter:blur(10px) saturate(120%)}app-product-grid[_ngcontent-%COMP%]{order:3}app-product-controls[_ngcontent-%COMP%]{order:1;top:64px;padding:8px 10px;border-radius:12px}}@media (max-width: 600px){section.listing[_ngcontent-%COMP%]{padding-inline:6px}app-product-controls[_ngcontent-%COMP%]{gap:8px;padding:8px}app-product-filters[_ngcontent-%COMP%]{padding:8px;border-radius:10px}}@media (max-width: 380px){app-product-controls[_ngcontent-%COMP%]{padding:6px;border-radius:10px}app-product-filters[_ngcontent-%COMP%]{padding:6px}}"]})};var mr=[{path:"",component:vt,children:[{path:"",loadComponent:()=>import("./chunk-BQ43QBYA.js").then(i=>i.HomeComponent)},{path:"categories",loadComponent:()=>import("./chunk-PUJC4CGE.js").then(i=>i.CategoryComponent)},{path:"categories/:id",loadComponent:()=>import("./chunk-PUJC4CGE.js").then(i=>i.CategoryComponent)},{path:"product/:slug",component:xt},{path:"categories/sub-categories/:id",component:It},{path:"contact",loadComponent:()=>import("./chunk-ZYMYYPW4.js").then(i=>i.ContactComponent)},{path:"panier",component:bt},{path:"reset-password/:token",loadComponent:()=>import("./chunk-BQ43QBYA.js").then(i=>i.HomeComponent)},{path:"oauth-complete",component:Ct}]},{path:"admin",canMatch:[Ln],data:{hideShell:!0},loadChildren:()=>import("./chunk-UDTAPOZA.js").then(i=>i.ADMIN_ROUTES)},{path:"**",redirectTo:""}];bn(ft,{providers:[xn(mr),hn(fn([In,Hn]))]}).catch(console.error);
