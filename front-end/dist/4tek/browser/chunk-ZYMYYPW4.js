import{c as E,d as i,e as y,f as M,i as P,l as w,m as O,u as N,w as S}from"./chunk-BFCV6PZZ.js";import{b as v}from"./chunk-HWLEWUSP.js";import{$a as d,Ea as r,Ma as f,Qa as p,Tb as _,Wa as s,Z as u,Za as n,_a as e,db as h,e as g,eb as x,lb as o,mb as b,nb as C,ra as c}from"./chunk-72X2LRK3.js";function I(t,a){t&1&&(n(0,"small"),o(1,"Nom invalide (2\u2013100 caract\xE8res)."),e())}function T(t,a){t&1&&(n(0,"small"),o(1,"Email invalide."),e())}function L(t,a){t&1&&(n(0,"small"),o(1,"T\xE9l\xE9phone invalide."),e())}function q(t,a){t&1&&(n(0,"small"),o(1,"Message requis (10\u20131000 caract\xE8res)."),e())}function D(t,a){t&1&&(n(0,"p",19),o(1,"Merci ! Ton message a \xE9t\xE9 envoy\xE9."),e())}function A(t,a){if(t&1&&(n(0,"p",20),o(1),e()),t&2){let l=x();r(),b(l.err())}}var k=class t{fb=u(N);http=u(v);sending=c(!1);ok=c(!1);err=c("");form=this.fb.group({fullName:["",[i.required,i.minLength(2),i.maxLength(100)]],email:["",[i.required,i.email]],phone:["",[i.required,i.minLength(6),i.maxLength(30)]],subject:["",[i.required,i.maxLength(120)]],message:["",[i.required,i.minLength(10),i.maxLength(1e3)]],website:[""]});submit(){return g(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}if((this.form.get("website")?.value||"").length>0){this.ok.set(!0),this.err.set("");return}this.sending.set(!0),this.ok.set(!1),this.err.set("");try{yield this.http.post("http://localhost:4000/api/contact",this.form.value,{responseType:"json"}).toPromise(),this.ok.set(!0),this.form.reset()}catch(a){this.err.set(a?.error?.error||"Une erreur est survenue. R\xE9essaie plus tard.")}finally{this.sending.set(!1)}})}showError(a){let l=this.form.get(a);return!!(l&&l.touched&&l.invalid)}static \u0275fac=function(l){return new(l||t)};static \u0275cmp=f({type:t,selectors:[["app-contact"]],decls:32,vars:9,consts:[[1,"contact"],[1,"contact-head"],[1,"form",3,"ngSubmit","formGroup"],[1,"grid"],[1,"field"],["for","fullName"],["id","fullName","type","text","formControlName","fullName","placeholder","ex: Ahmed Ben Ali"],[4,"ngIf"],["for","email"],["id","email","type","email","formControlName","email","placeholder","ex: ahmed@mail.tn"],["for","phone"],["id","phone","type","tel","formControlName","phone","placeholder","ex: +216 12 345 678"],["for","message"],["id","message","rows","5","formControlName","message","placeholder","Dis-nous ce dont tu as besoin\u2026"],["formControlName","website","tabindex","-1","autocomplete","off","aria-hidden","true",1,"hp"],[1,"actions"],["type","submit",1,"btn","btn-primary","btn--sm",3,"disabled"],["class","notice-ok",4,"ngIf"],["class","notice-warn",4,"ngIf"],[1,"notice-ok"],[1,"notice-warn"]],template:function(l,m){l&1&&(n(0,"section",0)(1,"header",1)(2,"h1"),o(3,"Contact"),e()(),n(4,"form",2),h("ngSubmit",function(){return m.submit()}),n(5,"div",3)(6,"div",4)(7,"label",5),o(8,"Nom complet"),e(),d(9,"input",6),p(10,I,2,0,"small",7),e(),n(11,"div",4)(12,"label",8),o(13,"Email"),e(),d(14,"input",9),p(15,T,2,0,"small",7),e(),n(16,"div",4)(17,"label",10),o(18,"T\xE9l\xE9phone"),e(),d(19,"input",11),p(20,L,2,0,"small",7),e()(),n(21,"div",4)(22,"label",12),o(23,"Message"),e(),d(24,"textarea",13),p(25,q,2,0,"small",7),e(),d(26,"input",14),n(27,"div",15)(28,"button",16),o(29),e()(),p(30,D,2,0,"p",17)(31,A,2,1,"p",18),e()()),l&2&&(r(4),s("formGroup",m.form),r(6),s("ngIf",m.showError("fullName")),r(5),s("ngIf",m.showError("email")),r(5),s("ngIf",m.showError("phone")),r(5),s("ngIf",m.showError("message")),r(3),s("disabled",m.sending()),r(),C(" ",m.sending()?"Envoi\u2026":"Envoyer"," "),r(),s("ngIf",m.ok()),r(),s("ngIf",m.err()))},dependencies:[S,P,E,y,M,w,O,_],styles:[".contact[_ngcontent-%COMP%]{margin-top:24px;background:radial-gradient(80% 120% at 20% 0%,rgba(79,70,229,.12) 0%,transparent 55%),var(--surface);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;box-shadow:0 8px 24px #00000040}.contact-head[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:var(--fs-5)}.contact-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px}.form[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}@media (max-width: 720px){.form[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.field[_ngcontent-%COMP%]{display:grid;gap:6px}label[_ngcontent-%COMP%]{font-size:14px;color:var(--muted)}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:var(--bg);color:var(--text);outline:none;transition:border .15s ease,box-shadow .15s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22d3ee2e}small[_ngcontent-%COMP%]{color:#f59e0b}.hp[_ngcontent-%COMP%]{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}.notice-ok[_ngcontent-%COMP%]{margin-top:12px;background:#10b98126;border:1px solid rgba(16,185,129,.3);padding:10px 12px;border-radius:12px}.notice-warn[_ngcontent-%COMP%]{margin-top:12px;background:#f59e0b26;border:1px solid rgba(245,158,11,.3);padding:10px 12px;border-radius:12px}.form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{display:block;width:fit-content;margin-left:auto;padding:8px 12px;border-radius:10px;font-size:14px;margin-top:12px}"]})};export{k as ContactComponent};
